{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport moment from \"moment\";\nimport { Delete, Edit, Finished, Postcard } from '@element-plus/icons-vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nimport SlideSelection from '../components/SlideSelection.vue';\nimport WeekDrag from '../components/WeekDrag';\nimport DayDrag from '../components/DayDrag';\nimport { autoSchedul, deleteDaySchedule, deleteScheduling, getADaywork, getAllEmployee, getAllStore, getAWeekwork, getStorePersons, getStuffDayWork, getStuffWeekWork, replaceDaySchedule, updateWeekData } from '@/api';\n\n/**\r\n * 初始化获取数据库数据：stores、data、employees\r\n */\n// 门店切换\n\nexport default {\n  __name: 'ShiftSchedule',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const stores = ref([]);\n    const storeValue = ref();\n\n    //所有员工数据\n    const employees = ref([]);\n    const employeesAvail = ref([]);\n\n    //表格单元格数据\n    var data = [];\n    const tableData = ref([]);\n    const dayData = ref([]);\n    const weekIndex = [0, 1, 1, 1, 1, 1, 0];\n    let persons = ref();\n    const needpersons = ref(18);\n    const getmessage = ref(false);\n    const submitForm = needperson => {\n      let monday = current.value.startOf('isoWeek').format('YYYY-MM-DD');\n      console.log(storeValue.value + \"   \" + needperson + \"   \" + monday);\n      autoSchedul(storeValue.value, needperson, monday).then(datas => {\n        console.log(datas);\n      });\n    };\n    const confermessage = () => {\n      console.log(\"店铺id\" + storeValue.value);\n      // console.log(\"我的测试点\"+getStorePersons(storeId.value))\n      getStorePersons(storeValue.value).then(({\n        data\n      }) => {\n        console.log(\"测试数据    \" + data);\n        persons.value = data;\n      });\n      getmessage.value = true;\n      console.log(\"猜猜我是谁\" + getmessage.value);\n    };\n\n    //登录用户ID和权限\n    const employee = sessionStorage.getItem(\"employee\");\n    console.log(\"employee\" + employee);\n    const employeeId = JSON.parse(employee).employeeId;\n    const root = JSON.parse(employee).root;\n\n    //初始化获取数据库\n    getAllStore().then(datas => {\n      stores.value = datas.data;\n      storeValue.value = stores.value[0].storeId;\n      getAllEmployee(stores.value[0].storeId).then(datas => {\n        employees.value = datas.data;\n        employeesAvail.value = [...employees.value];\n      });\n      console.log(root);\n      loading.value = true;\n      if (root === 1) {\n        getAWeekwork(moment().startOf('isoWeek').format('YYYY-MM-DD'), moment().endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value).then(datas => {\n          data = datas.data;\n          var index = 0;\n          let tmp = data[0].map(function (col, i) {\n            return data.map(function (row) {\n              if (index === i) {\n                let dataRow = [];\n                dataRow.push(row[i][2]);\n                tableData.value.push(dataRow);\n                index++;\n              }\n              return row[i].slice(0, 2);\n            });\n          });\n          tableData.value = tableData.value.map((val, index) => {\n            let t = [...val];\n            t.push([...tmp[index]]);\n            return t;\n          });\n          console.log(tableData.value);\n          loading.value = false;\n        });\n        loading.value = true;\n        getADaywork(moment().format('YYYY-MM-DD'), weekIndex[moment().day()], storeValue.value).then(datas => {\n          dayData.value = datas.data;\n          loading.value = false;\n        });\n      } else {\n        getStuffWeekWork(moment().startOf('isoWeek').format('YYYY-MM-DD'), moment().endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value, employeeId).then(datas => {\n          data = datas.data;\n          var index = 0;\n          let tmp = data[0].map(function (col, i) {\n            return data.map(function (row) {\n              if (index === i) {\n                let dataRow = [];\n                dataRow.push(row[i][2]);\n                tableData.value.push(dataRow);\n                index++;\n              }\n              return row[i].slice(0, 2);\n            });\n          });\n          tableData.value = tableData.value.map((val, index) => {\n            let t = [...val];\n            t.push([...tmp[index]]);\n            return t;\n          });\n          console.log(tableData.value);\n          loading.value = false;\n        });\n        loading.value = true;\n        getStuffDayWork(moment().format('YYYY-MM-DD'), weekIndex[moment().day()], storeValue.value, employeeId).then(datas => {\n          dayData.value = datas.data;\n          loading.value = false;\n        });\n      }\n    });\n\n    /**\r\n     * 初始化本地变量\r\n     */\n    /* 固定变量 */\n    //全部查看|按岗位分组|按员工分组\n    const viewMethods = [{\n      label: 1,\n      value: '全部查看'\n    }, {\n      label: 2,\n      value: '按岗位分组'\n    }, {\n      label: 3,\n      value: '按员工分组'\n    }];\n    const slideRef = ref();\n    const weekDragRef = ref();\n    const dayDragRef = ref();\n\n    /* 需修改变量 */\n    //按周查看|按日查看 的切换\n    const week_day = ref('week');\n\n    //全部查看|按岗位分组|按员工分组 的切换\n    const viewValue = ref(viewMethods[0].value);\n    const current = ref(moment());\n    const labels = ref(['周一 ' + current.value.startOf('isoWeek').format('M月D日'), '周二 ' + current.value.startOf('isoWeek').add(1, 'days').format('M月D日'), '周三 ' + current.value.startOf('isoWeek').add(2, 'days').format('M月D日'), '周四 ' + current.value.startOf('isoWeek').add(3, 'days').format('M月D日'), '周五 ' + current.value.startOf('isoWeek').add(4, 'days').format('M月D日'), '周六 ' + current.value.startOf('isoWeek').add(5, 'days').format('M月D日'), '周日 ' + current.value.startOf('isoWeek').add(6, 'days').format('M月D日')]);\n\n    //被点击单元格的坐标s\n    var arrTd = [];\n\n    //编辑button的文本切换\n    const edit = ref('编辑');\n\n    //表格标签\n    const table = ref({\n      time: '时间',\n      week1: labels.value[0],\n      week2: labels.value[1],\n      week3: labels.value[2],\n      week4: labels.value[3],\n      week5: labels.value[4],\n      week6: labels.value[5],\n      week7: labels.value[6]\n    });\n\n    //加载数据\n    const loading = ref(true);\n\n    //是否可拖拽drag，拖拽起点dragging，拖拽终点ending\n    const drag = ref(false);\n    const ending = ref(null);\n    const dragging = ref(null);\n\n    //是否显示添加员工对话框\n    const showDialog = ref(false);\n    //对话框里的员工下拉框\n    const employeeValue = ref('请选择要添加的员工');\n    //已处于选中单元格中的员工s\n    var addIndex = null;\n\n    /**\r\n     * 函数\r\n     */\n    //修改门店\n    const changeStore = () => {\n      getStoreData();\n\n      //周切换\n      slideRef.value.initWeeks();\n\n      //日切换\n      slideRef.value.initDays();\n      initVariable();\n    };\n\n    //修改按周查看|按日查看\n    const chooseWorD = button => {\n      //获取数据库data、dayData\n      if (button === 'week' && week_day.value === 'day') {\n        week_day.value = 'week';\n\n        //周切换\n        slideRef.value.initWeeks();\n      } else if (button === 'day' && week_day.value === 'week') {\n        week_day.value = 'day';\n\n        //日切换\n        slideRef.value.initDays();\n      }\n      initVariable();\n    };\n\n    //点击多选单元格\n    const handleClickTd = (row, col) => {\n      var flag = 0;\n      var td = document.getElementById('td' + week_day.value + row + '-' + col);\n      arrTd.map((value, index) => {\n        if (value.toString() === [row, col].toString()) {\n          arrTd.splice(index, 1);\n          td.style.backgroundColor = '';\n          flag = 1;\n          return;\n        }\n      });\n      if (flag === 0) {\n        arrTd.push([row, col]);\n        td.style.backgroundColor = '#ffe0e0';\n      }\n      console.log(arrTd);\n    };\n    //点击删除button删除单元格内容\n    const handleDelete = () => {\n      if (edit.value === '完成') {\n        message('正处于编辑状态，不可删除');\n      } else if (arrTd.length === 0) {\n        message('请选择要删除内容的单元格');\n      } else {\n        ElMessageBox.confirm('单元格内容将永久被删除，确定吗?', 'Warning', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          if (week_day.value === 'week') {\n            var newData = [...tableData.value];\n            var deleteIds = [];\n            arrTd.map(value => {\n              console.log(tableData.value[value[0]][1][value[1]]);\n              if (tableData.value[value[0]][1][value[1]][1] !== null) deleteIds.push(tableData.value[value[0]][1][value[1]][1]);\n              newData[value[0]][1][value[1]][0] = [];\n              newData[value[0]][1][value[1]][1] = null;\n              let td = document.getElementById('td' + week_day.value + value[0] + '-' + value[1]);\n              // console.log(td)\n              td.style.backgroundColor = '';\n            });\n            tableData.value = [...newData];\n            deleteScheduling(deleteIds);\n          } else {\n            var newDayData = [...dayData.value];\n            var updateIndexs = [];\n            var updateEmployeeIds = \"\";\n            arrTd.map(value => {\n              if (JSON.stringify(newDayData[value[0]][0][value[1]]) !== '{}' && newDayData[value[0]][0][value[1]].employeeId !== null) updateIndexs.push(value[0]);\n              newDayData[value[0]][0][value[1]] = {};\n              let td = document.getElementById('td' + week_day.value + value[0] + '-' + value[1]);\n              td.style.backgroundColor = '';\n            });\n            dayData.value = [...newDayData];\n            let items = [];\n            updateIndexs = [...new Set(updateIndexs)];\n            updateIndexs.map(value => {\n              let employeeIds = \"\";\n              newDayData[value][0].map(v => {\n                if (v.employeeId !== null && JSON.stringify(v) !== '{}' && employeeIds === \"\") employeeIds += v.employeeId;else if (v.employeeId !== null && JSON.stringify(v) !== '{}') employeeIds += \",\" + v.employeeId;\n              });\n              let item = {};\n              item.index = value;\n              item.period = newDayData[value][1];\n              item.employeeIds = employeeIds;\n              items.push(item);\n            });\n            console.log(items);\n            deleteDaySchedule(items, current.value.format('YYYY-MM-DD'), storeValue.value);\n          }\n          arrTd.splice(0, arrTd.length);\n          ElMessage({\n            type: 'success',\n            message: '删除成功'\n          });\n        }).catch(() => {\n          ElMessage({\n            type: 'info',\n            message: '取消删除'\n          });\n        });\n      }\n    };\n    //点击编辑|完成\n    const handleEdit = () => {\n      if (edit.value === '编辑') {\n        var tds = document.querySelectorAll('td');\n        for (var i = 1; i < tds.length; i++) {\n          if (tds[i].id !== 'td-time') tds[i].style.backgroundColor = '';\n        }\n      } else {\n        if (week_day.value === 'week') {\n          updateSchedule();\n        } else {\n          let items = [];\n          dayData.value.map((value, index) => {\n            let item = {};\n            item.period = value[1];\n            let employeeIds = \"\";\n            let flag = 0;\n            value[0].map(v => {\n              if (JSON.stringify(v) !== '{}' && v.employeeId !== null && flag === 0) {\n                employeeIds += v.employeeId;\n                flag = 1;\n              } else if (JSON.stringify(v) !== '{}' && v.employeeId !== null) employeeIds += \",\" + v.employeeId;\n            });\n            item.employeeIds = employeeIds;\n            items.push(item);\n          });\n          console.log(items);\n          replaceDaySchedule(items, storeValue.value, current.value.format('YYYY-MM-DD'));\n        }\n      }\n      if (week_day.value === 'week') weekDragRef.value.weekEdit();else dayDragRef.value.dayEdit();\n      edit.value = edit.value === '编辑' ? '完成' : '编辑';\n    };\n\n    //更新数据库排班数据\n    const updateSchedule = () => {\n      let items = [];\n      tableData.value.forEach(row => {\n        row[1].forEach((col, i) => {\n          let item = {};\n          if (col[1] != null) item.id = col[1];else item.id = null;\n          let employeeIds = \"\";\n          if (col[0] != null) {\n            col[0].forEach((stuff, index) => {\n              if (index === 0) employeeIds += stuff.employeeId;else employeeIds += \",\" + stuff.employeeId;\n            });\n          }\n          item.employeeIds = employeeIds;\n          if (item.id != null || employeeIds != \"\") {\n            console.log(row[0]);\n            item.period = row[0];\n            item.day = current.value.startOf('W').add(i, 'days').format(\"YYYY-MM-DD\");\n            console.log(item);\n            items.push(JSON.stringify(item));\n          }\n        });\n      });\n      updateWeekData(items, storeValue.value);\n    };\n    const dragInit = () => {\n      if (week_day.value === 'week') weekDragRef.value.initDrag();else dayDragRef.value.initDrag();\n    };\n\n    //显示添加员工对话框、添加员工\n    const showAddView = (added, index1, index2) => {\n      console.log(added, index1, index2);\n      employeeValue.value = '请选择要添加的员工';\n      addIndex = [index1, index2];\n      var newEAvil = [...employees.value];\n      if (week_day.value === 'week') {\n        newEAvil = newEAvil.filter(item => {\n          var isInclude = false;\n          added.map(value => {\n            if (value.employeeId === item.employeeId) {\n              isInclude = true;\n              return;\n            }\n          });\n          // console.log(isInclude);\n          return !isInclude;\n        });\n      } else {\n        newEAvil = newEAvil.filter(item => {\n          var isInclude = false;\n          console.log(dayData.value[index1]);\n          dayData.value[index1].map(value => {\n            console.log(value);\n            if (JSON.stringify(value) !== '{}' && value.employeeId !== null) {\n              if (value.employeeId === item.employeeId) {\n                isInclude = true;\n                return;\n              }\n            }\n          });\n          // console.log(isInclude);\n          return !isInclude;\n        });\n      }\n      employeesAvail.value = [...newEAvil];\n      console.log(employeesAvail);\n      showDialog.value = true;\n    };\n    const addEmplyee = () => {\n      if (employeeValue.value === '请选择要添加的员工') {\n        message(\"请选择要添加的员工\");\n      } else {\n        if (week_day.value === 'week') {\n          let newData = [...tableData.value];\n          newData[addIndex[0]][1][addIndex[1]][0].push(employeeValue.value);\n          tableData.value = [...newData];\n        } else {\n          let newData = [...dayData.value];\n          newData[addIndex[0]][1][addIndex[1]] = employeeValue.value;\n          dayData.value = [...newData];\n        }\n      }\n      showDialog.value = false;\n    };\n\n    //工具类\n    const message = str => {\n      return ElMessage({\n        showClose: true,\n        message: str,\n        type: 'warning',\n        grouping: true\n      });\n    };\n    const initVariable = () => {\n      //全部查看|按岗位分组|按员工分组 的切换\n      viewValue.value = viewMethods[0].value;\n\n      //被点击单元格的坐标s\n      arrTd = [];\n\n      //编辑button的文本切换\n      edit.value = '编辑';\n\n      //是否可拖拽drag，拖拽起点dragging，拖拽终点ending\n      drag.value = false;\n      ending.value = null;\n      dragging.value = null;\n\n      //是否显示添加员工对话框\n      showDialog.value = false;\n      //对话框里的员工下拉框\n      employeeValue.value = '请选择要添加的员工';\n      //已处于选中单元格中的员工s\n      addIndex = null;\n      var tds = document.querySelectorAll('td');\n      for (var i = 1; i < tds.length; i++) {\n        if (tds[i].id !== 'td-time') tds[i].style.backgroundColor = '';\n      }\n    };\n    const updateTableData = () => {\n      loading.value = true;\n      tableData.value = [];\n      if (root === 1) {\n        getAWeekwork(current.value.startOf('isoWeek').format('YYYY-MM-DD'), current.value.endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value).then(datas => {\n          data = datas.data;\n          var index = 0;\n          let tmp = data[0].map(function (col, i) {\n            return data.map(function (row) {\n              if (index === i) {\n                let dataRow = [];\n                dataRow.push(row[i][2]);\n                tableData.value.push(dataRow);\n                index++;\n              }\n              return row[i].slice(0, 2);\n            });\n          });\n          tableData.value = tableData.value.map((val, index) => {\n            let t = [...val];\n            t.push([...tmp[index]]);\n            return t;\n          });\n          console.log(tableData.value);\n          loading.value = false;\n        });\n      } else {\n        getStuffWeekWork(current.value.startOf('isoWeek').format('YYYY-MM-DD'), current.value.endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value, employeeId).then(datas => {\n          data = datas.data;\n          var index = 0;\n          let tmp = data[0].map(function (col, i) {\n            return data.map(function (row) {\n              if (index === i) {\n                let dataRow = [];\n                dataRow.push(row[i][2]);\n                tableData.value.push(dataRow);\n                index++;\n              }\n              return row[i].slice(0, 2);\n            });\n          });\n          tableData.value = tableData.value.map((val, index) => {\n            let t = [...val];\n            t.push([...tmp[index]]);\n            return t;\n          });\n          console.log(tableData.value);\n          loading.value = false;\n        });\n      }\n    };\n    const updateDayDate = () => {\n      loading.value = true;\n      if (root === 1) {\n        getADaywork(current.value.format('YYYY-MM-DD'), weekIndex[current.value.day()], storeValue.value).then(datas => {\n          dayData.value = datas.data;\n          loading.value = false;\n        });\n      } else {\n        console.log(\"this\");\n        loading.value = true;\n        getStuffDayWork(current.value.format('YYYY-MM-DD'), weekIndex[moment().day()], storeValue.value, employeeId).then(datas => {\n          console.log(datas.data);\n          dayData.value = datas.data;\n          loading.value = false;\n        });\n      }\n    };\n    const getStoreData = () => {\n      console.log(storeValue.value);\n      getAllEmployee(stores.value[0].storeId).then(datas => {\n        employees.value = datas.data;\n        employeesAvail.value = [...employees.value];\n      });\n    };\n    const __returned__ = {\n      stores,\n      storeValue,\n      employees,\n      employeesAvail,\n      get data() {\n        return data;\n      },\n      set data(v) {\n        data = v;\n      },\n      tableData,\n      dayData,\n      weekIndex,\n      get persons() {\n        return persons;\n      },\n      set persons(v) {\n        persons = v;\n      },\n      needpersons,\n      getmessage,\n      submitForm,\n      confermessage,\n      employee,\n      employeeId,\n      root,\n      viewMethods,\n      slideRef,\n      weekDragRef,\n      dayDragRef,\n      week_day,\n      viewValue,\n      current,\n      labels,\n      get arrTd() {\n        return arrTd;\n      },\n      set arrTd(v) {\n        arrTd = v;\n      },\n      edit,\n      table,\n      loading,\n      drag,\n      ending,\n      dragging,\n      showDialog,\n      employeeValue,\n      get addIndex() {\n        return addIndex;\n      },\n      set addIndex(v) {\n        addIndex = v;\n      },\n      changeStore,\n      chooseWorD,\n      handleClickTd,\n      handleDelete,\n      handleEdit,\n      updateSchedule,\n      dragInit,\n      showAddView,\n      addEmplyee,\n      message,\n      initVariable,\n      updateTableData,\n      updateDayDate,\n      getStoreData,\n      ref,\n      get moment() {\n        return moment;\n      },\n      get Delete() {\n        return Delete;\n      },\n      get Edit() {\n        return Edit;\n      },\n      get Finished() {\n        return Finished;\n      },\n      get Postcard() {\n        return Postcard;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      },\n      SlideSelection,\n      get WeekDrag() {\n        return WeekDrag;\n      },\n      get DayDrag() {\n        return DayDrag;\n      },\n      get autoSchedul() {\n        return autoSchedul;\n      },\n      get deleteDaySchedule() {\n        return deleteDaySchedule;\n      },\n      get deleteScheduling() {\n        return deleteScheduling;\n      },\n      get getADaywork() {\n        return getADaywork;\n      },\n      get getAllEmployee() {\n        return getAllEmployee;\n      },\n      get getAllStore() {\n        return getAllStore;\n      },\n      get getAWeekwork() {\n        return getAWeekwork;\n      },\n      get getStorePersons() {\n        return getStorePersons;\n      },\n      get getStuffDayWork() {\n        return getStuffDayWork;\n      },\n      get getStuffWeekWork() {\n        return getStuffWeekWork;\n      },\n      get replaceDaySchedule() {\n        return replaceDaySchedule;\n      },\n      get updateWeekData() {\n        return updateWeekData;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","moment","Delete","Edit","Finished","Postcard","ElMessage","ElMessageBox","SlideSelection","WeekDrag","DayDrag","autoSchedul","deleteDaySchedule","deleteScheduling","getADaywork","getAllEmployee","getAllStore","getAWeekwork","getStorePersons","getStuffDayWork","getStuffWeekWork","replaceDaySchedule","updateWeekData","stores","storeValue","employees","employeesAvail","data","tableData","dayData","weekIndex","persons","needpersons","getmessage","submitForm","needperson","monday","current","value","startOf","format","console","log","then","datas","confermessage","employee","sessionStorage","getItem","employeeId","JSON","parse","root","storeId","loading","endOf","index","tmp","map","col","i","row","dataRow","push","slice","val","t","day","viewMethods","label","slideRef","weekDragRef","dayDragRef","week_day","viewValue","labels","add","arrTd","edit","table","time","week1","week2","week3","week4","week5","week6","week7","drag","ending","dragging","showDialog","employeeValue","addIndex","changeStore","getStoreData","initWeeks","initDays","initVariable","chooseWorD","button","handleClickTd","flag","td","document","getElementById","toString","splice","style","backgroundColor","handleDelete","message","length","confirm","confirmButtonText","cancelButtonText","type","newData","deleteIds","newDayData","updateIndexs","updateEmployeeIds","stringify","items","Set","employeeIds","v","item","period","catch","handleEdit","tds","querySelectorAll","id","updateSchedule","weekEdit","dayEdit","forEach","stuff","dragInit","initDrag","showAddView","added","index1","index2","newEAvil","filter","isInclude","addEmplyee","str","showClose","grouping","updateTableData","updateDayDate"],"sources":["E:/work/vue/schedule/intelligent-schedule/src/views/ShiftSchedule.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <el-select v-model=\"storeValue\" filterable class=\"store\" size=\"large\" @change=\"changeStore\">\r\n      <el-option v-for=\"store in stores\" :key=\"store.storeId\" :label=\"store.storeName\" :value=\"store.storeId\"/>\r\n    </el-select>\r\n\r\n    <div class=\"time\">\r\n      <span>{{ current.format('YYYY年M月') }}</span>\r\n    </div>\r\n\r\n    <div class=\"view-options\">\r\n      <div class=\"view\">\r\n        <el-button type=\"primary\" :class=\"week_day === 'week' ? 'view-choose' : 'view-notchoose'\"\r\n                   @click=\"chooseWorD('week')\">按周查看\r\n        </el-button>\r\n        <el-button type=\"primary\" :class=\"week_day === 'day' ? 'view-choose' : 'view-notchoose'\"\r\n                   @click=\"chooseWorD('day')\">按日查看\r\n        </el-button>\r\n      </div>\r\n\r\n      <SlideSelection ref=\"slideRef\" :week_day=\"week_day\" @emitCurrent=\"(current1) => current = current1\"\r\n                      @emitTable=\"(table1) => table = table1\" @updateTableData=\"updateTableData\"\r\n                      @updateDayDate=\"updateDayDate\"\r\n                      @initVariable=\"initVariable\" @dragInit=\"dragInit\"/>\r\n    </div>\r\n\r\n    <div class=\"view-button\">\r\n      <el-select v-model=\"viewValue\" filterable class=\"store\" size=\"large\">\r\n        <el-option v-for=\"viewMethod in viewMethods\" :key=\"viewMethod.label\" :label=\"viewMethod.value\"\r\n                   :value=\"viewMethod.value\"/>\r\n      </el-select>\r\n\r\n      <div v-if=\"root === 1\" class=\"buttonView\">\r\n        <el-button type=\"danger\" :icon=\"Delete\" @click=\"handleDelete\" title=\"删除单元格内容\">删除</el-button>\r\n        <el-button :class=\"edit === '完成' ? 'button-choose' : null\" type=\"primary\" :icon=\"Edit\" @click=\"handleEdit\">{{\r\n            edit\r\n          }}\r\n        </el-button>\r\n        <el-button @click=\"confermessage\" v-if=\"week_day === 'week'\" type=\"success\" :icon=\"Postcard\">一键生成排班</el-button>\r\n\r\n\r\n        <el-button v-if=\"week_day === 'week'\" type=\"success\" :icon=\"Finished\" @click=\"updateSchedule\">保存排班\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <el-dialog v-model=\"getmessage\">\r\n      <el-form ref=\"returnForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n        <el-form-item style=\"float:right\">\r\n          <p><label>可排班人数：</label>\r\n            <span v-text=\"persons\" style=\"margin-right: 20px\"></span>\r\n          </p>\r\n        </el-form-item>\r\n        <el-form-item style=\"float:right;width: 350px\">\r\n          <p><label>建议排班人数：</label>\r\n            <el-input v-model=\"needpersons\" placeholder=\"18\" style=\"margin-top: 10px;width: 100px\"></el-input>\r\n          </p>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm(needpersons)\" style=\"float:right\">确定</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <div class=\"schedule\">\r\n      <weekDrag v-if=\"week_day === 'week'\" ref=\"weekDragRef\" :loading=\"loading\" :table=\"table\" :tableData=\"tableData\"\r\n                :viewValue=\"viewValue\" :week_day=\"week_day\" @emitTableData=\"(tableData1) => tableData = tableData1\"\r\n                @handleClickTd=\"(a, b) => handleClickTd(a, b)\" @message=\"(msg) => message(msg)\"\r\n                @showAddView=\"(a, b, c) => showAddView(a, b, c)\"/>\r\n\r\n      <dayDrag v-if=\"week_day === 'day'\" ref=\"dayDragRef\" :current=\"current\" :dayData=\"dayData\" :loading=\"loading\"\r\n               :viewValue=\"viewValue\" :week_day=\"week_day\" @emitDayData=\"(dayData1) => dayData = dayData1\"\r\n               @handleClickTd=\"(a, b) => handleClickTd(a, b)\" @message=\"(msg) => message(msg)\"\r\n               @showAddView=\"(a, b, c) => showAddView(a, b, c)\"/>\r\n    </div>\r\n\r\n    <el-dialog v-model=\"showDialog\" title=\"添加员工\" width=\"30%\" center draggable>\r\n      <el-form>\r\n        <el-form-item label=\"员工\">\r\n          <el-select v-model=\"employeeValue\" value-key=\"employeeId\" filterable>\r\n            <el-option v-for=\"employee in employeesAvail\" :key=\"employee.employeeId\"\r\n                       :label=\"employee.employeeName + '(' + employee.position + ')'\" :value=\"employee\"/>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"showDialog = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"addEmplyee\">\r\n            确定\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from 'vue';\r\nimport moment from \"moment\";\r\nimport {Delete, Edit, Finished, Postcard} from '@element-plus/icons-vue';\r\nimport {ElMessage, ElMessageBox} from 'element-plus';\r\nimport SlideSelection from '../components/SlideSelection.vue'\r\nimport WeekDrag from '../components/WeekDrag'\r\nimport DayDrag from '../components/DayDrag'\r\nimport {\r\n  autoSchedul,\r\n  deleteDaySchedule,\r\n  deleteScheduling,\r\n  getADaywork,\r\n  getAllEmployee,\r\n  getAllStore,\r\n  getAWeekwork,\r\n  getStorePersons,\r\n  getStuffDayWork,\r\n  getStuffWeekWork,\r\n  replaceDaySchedule,\r\n  updateWeekData\r\n} from '@/api';\r\n\r\n/**\r\n * 初始化获取数据库数据：stores、data、employees\r\n */\r\n// 门店切换\r\nconst stores = ref([]);\r\nconst storeValue = ref();\r\n\r\n//所有员工数据\r\nconst employees = ref([]);\r\nconst employeesAvail = ref([]);\r\n\r\n//表格单元格数据\r\nvar data = [];\r\nconst tableData = ref([]);\r\nconst dayData = ref([]);\r\nconst weekIndex = [0, 1, 1, 1, 1, 1, 0];\r\n\r\nlet persons = ref();\r\nconst needpersons = ref(18);\r\n\r\nconst getmessage = ref(false);\r\n\r\nconst submitForm = (needperson) => {\r\n  let monday = current.value.startOf('isoWeek').format('YYYY-MM-DD');\r\n  console.log(storeValue.value + \"   \" + needperson + \"   \" + monday)\r\n  autoSchedul(storeValue.value, needperson, monday).then((datas) => {\r\n    console.log(datas)\r\n  });\r\n}\r\n\r\nconst confermessage = () => {\r\n  console.log(\"店铺id\" + storeValue.value)\r\n  // console.log(\"我的测试点\"+getStorePersons(storeId.value))\r\n  getStorePersons(storeValue.value).then(({data}) => {\r\n    console.log(\"测试数据    \" + data)\r\n    persons.value = data;\r\n  })\r\n  getmessage.value = true;\r\n  console.log(\"猜猜我是谁\" + getmessage.value)\r\n}\r\n\r\n//登录用户ID和权限\r\nconst employee = sessionStorage.getItem(\"employee\")\r\nconsole.log(\"employee\" + employee)\r\nconst employeeId = JSON.parse(employee).employeeId;\r\nconst root = JSON.parse(employee).root;\r\n\r\n//初始化获取数据库\r\ngetAllStore().then((datas) => {\r\n  stores.value = datas.data;\r\n  storeValue.value = stores.value[0].storeId;\r\n\r\n  getAllEmployee(stores.value[0].storeId).then((datas) => {\r\n    employees.value = datas.data;\r\n    employeesAvail.value = [...employees.value];\r\n  });\r\n\r\n  console.log(root)\r\n  loading.value = true;\r\n  if (root === 1) {\r\n    getAWeekwork(moment().startOf('isoWeek').format('YYYY-MM-DD'), moment().endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value)\r\n        .then((datas) => {\r\n          data = datas.data;\r\n          var index = 0;\r\n          let tmp = data[0].map(function (col, i) {\r\n            return data.map(function (row) {\r\n              if (index === i) {\r\n                let dataRow = [];\r\n                dataRow.push(row[i][2]);\r\n                tableData.value.push(dataRow);\r\n                index++;\r\n              }\r\n              return row[i].slice(0, 2);\r\n            })\r\n          });\r\n          tableData.value = tableData.value.map((val, index) => {\r\n            let t = [...val];\r\n            t.push([...tmp[index]]);\r\n            return t;\r\n          })\r\n          console.log(tableData.value)\r\n          loading.value = false;\r\n        });\r\n\r\n    loading.value = true;\r\n    getADaywork(moment().format('YYYY-MM-DD'), weekIndex[moment().day()], storeValue.value)\r\n        .then((datas) => {\r\n          dayData.value = datas.data;\r\n          loading.value = false;\r\n        });\r\n  } else {\r\n    getStuffWeekWork(moment().startOf('isoWeek').format('YYYY-MM-DD'), moment().endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value, employeeId)\r\n        .then((datas) => {\r\n          data = datas.data;\r\n          var index = 0;\r\n          let tmp = data[0].map(function (col, i) {\r\n            return data.map(function (row) {\r\n              if (index === i) {\r\n                let dataRow = [];\r\n                dataRow.push(row[i][2]);\r\n                tableData.value.push(dataRow);\r\n                index++;\r\n              }\r\n              return row[i].slice(0, 2);\r\n            })\r\n          });\r\n          tableData.value = tableData.value.map((val, index) => {\r\n            let t = [...val];\r\n            t.push([...tmp[index]]);\r\n            return t;\r\n          })\r\n          console.log(tableData.value)\r\n          loading.value = false;\r\n        });\r\n\r\n    loading.value = true;\r\n    getStuffDayWork(moment().format('YYYY-MM-DD'), weekIndex[moment().day()], storeValue.value, employeeId)\r\n        .then((datas) => {\r\n          dayData.value = datas.data;\r\n          loading.value = false;\r\n        });\r\n  }\r\n});\r\n\r\n\r\n/**\r\n * 初始化本地变量\r\n */\r\n/* 固定变量 */\r\n//全部查看|按岗位分组|按员工分组\r\nconst viewMethods = [\r\n  {\r\n    label: 1,\r\n    value: '全部查看'\r\n  },\r\n  {\r\n    label: 2,\r\n    value: '按岗位分组'\r\n  },\r\n  {\r\n    label: 3,\r\n    value: '按员工分组'\r\n  }\r\n]\r\n\r\nconst slideRef = ref();\r\nconst weekDragRef = ref();\r\nconst dayDragRef = ref();\r\n\r\n/* 需修改变量 */\r\n//按周查看|按日查看 的切换\r\nconst week_day = ref('week');\r\n\r\n//全部查看|按岗位分组|按员工分组 的切换\r\nconst viewValue = ref(viewMethods[0].value);\r\n\r\nconst current = ref(moment());\r\nconst labels = ref([\r\n  '周一 ' + current.value.startOf('isoWeek').format('M月D日'),\r\n  '周二 ' + current.value.startOf('isoWeek').add(1, 'days').format('M月D日'),\r\n  '周三 ' + current.value.startOf('isoWeek').add(2, 'days').format('M月D日'),\r\n  '周四 ' + current.value.startOf('isoWeek').add(3, 'days').format('M月D日'),\r\n  '周五 ' + current.value.startOf('isoWeek').add(4, 'days').format('M月D日'),\r\n  '周六 ' + current.value.startOf('isoWeek').add(5, 'days').format('M月D日'),\r\n  '周日 ' + current.value.startOf('isoWeek').add(6, 'days').format('M月D日'),\r\n]);\r\n\r\n//被点击单元格的坐标s\r\nvar arrTd = [];\r\n\r\n//编辑button的文本切换\r\nconst edit = ref('编辑');\r\n\r\n//表格标签\r\nconst table = ref({\r\n  time: '时间',\r\n  week1: labels.value[0],\r\n  week2: labels.value[1],\r\n  week3: labels.value[2],\r\n  week4: labels.value[3],\r\n  week5: labels.value[4],\r\n  week6: labels.value[5],\r\n  week7: labels.value[6],\r\n});\r\n\r\n//加载数据\r\nconst loading = ref(true)\r\n\r\n//是否可拖拽drag，拖拽起点dragging，拖拽终点ending\r\nconst drag = ref(false);\r\nconst ending = ref(null);\r\nconst dragging = ref(null);\r\n\r\n//是否显示添加员工对话框\r\nconst showDialog = ref(false);\r\n//对话框里的员工下拉框\r\nconst employeeValue = ref('请选择要添加的员工');\r\n//已处于选中单元格中的员工s\r\nvar addIndex = null;\r\n\r\n\r\n/**\r\n * 函数\r\n */\r\n//修改门店\r\nconst changeStore = () => {\r\n  getStoreData();\r\n\r\n  //周切换\r\n  slideRef.value.initWeeks();\r\n\r\n  //日切换\r\n  slideRef.value.initDays();\r\n\r\n  initVariable();\r\n}\r\n\r\n//修改按周查看|按日查看\r\nconst chooseWorD = (button) => {\r\n  //获取数据库data、dayData\r\n  if (button === 'week' && week_day.value === 'day') {\r\n    week_day.value = 'week';\r\n\r\n    //周切换\r\n    slideRef.value.initWeeks();\r\n  } else if (button === 'day' && week_day.value === 'week') {\r\n    week_day.value = 'day';\r\n\r\n    //日切换\r\n    slideRef.value.initDays();\r\n  }\r\n\r\n  initVariable();\r\n}\r\n\r\n//点击多选单元格\r\nconst handleClickTd = (row, col) => {\r\n  var flag = 0;\r\n  var td = document.getElementById('td' + week_day.value + row + '-' + col);\r\n\r\n  arrTd.map((value, index) => {\r\n    if (value.toString() === [row, col].toString()) {\r\n      arrTd.splice(index, 1);\r\n      td.style.backgroundColor = '';\r\n      flag = 1;\r\n      return;\r\n    }\r\n  })\r\n  if (flag === 0) {\r\n    arrTd.push([row, col]);\r\n    td.style.backgroundColor = '#ffe0e0';\r\n  }\r\n\r\n  console.log(arrTd);\r\n}\r\n//点击删除button删除单元格内容\r\nconst handleDelete = () => {\r\n  if (edit.value === '完成') {\r\n    message('正处于编辑状态，不可删除');\r\n  } else if (arrTd.length === 0) {\r\n    message('请选择要删除内容的单元格');\r\n  } else {\r\n    ElMessageBox.confirm(\r\n        '单元格内容将永久被删除，确定吗?',\r\n        'Warning',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n        }\r\n    )\r\n        .then(() => {\r\n          if (week_day.value === 'week') {\r\n            var newData = [...tableData.value];\r\n            var deleteIds = [];\r\n            arrTd.map(value => {\r\n              console.log(tableData.value[value[0]][1][value[1]])\r\n              if (tableData.value[value[0]][1][value[1]][1] !== null)\r\n                deleteIds.push(tableData.value[value[0]][1][value[1]][1]);\r\n              newData[value[0]][1][value[1]][0] = [];\r\n              newData[value[0]][1][value[1]][1] = null;\r\n              let td = document.getElementById('td' + week_day.value + value[0] + '-' + value[1]);\r\n              // console.log(td)\r\n              td.style.backgroundColor = '';\r\n            })\r\n            tableData.value = [...newData];\r\n            deleteScheduling(deleteIds);\r\n          } else {\r\n            var newDayData = [...dayData.value];\r\n            var updateIndexs = [];\r\n            var updateEmployeeIds = \"\";\r\n            arrTd.map(value => {\r\n              if (JSON.stringify(newDayData[value[0]][0][value[1]]) !== '{}'\r\n                  && newDayData[value[0]][0][value[1]].employeeId !== null)\r\n                updateIndexs.push(value[0]);\r\n              newDayData[value[0]][0][value[1]] = {};\r\n              let td = document.getElementById('td' + week_day.value + value[0] + '-' + value[1]);\r\n              td.style.backgroundColor = '';\r\n            })\r\n            dayData.value = [...newDayData];\r\n\r\n            let items = [];\r\n            updateIndexs = [...new Set(updateIndexs)];\r\n            updateIndexs.map(value => {\r\n              let employeeIds = \"\";\r\n              newDayData[value][0].map(v => {\r\n                if (v.employeeId !== null && JSON.stringify(v) !== '{}' && employeeIds === \"\")\r\n                  employeeIds += v.employeeId;\r\n                else if (v.employeeId !== null && JSON.stringify(v) !== '{}')\r\n                  employeeIds += \",\" + v.employeeId;\r\n              });\r\n              let item = {};\r\n              item.index = value;\r\n              item.period = newDayData[value][1];\r\n              item.employeeIds = employeeIds;\r\n              items.push(item);\r\n            });\r\n            console.log(items)\r\n            deleteDaySchedule(items, current.value.format('YYYY-MM-DD'), storeValue.value);\r\n          }\r\n\r\n          arrTd.splice(0, arrTd.length);\r\n\r\n          ElMessage({\r\n            type: 'success',\r\n            message: '删除成功',\r\n          })\r\n        })\r\n        .catch(() => {\r\n          ElMessage({\r\n            type: 'info',\r\n            message: '取消删除',\r\n          })\r\n        })\r\n  }\r\n}\r\n//点击编辑|完成\r\nconst handleEdit = () => {\r\n  if (edit.value === '编辑') {\r\n    var tds = document.querySelectorAll('td');\r\n    for (var i = 1; i < tds.length; i++) {\r\n      if (tds[i].id !== 'td-time')\r\n        tds[i].style.backgroundColor = '';\r\n    }\r\n  } else {\r\n    if (week_day.value === 'week') {\r\n      updateSchedule();\r\n    } else {\r\n      let items = [];\r\n      dayData.value.map((value, index) => {\r\n        let item = {};\r\n        item.period = value[1];\r\n        let employeeIds = \"\";\r\n        let flag = 0;\r\n        value[0].map(v => {\r\n          if (JSON.stringify(v) !== '{}' && v.employeeId !== null && flag === 0) {\r\n            employeeIds += v.employeeId;\r\n            flag = 1;\r\n          } else if (JSON.stringify(v) !== '{}' && v.employeeId !== null)\r\n            employeeIds += \",\" + v.employeeId;\r\n        });\r\n        item.employeeIds = employeeIds;\r\n        items.push(item);\r\n      });\r\n      console.log(items);\r\n      replaceDaySchedule(items, storeValue.value, current.value.format('YYYY-MM-DD'));\r\n    }\r\n  }\r\n\r\n  if (week_day.value === 'week')\r\n    weekDragRef.value.weekEdit();\r\n  else\r\n    dayDragRef.value.dayEdit();\r\n\r\n  edit.value = (edit.value === '编辑' ? '完成' : '编辑');\r\n}\r\n\r\n//更新数据库排班数据\r\nconst updateSchedule = () => {\r\n  let items = [];\r\n  tableData.value.forEach(row => {\r\n    row[1].forEach((col, i) => {\r\n      let item = {};\r\n\r\n      if (col[1] != null) item.id = col[1];\r\n      else item.id = null;\r\n\r\n      let employeeIds = \"\";\r\n      if (col[0] != null) {\r\n        col[0].forEach((stuff, index) => {\r\n          if (index === 0) employeeIds += stuff.employeeId;\r\n          else employeeIds += \",\" + stuff.employeeId;\r\n        })\r\n      }\r\n      item.employeeIds = employeeIds;\r\n\r\n      if (item.id != null || employeeIds != \"\") {\r\n        console.log(row[0])\r\n        item.period = row[0];\r\n        item.day = current.value.startOf('W').add(i, 'days').format(\"YYYY-MM-DD\");\r\n\r\n        console.log(item);\r\n        items.push(JSON.stringify(item));\r\n      }\r\n    })\r\n  })\r\n\r\n  updateWeekData(items, storeValue.value);\r\n}\r\n\r\nconst dragInit = () => {\r\n  if (week_day.value === 'week')\r\n    weekDragRef.value.initDrag();\r\n  else\r\n    dayDragRef.value.initDrag();\r\n}\r\n\r\n//显示添加员工对话框、添加员工\r\nconst showAddView = (added, index1, index2) => {\r\n  console.log(added, index1, index2)\r\n  employeeValue.value = '请选择要添加的员工';\r\n  addIndex = [index1, index2];\r\n\r\n  var newEAvil = [...employees.value];\r\n  if (week_day.value === 'week') {\r\n    newEAvil = newEAvil.filter(item => {\r\n      var isInclude = false;\r\n\r\n      added.map((value) => {\r\n        if (value.employeeId === item.employeeId) {\r\n          isInclude = true;\r\n          return;\r\n        }\r\n      })\r\n      // console.log(isInclude);\r\n      return !isInclude;\r\n    });\r\n  } else {\r\n    newEAvil = newEAvil.filter(item => {\r\n      var isInclude = false;\r\n\r\n      console.log(dayData.value[index1])\r\n      dayData.value[index1].map(value => {\r\n        console.log(value)\r\n        if (JSON.stringify(value) !== '{}' && value.employeeId !== null) {\r\n          if (value.employeeId === item.employeeId) {\r\n            isInclude = true;\r\n            return;\r\n          }\r\n        }\r\n      });\r\n      // console.log(isInclude);\r\n      return !isInclude;\r\n    });\r\n  }\r\n  employeesAvail.value = [...newEAvil];\r\n  console.log(employeesAvail)\r\n\r\n  showDialog.value = true;\r\n}\r\nconst addEmplyee = () => {\r\n  if (employeeValue.value === '请选择要添加的员工') {\r\n    message(\"请选择要添加的员工\");\r\n  } else {\r\n    if (week_day.value === 'week') {\r\n      let newData = [...tableData.value];\r\n      newData[addIndex[0]][1][addIndex[1]][0].push(employeeValue.value);\r\n      tableData.value = [...newData];\r\n    } else {\r\n      let newData = [...dayData.value];\r\n      newData[addIndex[0]][1][addIndex[1]] = employeeValue.value;\r\n      dayData.value = [...newData];\r\n    }\r\n  }\r\n\r\n  showDialog.value = false;\r\n}\r\n\r\n//工具类\r\nconst message = (str) => {\r\n  return (\r\n      ElMessage({\r\n        showClose: true,\r\n        message: str,\r\n        type: 'warning',\r\n        grouping: true\r\n      })\r\n  );\r\n}\r\nconst initVariable = () => {\r\n  //全部查看|按岗位分组|按员工分组 的切换\r\n  viewValue.value = viewMethods[0].value;\r\n\r\n  //被点击单元格的坐标s\r\n  arrTd = [];\r\n\r\n  //编辑button的文本切换\r\n  edit.value = '编辑';\r\n\r\n  //是否可拖拽drag，拖拽起点dragging，拖拽终点ending\r\n  drag.value = false;\r\n  ending.value = null;\r\n  dragging.value = null;\r\n\r\n  //是否显示添加员工对话框\r\n  showDialog.value = false;\r\n  //对话框里的员工下拉框\r\n  employeeValue.value = '请选择要添加的员工';\r\n  //已处于选中单元格中的员工s\r\n  addIndex = null;\r\n\r\n  var tds = document.querySelectorAll('td');\r\n  for (var i = 1; i < tds.length; i++) {\r\n    if (tds[i].id !== 'td-time')\r\n      tds[i].style.backgroundColor = '';\r\n  }\r\n}\r\nconst updateTableData = () => {\r\n  loading.value = true;\r\n  tableData.value = [];\r\n  if (root === 1) {\r\n    getAWeekwork(current.value.startOf('isoWeek').format('YYYY-MM-DD'), current.value.endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value)\r\n        .then((datas) => {\r\n          data = datas.data;\r\n          var index = 0;\r\n          let tmp = data[0].map(function (col, i) {\r\n            return data.map(function (row) {\r\n              if (index === i) {\r\n                let dataRow = [];\r\n                dataRow.push(row[i][2]);\r\n                tableData.value.push(dataRow);\r\n                index++;\r\n              }\r\n              return row[i].slice(0, 2);\r\n            })\r\n          });\r\n          tableData.value = tableData.value.map((val, index) => {\r\n            let t = [...val];\r\n            t.push([...tmp[index]]);\r\n            return t;\r\n          })\r\n          console.log(tableData.value)\r\n          loading.value = false;\r\n        });\r\n  } else {\r\n    getStuffWeekWork(current.value.startOf('isoWeek').format('YYYY-MM-DD'), current.value.endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value, employeeId)\r\n        .then((datas) => {\r\n          data = datas.data;\r\n          var index = 0;\r\n          let tmp = data[0].map(function (col, i) {\r\n            return data.map(function (row) {\r\n              if (index === i) {\r\n                let dataRow = [];\r\n                dataRow.push(row[i][2]);\r\n                tableData.value.push(dataRow);\r\n                index++;\r\n              }\r\n              return row[i].slice(0, 2);\r\n            })\r\n          });\r\n          tableData.value = tableData.value.map((val, index) => {\r\n            let t = [...val];\r\n            t.push([...tmp[index]]);\r\n            return t;\r\n          })\r\n          console.log(tableData.value)\r\n          loading.value = false;\r\n        });\r\n  }\r\n}\r\nconst updateDayDate = () => {\r\n  loading.value = true;\r\n  if (root === 1) {\r\n    getADaywork(current.value.format('YYYY-MM-DD'), weekIndex[current.value.day()], storeValue.value)\r\n        .then((datas) => {\r\n          dayData.value = datas.data;\r\n          loading.value = false;\r\n        });\r\n  } else {\r\n    console.log(\"this\")\r\n    loading.value = true;\r\n    getStuffDayWork(current.value.format('YYYY-MM-DD'), weekIndex[moment().day()], storeValue.value, employeeId)\r\n        .then((datas) => {\r\n          console.log(datas.data)\r\n          dayData.value = datas.data;\r\n          loading.value = false;\r\n        });\r\n  }\r\n}\r\nconst getStoreData = () => {\r\n  console.log(storeValue.value)\r\n\r\n  getAllEmployee(stores.value[0].storeId).then((datas) => {\r\n    employees.value = datas.data;\r\n    employeesAvail.value = [...employees.value];\r\n  });\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  background-color: #fff;\r\n  border-radius: 15px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 20px;\r\n  overflow: hidden;\r\n\r\n  .store {\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    border-radius: 10px;\r\n    display: flex;\r\n    align-self: center;\r\n  }\r\n\r\n  .time {\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .view-options {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n\r\n    .view {\r\n      background-color: hsl(0, 0%, 89%);\r\n      padding: 5px;\r\n      border-radius: 5px;\r\n\r\n      .el-button {\r\n        border: none;\r\n        padding: 10px 30px;\r\n      }\r\n\r\n      .view-choose {\r\n        background-color: #fff;\r\n        color: #0a85ff;\r\n      }\r\n\r\n      .view-notchoose {\r\n        background-color: #e3e3e3;\r\n        color: #000;\r\n      }\r\n\r\n      .view-notchoose:hover {\r\n        background-color: #fff;\r\n        color: #000;\r\n      }\r\n    }\r\n  }\r\n\r\n  .view-button {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n\r\n    .button-choose {\r\n      background-color: #409EFF;\r\n      color: #fff;\r\n    }\r\n\r\n    .button-choose:hover {\r\n      background-color: #fff;\r\n      color: #0a85ff;\r\n    }\r\n  }\r\n\r\n  .schedule {\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n\r\n  .el-form {\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}