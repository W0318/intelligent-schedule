{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ElMessage, ElMessageBox } from \"element-plus\";\nimport { getAllStore, getStoreByStoreName, getStoreByStoreType, getStoreByStore, updateStoreStateOne, updateStoreStateZero, deleteStore, deleteRuleByStoreId, deleteSchedulingByStoreId, deleteEmployeeStateByStoreId, updateStore } from \"@/api\";\nexport default {\n  inject: [\"reload\"],\n  data() {\n    return {\n      inputStoreName: \"\",\n      value: \"\",\n      //类型下拉框\n      useRange: [{\n        value: \"全部\",\n        label: \"全部\"\n      }, {\n        value: \"总公司\",\n        label: \"总公司\"\n      }, {\n        value: \"分公司\",\n        label: \"分公司\"\n      }, {\n        value: \"部门\",\n        label: \"部门\"\n      }],\n      //列表数据\n      tableData: [],\n      tableDatas: {\n        storeId: \"\",\n        storeName: \"\",\n        storeType: \"\",\n        address: \"\",\n        size: \"\",\n        manger: \"\",\n        workers: \"\",\n        state: \"\"\n      },\n      //编辑弹窗\n      formData: {\n        field100: \"\",\n        field101: \"\",\n        field102: \"\",\n        field103: \"\",\n        field104: \"\",\n        field105: \"\",\n        field106: \"\"\n        // field108: \"\",\n      },\n\n      rules: {\n        field100: [{\n          required: true,\n          message: \"请输入门店编号\",\n          trigger: \"blur\"\n        }],\n        field101: [{\n          required: true,\n          message: \"请输入门店名称\",\n          trigger: \"blur\"\n        }],\n        field102: [{\n          required: true,\n          message: \"请选择门店类型\",\n          trigger: \"change\"\n        }],\n        field103: [{\n          required: true,\n          message: \"请输入门店人数\",\n          trigger: \"blur\"\n        }],\n        field104: [{\n          required: true,\n          message: \"请输入门店面积\",\n          trigger: \"blur\"\n        }],\n        field105: [{\n          required: true,\n          message: \"请输入门店地址\",\n          trigger: \"blur\"\n        }],\n        field106: [{\n          required: true,\n          message: \"请输入门店管理员\",\n          trigger: \"blur\"\n        }]\n        // field108: [\n        //   {\n        //     required: true,\n        //     message: \"请选择状态\",\n        //     trigger: \"change\",\n        //   },\n        // ],\n      },\n\n      field102Options: [{\n        label: \"总公司\",\n        value: \"总公司\"\n      }, {\n        label: \"分公司\",\n        value: \"分公司\"\n      }, {\n        label: \"部门\",\n        value: \"部门\"\n      }],\n      dialogUpdateVisible: false\n    };\n  },\n  methods: {\n    //跳转到添加门店页\n    addStore() {\n      this.$router.push({\n        name: \"addStore\"\n      });\n    },\n    //点击编辑button编辑门店\n    handleEdit(row) {\n      this.dialogUpdateVisible = true;\n      this.formData.field100 = row.storeId;\n      this.formData.field101 = row.storeName;\n      this.formData.field102 = row.storeType;\n      this.formData.field105 = row.address;\n      this.formData.field104 = row.size;\n      this.formData.field106 = row.manger;\n      this.formData.field103 = row.workers;\n    },\n    //点击确认编辑button确认编辑门店\n    async handelUpdate() {\n      await updateStore(this.formData.field100, this.formData.field101, this.formData.field102, this.formData.field105, this.formData.field104, this.formData.field106, this.formData.field103);\n      this.dialogUpdateVisible = false;\n      await this.reload();\n      ElMessage({\n        type: \"success\",\n        message: \"编辑门店成功\"\n      });\n    },\n    //点击删除button删除门店\n    handleDelete(row) {\n      console.log(row.storeId);\n      ElMessageBox.confirm(\"该门店将永久被删除，确定吗?\", \"Warning\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(async () => {\n        deleteEmployeeStateByStoreId(row.storeId);\n        deleteSchedulingByStoreId(row.storeId);\n        deleteRuleByStoreId(row.storeId);\n        deleteStore(row.storeId);\n        await this.reload();\n        ElMessage({\n          type: \"success\",\n          message: \"删除门店成功\"\n        });\n      });\n    },\n    //点击启用button启用门店\n    handleEnable(row) {\n      console.log(row.storeId);\n      ElMessageBox.confirm(\"该门店将被启用，确定吗?\", \"Warning\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(async () => {\n        updateStoreStateZero(row.storeId);\n        await this.reload();\n        ElMessage({\n          type: \"success\",\n          message: \"启用门店成功\"\n        });\n      });\n    },\n    //点击停用button停用门店\n    handleDeactivate(row) {\n      console.log(row.storeId);\n      ElMessageBox.confirm(\"该门店将被停用，确定吗?\", \"Warning\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(async () => {\n        updateStoreStateOne(row.storeId);\n        await this.reload();\n        ElMessage({\n          type: \"success\",\n          message: \"停用门店成功\"\n        });\n      });\n    },\n    // 查询门店\n    getStore() {\n      if (this.value == \"全部\") {\n        if (this.inputStoreName == \"\") {\n          getAllStore().then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        } else if (this.inputStoreName != \"\") {\n          getStoreByStoreName(this.inputStoreName).then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        }\n      } else {\n        if (this.inputStoreName == \"\" && this.value == \"\") {\n          getAllStore().then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        } else if (this.value == \"\" && this.inputStoreName != \"\") {\n          getStoreByStoreName(this.inputStoreName).then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        } else if (this.inputStoreName == \"\" && this.value != \"\") {\n          getStoreByStoreType(this.value).then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        } else {\n          getStoreByStore(this.inputStoreName, this.value).then(datas => {\n            this.tableData = datas.data;\n            console.log(this.value);\n            console.log(datas.data);\n          });\n        }\n      }\n    },\n    // 重置门店\n    resetTextAndSelect() {\n      this.value = \"\";\n      this.inputStoreName = \"\";\n    }\n  },\n  mounted() {\n    // 获取所有门店信息\n    getAllStore().then(datas => {\n      this.tableData = datas.data;\n      console.log(datas.data);\n    });\n  }\n};","map":{"version":3,"mappings":"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","names":["ElMessage","ElMessageBox","getAllStore","getStoreByStoreName","getStoreByStoreType","getStoreByStore","updateStoreStateOne","updateStoreStateZero","deleteStore","deleteRuleByStoreId","deleteSchedulingByStoreId","deleteEmployeeStateByStoreId","updateStore","inject","data","inputStoreName","value","useRange","label","tableData","tableDatas","storeId","storeName","storeType","address","size","manger","workers","state","formData","field100","field101","field102","field103","field104","field105","field106","rules","required","message","trigger","field102Options","dialogUpdateVisible","methods","addStore","$router","push","name","handleEdit","row","handelUpdate","reload","type","handleDelete","console","log","confirm","confirmButtonText","cancelButtonText","then","handleEnable","handleDeactivate","getStore","datas","resetTextAndSelect","mounted"],"sourceRoot":"","sources":["C:\\Users\\z'k\\Desktop\\schedule\\intelligent-schedule\\src\\views\\StoreManagement\\MyStore.vue"],"sourcesContent":["<template>\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <el-header>\r\n        <el-card class=\"right-header\">\r\n          <el-form>\r\n            <el-row :gutter=\"30\">\r\n              <el-col :span=\"6\">\r\n                <el-form-item label=\"门店名称：\">\r\n                  <el-input\r\n                    v-model=\"inputStoreName\"\r\n                    placeholder=\"请输入门店名称\"\r\n                  ></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"类型：\">\r\n                  <el-cascader\r\n                    v-model=\"value\"\r\n                    :options=\"useRange\"\r\n                    :props=\"{ expandTrigger: 'hover' }\"\r\n                    @change=\"handleChange\"\r\n                  ></el-cascader>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"10\">\r\n                <el-form-item class=\"form-btn\">\r\n                  <el-button @click=\"getStore\" type=\"primary\">查询</el-button>\r\n                  <el-button @click=\"resetTextAndSelect\">重置</el-button>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </el-form>\r\n        </el-card>\r\n      </el-header>\r\n      <el-main>\r\n        <el-card class=\"main-card\">\r\n          <!-- 按钮区域 -->\r\n          <div class=\"btns\">\r\n            <div class=\"left-btn\">\r\n              <el-button plain type=\"primary\" @click=\"addStore\"\r\n                >新建门店</el-button\r\n              >\r\n            </div>\r\n          </div>\r\n          <!-- 列表区域 -->\r\n          <el-table :data=\"tableData\" style=\"width: 100%\" border stripe>\r\n            <el-table-column\r\n              label=\"序号\"\r\n              prop=\"storeId\"\r\n              width=\"100%\"\r\n              align=\"center\"\r\n            />\r\n            <el-table-column\r\n              prop=\"storeName\"\r\n              label=\"门店名称\"\r\n              width=\"200%\"\r\n              align=\"center\"\r\n            />\r\n            <el-table-column\r\n              prop=\"storeType\"\r\n              label=\"类型\"\r\n              width=\"120%\"\r\n              align=\"center\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"address\"\r\n              label=\"地址\"\r\n              width=\"200%\"\r\n              align=\"center\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"size\"\r\n              label=\"面积(m²)\"\r\n              width=\"150%\"\r\n              align=\"center\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"manger\"\r\n              label=\"管理员\"\r\n              width=\"100%\"\r\n              align=\"center\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"workers\"\r\n              label=\"人数\"\r\n              width=\"100%\"\r\n              align=\"center\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n              prop=\"state\"\r\n              label=\"状态\"\r\n              width=\"100%\"\r\n              align=\"center\"\r\n            >\r\n              <template v-slot=\"scope\">\r\n                <el-tag type=\"success\" v-if=\"scope.row.state === 1\"\r\n                  >已启用</el-tag\r\n                >\r\n                <el-tag type=\"danger\" v-else>已停用</el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              fixed=\"right\"\r\n              label=\"操作\"\r\n              width=\"220%\"\r\n              align=\"center\"\r\n            >\r\n              <template v-slot=\"scope\">\r\n                <el-link\r\n                  type=\"primary\"\r\n                  :icon=\"Edit\"\r\n                  @click=\"handleEdit(scope.row)\"\r\n                  title=\"编辑门店内容\"\r\n                  >编辑</el-link\r\n                >\r\n                <el-link\r\n                  type=\"primary\"\r\n                  :icon=\"Delete\"\r\n                  @click=\"handleDelete(scope.row)\"\r\n                  title=\"删除门店内容\"\r\n                  >删除</el-link\r\n                >\r\n                <el-link\r\n                  type=\"primary\"\r\n                  :icon=\"Enable\"\r\n                  @click=\"handleEnable(scope.row)\"\r\n                  title=\"启用门店内容\"\r\n                  v-if=\"scope.row.state === 0\"\r\n                  >启用</el-link\r\n                >\r\n                <el-link\r\n                  type=\"primary\"\r\n                  :icon=\"Deactivate\"\r\n                  @click=\"handleDeactivate(scope.row)\"\r\n                  title=\"停用门店内容\"\r\n                  v-else\r\n                  >停用</el-link\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n      </el-main>\r\n    </el-container>\r\n\r\n    <!-- 编辑弹窗 -->\r\n    <el-dialog title=\"编辑\" v-model=\"dialogUpdateVisible\">\r\n      <el-row :gutter=\"15\">\r\n        <el-form\r\n          ref=\"elForm\"\r\n          :model=\"formData\"\r\n          :rules=\"rules\"\r\n          size=\"medium\"\r\n          label-width=\"100px\"\r\n        >\r\n          <el-col :span=\"100\">\r\n            <el-form-item label=\"门店序号\" prop=\"field100\">\r\n              <el-input\r\n                v-model=\"formData.field100\"\r\n                disabled\r\n                placeholder=\"请输入门店序号\"\r\n                clearable\r\n                style=\"width: 450px\"\r\n              >\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"100\">\r\n            <el-form-item label=\"门店名称\" prop=\"field101\">\r\n              <el-input\r\n                v-model=\"formData.field101\"\r\n                placeholder=\"请输入门店名称\"\r\n                clearable\r\n                style=\"width: 450px\"\r\n              >\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"100\">\r\n            <el-form-item label=\"门店类型\" prop=\"field102\">\r\n              <el-select\r\n                v-model=\"formData.field102\"\r\n                placeholder=\"请选择门店类型\"\r\n                clearable\r\n                style=\"width: 400px\"\r\n              >\r\n                <el-option\r\n                  v-for=\"(item, storeId) in field102Options\"\r\n                  :key=\"storeId\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                  :disabled=\"item.disabled\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"100\">\r\n            <el-form-item label=\"门店地址\" prop=\"field105\">\r\n              <el-input\r\n                v-model=\"formData.field105\"\r\n                type=\"textarea\"\r\n                placeholder=\"请输入门店地址\"\r\n                :autosize=\"{ minRows: 2, maxRows: 2 }\"\r\n                style=\"width: 450px\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"100\">\r\n            <el-form-item label=\"门店面积\" prop=\"field104\">\r\n              <el-input\r\n                v-model=\"formData.field104\"\r\n                placeholder=\"请输入门店面积\"\r\n                clearable\r\n                style=\"width: 450px\"\r\n              >\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"100\">\r\n            <el-form-item label=\"门店人数\" prop=\"field103\">\r\n              <el-input\r\n                v-model=\"formData.field103\"\r\n                placeholder=\"请输入门店人数\"\r\n                clearable\r\n                style=\"width: 450px\"\r\n              >\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"100\">\r\n            <el-form-item label=\"管理员\" prop=\"field106\">\r\n              <el-input\r\n                v-model=\"formData.field106\"\r\n                placeholder=\"请输入门店管理员\"\r\n                clearable\r\n                style=\"width: 450px\"\r\n              >\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <!-- <el-col :span=\"100\">\r\n            <el-form-item label=\"状态\" prop=\"field108\">\r\n              <el-select\r\n                v-model=\"formData.field108\"\r\n                placeholder=\"请选择状态\"\r\n                clearable\r\n                style=\"width: 400px\"\r\n              >\r\n                <el-option\r\n                  v-for=\"(item, storeId) in field108Options\"\r\n                  :key=\"storeId\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                  :disabled=\"item.disabled\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col> -->\r\n        </el-form>\r\n      </el-row>\r\n      <template v-slot:footer>\r\n        <el-button @click=\"dialogUpdateVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"handelUpdate\">确定</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\n\r\nimport {\r\n  getAllStore,\r\n  getStoreByStoreName,\r\n  getStoreByStoreType,\r\n  getStoreByStore,\r\n  updateStoreStateOne,\r\n  updateStoreStateZero,\r\n  deleteStore,\r\n  deleteRuleByStoreId,\r\n  deleteSchedulingByStoreId,\r\n  deleteEmployeeStateByStoreId,\r\n  updateStore,\r\n} from \"@/api\";\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      inputStoreName: \"\",\r\n      value: \"\",\r\n      //类型下拉框\r\n      useRange: [\r\n        {\r\n          value: \"全部\",\r\n          label: \"全部\",\r\n        },\r\n        {\r\n          value: \"总公司\",\r\n          label: \"总公司\",\r\n        },\r\n        {\r\n          value: \"分公司\",\r\n          label: \"分公司\",\r\n        },\r\n        {\r\n          value: \"部门\",\r\n          label: \"部门\",\r\n        },\r\n      ],\r\n      //列表数据\r\n      tableData: [],\r\n      tableDatas: {\r\n        storeId: \"\",\r\n        storeName: \"\",\r\n        storeType: \"\",\r\n        address: \"\",\r\n        size: \"\",\r\n        manger: \"\",\r\n        workers: \"\",\r\n        state: \"\",\r\n      },\r\n      //编辑弹窗\r\n      formData: {\r\n        field100: \"\",\r\n        field101: \"\",\r\n        field102: \"\",\r\n        field103: \"\",\r\n        field104: \"\",\r\n        field105: \"\",\r\n        field106: \"\",\r\n        // field108: \"\",\r\n      },\r\n      rules: {\r\n        field100: [\r\n          {\r\n            required: true,\r\n            message: \"请输入门店编号\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field101: [\r\n          {\r\n            required: true,\r\n            message: \"请输入门店名称\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field102: [\r\n          {\r\n            required: true,\r\n            message: \"请选择门店类型\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        field103: [\r\n          {\r\n            required: true,\r\n            message: \"请输入门店人数\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field104: [\r\n          {\r\n            required: true,\r\n            message: \"请输入门店面积\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field105: [\r\n          {\r\n            required: true,\r\n            message: \"请输入门店地址\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field106: [\r\n          {\r\n            required: true,\r\n            message: \"请输入门店管理员\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        // field108: [\r\n        //   {\r\n        //     required: true,\r\n        //     message: \"请选择状态\",\r\n        //     trigger: \"change\",\r\n        //   },\r\n        // ],\r\n      },\r\n      field102Options: [\r\n        {\r\n          label: \"总公司\",\r\n          value: \"总公司\",\r\n        },\r\n        {\r\n          label: \"分公司\",\r\n          value: \"分公司\",\r\n        },\r\n        {\r\n          label: \"部门\",\r\n          value: \"部门\",\r\n        },\r\n      ],\r\n      dialogUpdateVisible: false,\r\n    };\r\n  },\r\n  methods: {\r\n    //跳转到添加门店页\r\n    addStore() {\r\n      this.$router.push({ name: \"addStore\" });\r\n    },\r\n    //点击编辑button编辑门店\r\n    handleEdit(row) {\r\n      this.dialogUpdateVisible = true;\r\n      this.formData.field100 = row.storeId;\r\n      this.formData.field101 = row.storeName;\r\n      this.formData.field102 = row.storeType;\r\n      this.formData.field105 = row.address;\r\n      this.formData.field104 = row.size;\r\n      this.formData.field106 = row.manger;\r\n      this.formData.field103 = row.workers;\r\n    },\r\n    //点击确认编辑button确认编辑门店\r\n    async handelUpdate() {\r\n      await updateStore(\r\n        this.formData.field100,\r\n        this.formData.field101,\r\n        this.formData.field102,\r\n        this.formData.field105,\r\n        this.formData.field104,\r\n        this.formData.field106,\r\n        this.formData.field103\r\n      );\r\n      this.dialogUpdateVisible = false;\r\n      await this.reload();\r\n      ElMessage({\r\n        type: \"success\",\r\n        message: \"编辑门店成功\",\r\n      });\r\n    },\r\n    //点击删除button删除门店\r\n    handleDelete(row) {\r\n      console.log(row.storeId);\r\n      ElMessageBox.confirm(\"该门店将永久被删除，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        deleteEmployeeStateByStoreId(row.storeId);\r\n        deleteSchedulingByStoreId(row.storeId);\r\n        deleteRuleByStoreId(row.storeId);\r\n        deleteStore(row.storeId);\r\n        await this.reload();\r\n        ElMessage({\r\n          type: \"success\",\r\n          message: \"删除门店成功\",\r\n        });\r\n      });\r\n    },\r\n    //点击启用button启用门店\r\n    handleEnable(row) {\r\n      console.log(row.storeId);\r\n      ElMessageBox.confirm(\"该门店将被启用，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        updateStoreStateZero(row.storeId);\r\n        await this.reload();\r\n        ElMessage({\r\n          type: \"success\",\r\n          message: \"启用门店成功\",\r\n        });\r\n      });\r\n    },\r\n    //点击停用button停用门店\r\n    handleDeactivate(row) {\r\n      console.log(row.storeId);\r\n      ElMessageBox.confirm(\"该门店将被停用，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        updateStoreStateOne(row.storeId);\r\n        await this.reload();\r\n        ElMessage({\r\n          type: \"success\",\r\n          message: \"停用门店成功\",\r\n        });\r\n      });\r\n    },\r\n\r\n    // 查询门店\r\n    getStore() {\r\n      if (this.value == \"全部\") {\r\n        if (this.inputStoreName == \"\") {\r\n          getAllStore().then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        } else if (this.inputStoreName != \"\") {\r\n          getStoreByStoreName(this.inputStoreName).then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        }\r\n      } else {\r\n        if (this.inputStoreName == \"\" && this.value == \"\") {\r\n          getAllStore().then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        } else if (this.value == \"\" && this.inputStoreName != \"\") {\r\n          getStoreByStoreName(this.inputStoreName).then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        } else if (this.inputStoreName == \"\" && this.value != \"\") {\r\n          getStoreByStoreType(this.value).then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        } else {\r\n          getStoreByStore(this.inputStoreName, this.value).then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(this.value);\r\n            console.log(datas.data);\r\n          });\r\n        }\r\n      }\r\n    },\r\n\r\n    // 重置门店\r\n    resetTextAndSelect() {\r\n      this.value = \"\";\r\n      this.inputStoreName = \"\";\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    // 获取所有门店信息\r\n    getAllStore().then((datas) => {\r\n      this.tableData = datas.data;\r\n      console.log(datas.data);\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-main {\r\n  padding: 0;\r\n  margin-left: 20px;\r\n  margin-top: 20px;\r\n  width: 97%;\r\n}\r\n.el-header {\r\n  padding: 0;\r\n  width: 97%;\r\n}\r\n\r\n.right-header {\r\n  margin-left: 20px;\r\n  width: 100%;\r\n  justify-content: space-around;\r\n  height: 70px;\r\n  padding: 0;\r\n}\r\n\r\n.btns {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.el-table {\r\n  margin-top: 20px;\r\n  height: 425px;\r\n}\r\n.el-link {\r\n  margin-left: 10px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}