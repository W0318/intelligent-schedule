{"ast":null,"code":"import { ref } from \"vue\";\nimport { ElMessage, ElMessageBox } from \"element-plus\";\nimport { getPreferenceHaveOne, getPreferenceHaveTwo, getPreferenceHaveThree, getAllStore, getEmployeeStoreName, updateEmployee, insertPreferenceHaveOne, updatePreferenceHaveOne, deletePreferenceHaveOne, insertPreferenceHaveThree, updatePreferenceHaveThree, deletePreferenceHaveThree, insertPreferenceHaveTwo, updatePreferenceHaveTwo, deletePreferenceHaveTwo } from \"@/api\";\nexport default {\n  data() {\n    return {\n      employeeId: \"\",\n      employeeName: \"\",\n      storeName: \"\",\n      position: \"\",\n      email: \"\",\n      phone: \"\",\n      one: \"工作日偏好:\\u2003\",\n      two: \"工作时间偏好:\\u2003\",\n      three: \"周工作时长偏好:\\u2003\",\n      four: \"日工作时长偏好:\\u2003\",\n      value3: ref([]),\n      a: \"\",\n      likeDay: [],\n      likeTime: [],\n      dayAndWeek: \"\",\n      fullTime: \"\",\n      startTime: \"\",\n      endTime: \"\",\n      startTime1: \"\",\n      endTime1: \"\",\n      field106Options: [],\n      formData: {\n        field101: \"\",\n        //员工姓名\n        field102: \"\",\n        //员工编号\n        field103: \"\",\n        //岗位\n        field105: \"\",\n        //员工电话\n        field106: {},\n        //所属门店\n        field107: \"\",\n        //员工电邮\n        field108: \"\",\n        //周工作时长\n        field109: \"\" //日工作时长\n      },\n\n      rules: {\n        field101: [{\n          required: true,\n          message: \"请输入员工姓名：\",\n          trigger: \"blur\"\n        }],\n        field102: [{\n          required: true,\n          message: \"请输入员工编号\",\n          trigger: \"blur\"\n        }],\n        field103: [{\n          required: true,\n          message: \"请输入岗位\",\n          trigger: \"change\"\n        }],\n        field105: [{\n          required: true,\n          message: \"请输入员工电话\",\n          trigger: \"blur\"\n        }],\n        field106: [{\n          required: true,\n          message: \"请选择所属门店\",\n          trigger: \"change\"\n        }],\n        field107: [{\n          required: true,\n          message: \"请输入员工电邮\",\n          trigger: \"blur\"\n        }]\n      },\n      options: [{\n        value: \"1\",\n        label: \"星期一\"\n      }, {\n        value: \"2\",\n        label: \"星期二\"\n      }, {\n        value: \"3\",\n        label: \"星期三\"\n      }, {\n        value: \"4\",\n        label: \"星期四\"\n      }, {\n        value: \"5\",\n        label: \"星期五\"\n      }, {\n        value: \"6\",\n        label: \"星期六\"\n      }, {\n        value: \"7\",\n        label: \"星期日\"\n      }],\n      dialogUpdateVisible: false\n    };\n  },\n  mounted() {\n    this.employeeId = \"员工编号:\\u2003\" + JSON.parse(sessionStorage.getItem(\"employee\")).employeeId;\n    this.employeeName = \"员工姓名:\\u2003\" + JSON.parse(sessionStorage.getItem(\"employee\")).employeeName;\n    this.storeName = \"所属门店:\\u2003\" + JSON.parse(sessionStorage.getItem(\"employee\")).employeeName;\n    this.position = \"岗位:\\u2003\" + JSON.parse(sessionStorage.getItem(\"employee\")).position;\n    this.email = \"邮箱:\\u2003\" + JSON.parse(sessionStorage.getItem(\"employee\")).email;\n    this.phone = \"联系电话:\\u2003\" + JSON.parse(sessionStorage.getItem(\"employee\")).phone;\n    getPreferenceHaveOne(JSON.parse(sessionStorage.getItem(\"employee\")).employeeId).then(datas => {\n      if (datas.data.length != 0) {\n        this.likeDay = datas.data[0].preferValue.split(\",\");\n        this.one = \"工作日偏好:\\u2003\" + this.likeDay;\n      }\n    });\n    getPreferenceHaveTwo(JSON.parse(sessionStorage.getItem(\"employee\")).employeeId).then(datas => {\n      if (datas.data.length != 0) {\n        this.likeTime = datas.data[0].preferValue;\n        this.two = \"工作时间偏好:\\u2003\" + this.likeTime;\n      }\n    });\n    getPreferenceHaveThree(JSON.parse(sessionStorage.getItem(\"employee\")).employeeId).then(datas => {\n      if (datas.data.length != 0) {\n        this.three = \"周工作时长偏好:\\u2003\" + eval(\"(\" + datas.data[0].preferValue + \")\").week;\n        this.four = \"日工作时长偏好:\\u2003\" + eval(\"(\" + datas.data[0].preferValue + \")\").day;\n      }\n    });\n  },\n  methods: {\n    //点击编辑button编辑员工\n    handleEdit() {\n      this.dialogUpdateVisible = true;\n      getAllStore().then(datas => {\n        this.field106Options = datas.data;\n        getEmployeeStoreName(JSON.parse(sessionStorage.getItem(\"employee\")).employeeId).then(datas => {\n          this.field106Options.forEach(element => {\n            if (element.storeId === datas.data.storeId) {\n              this.formData.field106 = element;\n            }\n          });\n        });\n      });\n      this.formData.field102 = JSON.parse(sessionStorage.getItem(\"employee\")).employeeId;\n      this.formData.field101 = JSON.parse(sessionStorage.getItem(\"employee\")).employeeName;\n      this.formData.field105 = JSON.parse(sessionStorage.getItem(\"employee\")).phone;\n      this.formData.field103 = JSON.parse(sessionStorage.getItem(\"employee\")).position;\n      this.formData.field107 = JSON.parse(sessionStorage.getItem(\"employee\")).email;\n      getPreferenceHaveOne(JSON.parse(sessionStorage.getItem(\"employee\")).employeeId).then(datas => {\n        if (datas.data.length != 0) {\n          this.likeDay = datas.data[0].preferValue.split(\",\");\n          this.value3 = this.likeDay;\n        }\n      });\n      getPreferenceHaveTwo(JSON.parse(sessionStorage.getItem(\"employee\")).employeeId).then(datas => {\n        if (datas.data.length != 0) {\n          this.likeTime = datas.data[0].preferValue.split(\",\");\n        }\n        if (this.likeTime.length == 1) {\n          this.startTime = this.likeTime[0].slice(0, 5);\n          this.endTime = this.likeTime[0].slice(6, 11);\n        } else if (this.likeTime.length == 2) {\n          this.startTime = this.likeTime[0].slice(0, 5);\n          this.endTime = this.likeTime[0].slice(6, 11);\n          this.startTime1 = this.likeTime[1].slice(0, 5);\n          this.endTime1 = this.likeTime[1].slice(6, 11);\n        }\n      });\n      getPreferenceHaveThree(JSON.parse(sessionStorage.getItem(\"employee\")).employeeId).then(datas => {\n        if (datas.data.length != 0) {\n          this.formData.field108 = eval(\"(\" + datas.data[0].preferValue + \")\").week;\n          this.formData.field109 = eval(\"(\" + datas.data[0].preferValue + \")\").day;\n        }\n      });\n    },\n    //点击确认button确认编辑\n    handelUpdate() {\n      //更新员工信息\n      updateEmployee(this.formData.field102, this.formData.field101, this.formData.field106.storeId, this.formData.field107, this.formData.field103, this.formData.field105);\n      //更新员工工作日偏好\n      getPreferenceHaveOne(this.formData.field102).then(datas => {\n        // console.log(1);\n        if (this.value3.length != 0 && datas.data.length == 0) {\n          insertPreferenceHaveOne(this.formData.field102, this.value3.join(\",\"));\n        } else if (this.value3.length != 0 && datas.data.length != 0) {\n          updatePreferenceHaveOne(this.formData.field102, this.value3.join(\",\"));\n        } else if (this.value3.length == 0 && datas.data.length != 0) {\n          deletePreferenceHaveOne(this.formData.field102);\n        }\n      });\n      //更新员工工作时间偏好\n      getPreferenceHaveTwo(this.formData.field102).then(datas => {\n        console.log(2);\n        if (this.startTime != \"\" && this.endTime != \"\" && this.startTime1 != \"\" && this.endTime1 != \"\" && datas.data.length == 0) {\n          this.fullTime = this.startTime + \"-\" + this.endTime + \",\" + this.startTime1 + \"-\" + this.endTime1;\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime != \"\" && this.endTime != \"\" && datas.data.length == 0) {\n          this.fullTime = this.startTime + \"-\" + this.endTime;\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime1 != \"\" && this.endTime1 != \"\" && datas.data.length == 0) {\n          this.fullTime = this.startTime1 + \"-\" + this.endTime1;\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime != \"\" && this.endTime != \"\" && this.startTime1 != \"\" && this.endTime1 != \"\" && datas.data.length != 0) {\n          this.fullTime = this.startTime + \"-\" + this.endTime + \",\" + this.startTime1 + \"-\" + this.endTime1;\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime != \"\" && this.endTime != \"\" && datas.data.length != 0) {\n          this.fullTime = this.startTime + \"-\" + this.endTime;\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime1 != \"\" && this.endTime1 != \"\" && datas.data.length != 0) {\n          this.fullTime = this.startTime1 + \"-\" + this.endTime1;\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (datas.data.length != 0 && this.startTime == \"\" && this.endTime == \"\" && this.startTime1 == \"\" && this.endTime1 == \"\") {\n          deletePreferenceHaveTwo(this.formData.field102);\n        }\n      });\n      //更新员工工作时长偏好\n      getPreferenceHaveThree(this.formData.field102).then(datas => {\n        console.log(3);\n        if (this.formData.field108 != \"\" && this.formData.field109 != \"\" && datas.data.length == 0) {\n          this.a = JSON.stringify({\n            day: parseInt(this.formData.field109),\n            week: parseInt(this.formData.field108)\n          });\n          insertPreferenceHaveThree(this.formData.field102, this.a);\n        } else if (this.formData.field108 != \"\" && datas.data.length == 0) {\n          this.a = JSON.stringify({\n            week: parseInt(this.formData.field108)\n          });\n          insertPreferenceHaveThree(this.formData.field102, this.a);\n        } else if (this.formData.field109 != \"\" && datas.data.length == 0) {\n          this.a = JSON.stringify({\n            day: parseInt(this.formData.field109)\n          });\n          insertPreferenceHaveThree(this.formData.field102, this.a);\n        } else if (this.formData.field108 != \"\" && this.formData.field109 != \"\" && datas.data.length != 0) {\n          this.a = JSON.stringify({\n            day: parseInt(this.formData.field109),\n            week: parseInt(this.formData.field108)\n          });\n          updatePreferenceHaveThree(this.formData.field102, this.a);\n        } else if (datas.data.length != 0 && this.formData.field108 != \"\" && this.formData.field109 == \"\") {\n          this.a = JSON.stringify({\n            week: parseInt(this.formData.field108)\n          });\n          updatePreferenceHaveThree(this.formData.field102, this.a);\n        } else if (datas.data.length != 0 && this.formData.field109 != \"\" && this.formData.field108 == \"\") {\n          this.a = JSON.stringify({\n            day: parseInt(this.formData.field109)\n          });\n          updatePreferenceHaveThree(this.formData.field102, this.a);\n        } else if (this.formData.field108 == \"\" && this.formData.field109 == \"\" && datas.data.length != 0) {\n          deletePreferenceHaveThree(this.formData.field102);\n        }\n      });\n      this.dialogUpdateVisible = false;\n      // this.value3 = ref([]);\n      // this.startTime = \"\";\n      // this.startTime1 = \"\";\n      // this.endTime = \"\";\n      // this.endTime1 = \"\";\n      // this.formData.field108 = \"\";\n      // this.formData.field109 = \"\";\n      // this.likeTime = [];\n      // location.reload();\n      // this.$router.go(0);\n    },\n\n    //点击取消button取消编辑\n    cancleUpdate() {\n      this.dialogUpdateVisible = false;\n      this.value3 = ref([]);\n      this.startTime = \"\";\n      this.startTime1 = \"\";\n      this.endTime = \"\";\n      this.endTime1 = \"\";\n      this.formData.field108 = \"\";\n      this.formData.field109 = \"\";\n      this.likeTime = [];\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","ElMessage","ElMessageBox","getPreferenceHaveOne","getPreferenceHaveTwo","getPreferenceHaveThree","getAllStore","getEmployeeStoreName","updateEmployee","insertPreferenceHaveOne","updatePreferenceHaveOne","deletePreferenceHaveOne","insertPreferenceHaveThree","updatePreferenceHaveThree","deletePreferenceHaveThree","insertPreferenceHaveTwo","updatePreferenceHaveTwo","deletePreferenceHaveTwo","data","employeeId","employeeName","storeName","position","email","phone","one","two","three","four","value3","a","likeDay","likeTime","dayAndWeek","fullTime","startTime","endTime","startTime1","endTime1","field106Options","formData","field101","field102","field103","field105","field106","field107","field108","field109","rules","required","message","trigger","options","value","label","dialogUpdateVisible","mounted","JSON","parse","sessionStorage","getItem","then","datas","length","preferValue","split","eval","week","day","methods","handleEdit","forEach","element","storeId","slice","handelUpdate","join","console","log","stringify","parseInt","cancleUpdate"],"sourceRoot":"","sources":["C:\\Users\\z'k\\Desktop\\schedule\\intelligent-schedule\\src\\views\\Personal.vue"],"sourcesContent":["<template>\r\n  <el-card class=\"father\">\r\n    <h4>个人中心</h4>\r\n    <div class=\"leftright\">\r\n      <div class=\"left-bar\">\r\n        <span class=\"el-dropdown-link\">\r\n          <img class=\"user\" src=\"../assets/my.png\" alt />\r\n        </span>\r\n      </div>\r\n      <div class=\"right-bar\">\r\n        <div class=\"one\">\r\n          <p>{{ employeeId }}</p>\r\n          <p>{{ employeeName }}</p>\r\n          <p>{{ storeName }}</p>\r\n          <p>{{ position }}</p>\r\n        </div>\r\n        <div class=\"two\">\r\n          <p>{{ email }}</p>\r\n          <p>{{ phone }}</p>\r\n          \r\n        </div>\r\n        <div class=\"three\">\r\n          <p>{{ one }}</p>\r\n          <p>{{ two }}</p>\r\n          <p>{{ three }}</p>\r\n          <p>{{ four }}</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"btns\">\r\n        <el-button type=\"primary\" @click=\"handleEdit\">编辑</el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- <div class=\"message-box\" :inline=\"true\">\r\n      <p>{{ email }}</p>\r\n      <p>{{ phone }}</p>\r\n      <p>{{ one }}</p>\r\n      <p>{{ two }}</p>\r\n      <p>{{ three }}</p>\r\n      <p>{{ four }}</p>\r\n    </div> -->\r\n\r\n    <!-- 编辑弹窗 -->\r\n    <el-dialog title=\"编辑\" v-model=\"dialogUpdateVisible\">\r\n      <el-row :gutter=\"15\">\r\n        <el-form\r\n          ref=\"elForm\"\r\n          :model=\"formData\"\r\n          :rules=\"rules\"\r\n          size=\"medium\"\r\n          label-width=\"100px\"\r\n        >\r\n          <el-row class=\"one\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"员工编号：\" prop=\"field102\">\r\n                <el-input\r\n                  v-model=\"formData.field102\"\r\n                  disabled\r\n                  placeholder=\"请输入员工编号\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"员工姓名：\" prop=\"field101\">\r\n                <el-input\r\n                  v-model=\"formData.field101\"\r\n                  disabled\r\n                  placeholder=\"请输入员工姓名：\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"two\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"所属门店：\" prop=\"field106\">\r\n                <el-select\r\n                  v-model=\"formData.field106\"\r\n                  disabled\r\n                  value-key=\"storeId\"\r\n                  placeholder=\"请选择所属门店\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in field106Options\"\r\n                    :key=\"item.storeId\"\r\n                    :label=\"item.storeName\"\r\n                    :value=\"item\"\r\n                    :disabled=\"item.disabled\"\r\n                  ></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"员工电话：\" prop=\"field105\">\r\n                <el-input\r\n                  v-model=\"formData.field105\"\r\n                  placeholder=\"请输入员工电话\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"three\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"岗位：\" prop=\"field103\">\r\n                <el-select\r\n                  v-model=\"formData.field103\"\r\n                  disabled\r\n                  placeholder=\"请输入岗位\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"(item, employeeId) in field103Options\"\r\n                    :key=\"employeeId\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                    :disabled=\"item.disabled\"\r\n                  ></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"员工电邮：\" prop=\"field107\">\r\n                <el-input\r\n                  v-model=\"formData.field107\"\r\n                  placeholder=\"请输入员工电邮\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"four\">\r\n            <el-col :span=\"20\">\r\n              <el-form-item label=\"工作日偏好：\" prop=\"value3\">\r\n                <el-select\r\n                  v-model=\"value3\"\r\n                  clearable\r\n                  multiple\r\n                  collapse-tags\r\n                  collapse-tags-tooltip\r\n                  placeholder=\"请选择工作日偏好\"\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in options\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  />\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"five\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"时间偏好一：\" prop=\"startTime\">\r\n                <el-time-select\r\n                  v-model=\"startTime\"\r\n                  :max-time=\"endTime\"\r\n                  class=\"mr-4\"\r\n                  placeholder=\"开始时间\"\r\n                  start=\"08:00\"\r\n                  step=\"00:30\"\r\n                  end=\"23:00\"\r\n                />\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item prop=\"endTime\">\r\n                <el-time-select\r\n                  v-model=\"endTime\"\r\n                  :min-time=\"startTime\"\r\n                  :max-time=\"startTime1\"\r\n                  placeholder=\"结束时间\"\r\n                  start=\"08:00\"\r\n                  step=\"00:30\"\r\n                  end=\"23:00\"\r\n                />\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"five\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"时间偏好二：\" prop=\"startTime1\">\r\n                <el-time-select\r\n                  v-model=\"startTime1\"\r\n                  :min-time=\"endTime\"\r\n                  :max-time=\"endTime1\"\r\n                  class=\"mr-4\"\r\n                  placeholder=\"开始时间\"\r\n                  start=\"08:00\"\r\n                  step=\"00:30\"\r\n                  end=\"23:00\"\r\n                />\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item prop=\"endTime1\">\r\n                <el-time-select\r\n                  v-model=\"endTime1\"\r\n                  :min-time=\"startTime1\"\r\n                  placeholder=\"结束时间\"\r\n                  start=\"08:00\"\r\n                  step=\"00:30\"\r\n                  end=\"23:00\"\r\n                />\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"six\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"周工作时长：\" prop=\"field108\">\r\n                <el-input\r\n                  v-model=\"formData.field108\"\r\n                  placeholder=\"请输入周工作时长偏好\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"日工作时长：\" prop=\"field109\">\r\n                <el-input\r\n                  v-model=\"formData.field109\"\r\n                  placeholder=\"请输入日工作时长偏好\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </el-form>\r\n      </el-row>\r\n      <template v-slot:footer>\r\n        <el-button @click=\"cancleUpdate\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"handelUpdate\">确定</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport {\r\n  getPreferenceHaveOne,\r\n  getPreferenceHaveTwo,\r\n  getPreferenceHaveThree,\r\n  getAllStore,\r\n  getEmployeeStoreName,\r\n  updateEmployee,\r\n  insertPreferenceHaveOne,\r\n  updatePreferenceHaveOne,\r\n  deletePreferenceHaveOne,\r\n  insertPreferenceHaveThree,\r\n  updatePreferenceHaveThree,\r\n  deletePreferenceHaveThree,\r\n  insertPreferenceHaveTwo,\r\n  updatePreferenceHaveTwo,\r\n  deletePreferenceHaveTwo,\r\n} from \"@/api\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      employeeId: \"\",\r\n      employeeName: \"\",\r\n      storeName: \"\",\r\n      position: \"\",\r\n      email: \"\",\r\n      phone: \"\",\r\n      one: \"工作日偏好:\\u2003\",\r\n      two: \"工作时间偏好:\\u2003\",\r\n      three: \"周工作时长偏好:\\u2003\",\r\n      four: \"日工作时长偏好:\\u2003\",\r\n      value3: ref([]),\r\n      a: \"\",\r\n      likeDay: [],\r\n      likeTime: [],\r\n      dayAndWeek: \"\",\r\n      fullTime: \"\",\r\n      startTime: \"\",\r\n      endTime: \"\",\r\n      startTime1: \"\",\r\n      endTime1: \"\",\r\n      field106Options: [],\r\n      formData: {\r\n        field101: \"\", //员工姓名\r\n        field102: \"\", //员工编号\r\n        field103: \"\", //岗位\r\n        field105: \"\", //员工电话\r\n        field106: {}, //所属门店\r\n        field107: \"\", //员工电邮\r\n        field108: \"\", //周工作时长\r\n        field109: \"\", //日工作时长\r\n      },\r\n      rules: {\r\n        field101: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工姓名：\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field102: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工编号\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field103: [\r\n          {\r\n            required: true,\r\n            message: \"请输入岗位\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        field105: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工电话\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field106: [\r\n          {\r\n            required: true,\r\n            message: \"请选择所属门店\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        field107: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工电邮\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      options: [\r\n        {\r\n          value: \"1\",\r\n          label: \"星期一\",\r\n        },\r\n        {\r\n          value: \"2\",\r\n          label: \"星期二\",\r\n        },\r\n        {\r\n          value: \"3\",\r\n          label: \"星期三\",\r\n        },\r\n        {\r\n          value: \"4\",\r\n          label: \"星期四\",\r\n        },\r\n        {\r\n          value: \"5\",\r\n          label: \"星期五\",\r\n        },\r\n        {\r\n          value: \"6\",\r\n          label: \"星期六\",\r\n        },\r\n        {\r\n          value: \"7\",\r\n          label: \"星期日\",\r\n        },\r\n      ],\r\n      dialogUpdateVisible: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.employeeId =\r\n      \"员工编号:\\u2003\" +\r\n      JSON.parse(sessionStorage.getItem(\"employee\")).employeeId;\r\n    this.employeeName =\r\n      \"员工姓名:\\u2003\" +\r\n      JSON.parse(sessionStorage.getItem(\"employee\")).employeeName;\r\n    this.storeName =\r\n      \"所属门店:\\u2003\" +\r\n      JSON.parse(sessionStorage.getItem(\"employee\")).employeeName;\r\n    this.position =\r\n      \"岗位:\\u2003\" + JSON.parse(sessionStorage.getItem(\"employee\")).position;\r\n    this.email =\r\n      \"邮箱:\\u2003\" + JSON.parse(sessionStorage.getItem(\"employee\")).email;\r\n    this.phone =\r\n      \"联系电话:\\u2003\" + JSON.parse(sessionStorage.getItem(\"employee\")).phone;\r\n    getPreferenceHaveOne(\r\n      JSON.parse(sessionStorage.getItem(\"employee\")).employeeId\r\n    ).then((datas) => {\r\n      if (datas.data.length != 0) {\r\n        this.likeDay = datas.data[0].preferValue.split(\",\");\r\n        this.one = \"工作日偏好:\\u2003\" + this.likeDay;\r\n      }\r\n    });\r\n    getPreferenceHaveTwo(\r\n      JSON.parse(sessionStorage.getItem(\"employee\")).employeeId\r\n    ).then((datas) => {\r\n      if (datas.data.length != 0) {\r\n        this.likeTime = datas.data[0].preferValue;\r\n        this.two = \"工作时间偏好:\\u2003\" + this.likeTime;\r\n      }\r\n    });\r\n    getPreferenceHaveThree(\r\n      JSON.parse(sessionStorage.getItem(\"employee\")).employeeId\r\n    ).then((datas) => {\r\n      if (datas.data.length != 0) {\r\n        this.three =\r\n          \"周工作时长偏好:\\u2003\" +\r\n          eval(\"(\" + datas.data[0].preferValue + \")\").week;\r\n        this.four =\r\n          \"日工作时长偏好:\\u2003\" +\r\n          eval(\"(\" + datas.data[0].preferValue + \")\").day;\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    //点击编辑button编辑员工\r\n    handleEdit() {\r\n      this.dialogUpdateVisible = true;\r\n      getAllStore().then((datas) => {\r\n        this.field106Options = datas.data;\r\n        getEmployeeStoreName(\r\n          JSON.parse(sessionStorage.getItem(\"employee\")).employeeId\r\n        ).then((datas) => {\r\n          this.field106Options.forEach((element) => {\r\n            if (element.storeId === datas.data.storeId) {\r\n              this.formData.field106 = element;\r\n            }\r\n          });\r\n        });\r\n      });\r\n      this.formData.field102 = JSON.parse(\r\n        sessionStorage.getItem(\"employee\")\r\n      ).employeeId;\r\n      this.formData.field101 = JSON.parse(\r\n        sessionStorage.getItem(\"employee\")\r\n      ).employeeName;\r\n      this.formData.field105 = JSON.parse(\r\n        sessionStorage.getItem(\"employee\")\r\n      ).phone;\r\n      this.formData.field103 = JSON.parse(\r\n        sessionStorage.getItem(\"employee\")\r\n      ).position;\r\n      this.formData.field107 = JSON.parse(\r\n        sessionStorage.getItem(\"employee\")\r\n      ).email;\r\n      getPreferenceHaveOne(\r\n        JSON.parse(sessionStorage.getItem(\"employee\")).employeeId\r\n      ).then((datas) => {\r\n        if (datas.data.length != 0) {\r\n          this.likeDay = datas.data[0].preferValue.split(\",\");\r\n          this.value3 = this.likeDay;\r\n        }\r\n      });\r\n      getPreferenceHaveTwo(\r\n        JSON.parse(sessionStorage.getItem(\"employee\")).employeeId\r\n      ).then((datas) => {\r\n        if (datas.data.length != 0) {\r\n          this.likeTime = datas.data[0].preferValue.split(\",\");\r\n        }\r\n        if (this.likeTime.length == 1) {\r\n          this.startTime = this.likeTime[0].slice(0, 5);\r\n          this.endTime = this.likeTime[0].slice(6, 11);\r\n        } else if (this.likeTime.length == 2) {\r\n          this.startTime = this.likeTime[0].slice(0, 5);\r\n          this.endTime = this.likeTime[0].slice(6, 11);\r\n          this.startTime1 = this.likeTime[1].slice(0, 5);\r\n          this.endTime1 = this.likeTime[1].slice(6, 11);\r\n        }\r\n      });\r\n      getPreferenceHaveThree(\r\n        JSON.parse(sessionStorage.getItem(\"employee\")).employeeId\r\n      ).then((datas) => {\r\n        if (datas.data.length != 0) {\r\n          this.formData.field108 = eval(\r\n            \"(\" + datas.data[0].preferValue + \")\"\r\n          ).week;\r\n          this.formData.field109 = eval(\r\n            \"(\" + datas.data[0].preferValue + \")\"\r\n          ).day;\r\n        }\r\n      });\r\n    },\r\n    //点击确认button确认编辑\r\n    handelUpdate() {\r\n      //更新员工信息\r\n      updateEmployee(\r\n        this.formData.field102,\r\n        this.formData.field101,\r\n        this.formData.field106.storeId,\r\n        this.formData.field107,\r\n        this.formData.field103,\r\n        this.formData.field105\r\n      );\r\n      //更新员工工作日偏好\r\n      getPreferenceHaveOne(this.formData.field102).then((datas) => {\r\n        // console.log(1);\r\n        if (this.value3.length != 0 && datas.data.length == 0) {\r\n          insertPreferenceHaveOne(\r\n            this.formData.field102,\r\n            this.value3.join(\",\")\r\n          );\r\n        } else if (this.value3.length != 0 && datas.data.length != 0) {\r\n          updatePreferenceHaveOne(\r\n            this.formData.field102,\r\n            this.value3.join(\",\")\r\n          );\r\n        } else if (this.value3.length == 0 && datas.data.length != 0) {\r\n          deletePreferenceHaveOne(this.formData.field102);\r\n        }\r\n      });\r\n      //更新员工工作时间偏好\r\n      getPreferenceHaveTwo(this.formData.field102).then((datas) => {\r\n        console.log(2);\r\n        if (\r\n          this.startTime != \"\" &&\r\n          this.endTime != \"\" &&\r\n          this.startTime1 != \"\" &&\r\n          this.endTime1 != \"\" &&\r\n          datas.data.length == 0\r\n        ) {\r\n          this.fullTime =\r\n            this.startTime +\r\n            \"-\" +\r\n            this.endTime +\r\n            \",\" +\r\n            this.startTime1 +\r\n            \"-\" +\r\n            this.endTime1;\r\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime != \"\" &&\r\n          this.endTime != \"\" &&\r\n          datas.data.length == 0\r\n        ) {\r\n          this.fullTime = this.startTime + \"-\" + this.endTime;\r\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime1 != \"\" &&\r\n          this.endTime1 != \"\" &&\r\n          datas.data.length == 0\r\n        ) {\r\n          this.fullTime = this.startTime1 + \"-\" + this.endTime1;\r\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime != \"\" &&\r\n          this.endTime != \"\" &&\r\n          this.startTime1 != \"\" &&\r\n          this.endTime1 != \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          this.fullTime =\r\n            this.startTime +\r\n            \"-\" +\r\n            this.endTime +\r\n            \",\" +\r\n            this.startTime1 +\r\n            \"-\" +\r\n            this.endTime1;\r\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime != \"\" &&\r\n          this.endTime != \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          this.fullTime = this.startTime + \"-\" + this.endTime;\r\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime1 != \"\" &&\r\n          this.endTime1 != \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          this.fullTime = this.startTime1 + \"-\" + this.endTime1;\r\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          datas.data.length != 0 &&\r\n          this.startTime == \"\" &&\r\n          this.endTime == \"\" &&\r\n          this.startTime1 == \"\" &&\r\n          this.endTime1 == \"\"\r\n        ) {\r\n          deletePreferenceHaveTwo(this.formData.field102);\r\n        }\r\n      });\r\n      //更新员工工作时长偏好\r\n      getPreferenceHaveThree(this.formData.field102).then((datas) => {\r\n        console.log(3);\r\n        if (\r\n          this.formData.field108 != \"\" &&\r\n          this.formData.field109 != \"\" &&\r\n          datas.data.length == 0\r\n        ) {\r\n          this.a = JSON.stringify({\r\n            day: parseInt(this.formData.field109),\r\n            week: parseInt(this.formData.field108),\r\n          });\r\n          insertPreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (this.formData.field108 != \"\" && datas.data.length == 0) {\r\n          this.a = JSON.stringify({\r\n            week: parseInt(this.formData.field108),\r\n          });\r\n          insertPreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (this.formData.field109 != \"\" && datas.data.length == 0) {\r\n          this.a = JSON.stringify({\r\n            day: parseInt(this.formData.field109),\r\n          });\r\n          insertPreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (\r\n          this.formData.field108 != \"\" &&\r\n          this.formData.field109 != \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          this.a = JSON.stringify({\r\n            day: parseInt(this.formData.field109),\r\n            week: parseInt(this.formData.field108),\r\n          });\r\n          updatePreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (\r\n          datas.data.length != 0 &&\r\n          this.formData.field108 != \"\" &&\r\n          this.formData.field109 == \"\"\r\n        ) {\r\n          this.a = JSON.stringify({\r\n            week: parseInt(this.formData.field108),\r\n          });\r\n          updatePreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (\r\n          datas.data.length != 0 &&\r\n          this.formData.field109 != \"\" &&\r\n          this.formData.field108 == \"\"\r\n        ) {\r\n          this.a = JSON.stringify({\r\n            day: parseInt(this.formData.field109),\r\n          });\r\n          updatePreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (\r\n          this.formData.field108 == \"\" &&\r\n          this.formData.field109 == \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          deletePreferenceHaveThree(this.formData.field102);\r\n        }\r\n      });\r\n      this.dialogUpdateVisible = false;\r\n      // this.value3 = ref([]);\r\n      // this.startTime = \"\";\r\n      // this.startTime1 = \"\";\r\n      // this.endTime = \"\";\r\n      // this.endTime1 = \"\";\r\n      // this.formData.field108 = \"\";\r\n      // this.formData.field109 = \"\";\r\n      // this.likeTime = [];\r\n      // location.reload();\r\n      // this.$router.go(0);\r\n    },\r\n    //点击取消button取消编辑\r\n    cancleUpdate() {\r\n      this.dialogUpdateVisible = false;\r\n      this.value3 = ref([]);\r\n      this.startTime = \"\";\r\n      this.startTime1 = \"\";\r\n      this.endTime = \"\";\r\n      this.endTime1 = \"\";\r\n      this.formData.field108 = \"\";\r\n      this.formData.field109 = \"\";\r\n      this.likeTime = [];\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.father {\r\n  /* border: 1px solid black; */\r\n  position: relative;\r\n  height: 690px;\r\n}\r\n.leftright {\r\n  /* border: 1px solid red; */\r\n  position: absolute;\r\n  width: 97%;\r\n  box-shadow: 0 0 5px 5px #eae9e9;\r\n}\r\nh4 {\r\n  position: relative;\r\n  padding-left: 10px;\r\n}\r\nh4::before {\r\n  position: absolute;\r\n  left: -5px;\r\n  top: 2px;\r\n  content: \"\";\r\n  width: 4px;\r\n  height: 18px;\r\n  background-color: skyblue;\r\n}\r\n.left-bar {\r\n  float: left;\r\n  width: 20%;\r\n  height: 100%;\r\n  /* position: absolute; */\r\n  /* overflow: auto; */\r\n  /* border: 1px solid black; */\r\n  margin: 0 auto;\r\n  margin-top: 25px;\r\n}\r\n.one {\r\n  /* margin-top: 50px;\r\n  left: 50px; */\r\n  float: left;\r\n  /* left: 600px; */\r\n  width: 15%;\r\n  height: 100%;\r\n  /* position: absolute; */\r\n  /* overflow: auto; */\r\n  /* border: 1px solid black; */\r\n  margin: 0 auto;\r\n  padding: 70px 0;\r\n  margin-left: 50px;\r\n}\r\n.two {\r\n  /* margin-top: 50px;\r\n  margin-left: 20px; */\r\n  float: left;\r\n  /* left: 600px; */\r\n  width: 24%;\r\n  height: 100%;\r\n  /* position: absolute; */\r\n  /* overflow: auto; */\r\n  /* border: 1px solid black; */\r\n  margin: 0 auto;\r\n  padding: 70px 0;\r\n}\r\n.three {\r\n  /* margin-top: 50px;\r\n  margin-left: 20px; */\r\n  float: left;\r\n  /* left: 600px; */\r\n  width: 30%;\r\n  height: 100%;\r\n  /* position: absolute; */\r\n  /* overflow: auto; */\r\n  /* border: 1px solid black; */\r\n  margin: 0 auto;\r\n  padding: 70px 0;\r\n}\r\n.message-box {\r\n  /* text-align: left; */\r\n  top: 180px;\r\n  left: 18px;\r\n  width: 700px;\r\n  height: 350px;\r\n  border: 1px solid black;\r\n  /* margin: 0 auto; */\r\n  display: flex;\r\n  flex-direction: column;\r\n  /* background-color: rgba(255, 255, 255, 0.8); */\r\n  border-radius: 10px;\r\n  /* box-sizing: border-box; */\r\n  box-shadow: 0 0 5px 5px #eae9e9;\r\n  position: absolute;\r\n}\r\n.state {\r\n  margin-left: 25px;\r\n}\r\n.btns {\r\n  /* position: absolute; */\r\n  position: absolute;\r\n  bottom:20px;\r\n  right: 20px;\r\n}\r\n.el-button {\r\n  margin-right: 10px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}