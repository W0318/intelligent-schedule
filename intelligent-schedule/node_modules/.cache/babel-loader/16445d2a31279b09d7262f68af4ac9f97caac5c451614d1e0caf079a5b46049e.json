{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nimport { ElMessage, ElMessageBox } from \"element-plus\";\nimport { insertEmployee, insertPreferenceHaveOne, insertPreferenceHaveTwo, insertPreferenceHaveThree, getFindIfExistEmployee, getAllStore } from \"@/api\";\nexport default {\n  components: {},\n  props: [],\n  data() {\n    return {\n      a: \"\",\n      fullTime: \"\",\n      startTime: \"\",\n      endTime: \"\",\n      startTime1: \"\",\n      endTime1: \"\",\n      value3: ref([]),\n      formData: {\n        employeeName: \"\",\n        employeeId: \"\",\n        store: \"\",\n        phone: \"\",\n        position: \"\",\n        email: \"\",\n        field108: \"\",\n        field109: \"\"\n      },\n      rules: {\n        employeeName: [{\n          required: true,\n          message: \"请输入员工姓名：\",\n          trigger: \"blur\"\n        }],\n        employeeId: [{\n          required: true,\n          message: \"请输入员工编号\",\n          trigger: \"blur\"\n        }],\n        store: [{\n          required: true,\n          message: \"请选择岗位\",\n          trigger: \"change\"\n        }],\n        phone: [{\n          required: true,\n          message: \"请输入员工电话\",\n          trigger: \"blur\"\n        }],\n        position: [{\n          required: true,\n          message: \"请选择所属门店\",\n          trigger: \"change\"\n        }],\n        email: [{\n          required: true,\n          message: \"请输入员工电邮\",\n          trigger: \"blur\"\n        }]\n      },\n      options: [{\n        value: \"1\",\n        label: \"星期一\"\n      }, {\n        value: \"2\",\n        label: \"星期二\"\n      }, {\n        value: \"3\",\n        label: \"星期三\"\n      }, {\n        value: \"4\",\n        label: \"星期四\"\n      }, {\n        value: \"5\",\n        label: \"星期五\"\n      }, {\n        value: \"6\",\n        label: \"星期六\"\n      }, {\n        value: \"7\",\n        label: \"星期日\"\n      }],\n      field103Options: [{\n        label: \"门店经理\",\n        value: \"门店经理\"\n      }, {\n        label: \"副经理\",\n        value: \"副经理\"\n      }, {\n        label: \"小组长\",\n        value: \"小组长\"\n      }, {\n        label: \"店员\",\n        value: \"店员\"\n      }],\n      field106Options: []\n    };\n  },\n  computed: {},\n  watch: {},\n  created() {},\n  mounted() {\n    getAllStore().then(datas => {\n      this.field106Options = datas.data;\n      console.log(this.field106Options);\n    });\n  },\n  methods: {\n    submitForm() {\n      getFindIfExistEmployee(this.formData.employeeId).then(datas => {\n        if (datas.data.length != 0) {\n          ElMessage({\n            type: \"warning\",\n            message: \"员工编号已存在\"\n          });\n        } else {\n          if (this.formData.employeeId === \"\" || this.formData.employeeName === \"\" || this.formData.store.storeId === \"\" || this.formData.email === \"\" || this.formData.position === \"\" || this.formData.phone === \"\") {\n            ElMessage({\n              type: \"warning\",\n              message: \"请完整填写员工信息\"\n            });\n            return;\n          }\n          insertEmployee(this.formData.employeeId, this.formData.employeeName, this.formData.store.storeId, this.formData.email, this.formData.position, this.formData.phone).then(() => {\n            if (this.value3.length != 0) {\n              insertPreferenceHaveOne(this.formData.employeeId, this.value3.join(\",\"));\n            }\n            if (this.startTime != \"\" && this.endTime != \"\" && this.startTime1 != \"\" && this.endTime1 != \"\") {\n              this.fullTime = this.startTime + \"-\" + this.endTime + \",\" + this.startTime1 + \"-\" + this.endTime1;\n              insertPreferenceHaveTwo(this.formData.employeeId, this.fullTime);\n            } else if (this.startTime != \"\" && this.endTime != \"\") {\n              this.fullTime = this.startTime + \"-\" + this.endTime;\n              insertPreferenceHaveTwo(this.formData.employeeId, this.fullTime);\n            } else if (this.startTime1 != \"\" && this.endTime1 != \"\") {\n              this.fullTime = this.startTime1 + \"-\" + this.endTime1;\n              insertPreferenceHaveTwo(this.formData.employeeId, this.fullTime);\n            }\n            if (this.formData.field108 != \"\" && this.formData.field109 != \"\") {\n              this.a = JSON.stringify({\n                day: parseInt(this.formData.field109),\n                week: parseInt(this.formData.field108)\n              });\n              insertPreferenceHaveThree(this.formData.employeeId, this.a);\n            } else if (this.formData.field108 != \"\" && this.formData.field109 == \"\") {\n              this.a = JSON.stringify({\n                week: parseInt(this.formData.field108)\n              });\n              insertPreferenceHaveThree(this.formData.employeeId, this.a);\n            } else if (this.formData.field108 == \"\" && this.formData.field109 != \"\") {\n              this.a = JSON.stringify({\n                day: parseInt(this.formData.field109)\n              });\n              insertPreferenceHaveThree(this.formData.employeeId, this.a);\n            }\n          });\n          ElMessage({\n            type: \"success\",\n            message: \"新建员工成功\"\n          });\n          this.$router.push({\n            name: \"employee\"\n          });\n        }\n      });\n    },\n    resetForm() {\n      this.$router.push({\n        name: \"employee\"\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","ElMessage","ElMessageBox","insertEmployee","insertPreferenceHaveOne","insertPreferenceHaveTwo","insertPreferenceHaveThree","getFindIfExistEmployee","getAllStore","components","props","data","a","fullTime","startTime","endTime","startTime1","endTime1","value3","formData","employeeName","employeeId","store","phone","position","email","field108","field109","rules","required","message","trigger","options","value","label","field103Options","field106Options","computed","watch","created","mounted","then","datas","console","log","methods","submitForm","length","type","storeId","join","JSON","stringify","day","parseInt","week","$router","push","name","resetForm"],"sourceRoot":"","sources":["E:\\work\\vue\\schedule\\intelligent-schedule\\src\\views\\StoreManagement\\AddEmployee.vue"],"sourcesContent":["<template>\r\n  <el-card>\r\n    <el-form ref=\"addFormRef\" :model=\"addForm\" :rules=\"addFormRules\">\r\n      <h4>基础信息</h4>\r\n      <el-row :gutter=\"15\">\r\n        <el-form\r\n          ref=\"elForm\"\r\n          :model=\"formData\"\r\n          :rules=\"rules\"\r\n          size=\"medium\"\r\n          label-width=\"100px\"\r\n        >\r\n          <el-row class=\"one\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"员工编号：\" prop=\"employeeId\">\r\n                <el-input\r\n                  v-model=\"formData.employeeId\"\r\n                  placeholder=\"请输入员工编号\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"员工姓名：\" prop=\"employeeName\">\r\n                <el-input\r\n                  v-model=\"formData.employeeName\"\r\n                  placeholder=\"请输入员工姓名\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"two\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"所属门店：\" prop=\"store\">\r\n                <el-select\r\n                  v-model=\"formData.store\"\r\n                  value-key=\"storeId\"\r\n                  placeholder=\"请选择所属门店\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in field106Options\"\r\n                    :key=\"item.storeId\"\r\n                      :label=\"item.storeName\"\r\n                      :value=\"item\"\r\n                    :disabled=\"item.disabled\"\r\n                  ></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"员工电话：\" prop=\"phone\">\r\n                <el-input\r\n                  v-model=\"formData.phone\"\r\n                  placeholder=\"请输入员工电话\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"three\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"岗位：\" prop=\"position\">\r\n                <el-select\r\n                  v-model=\"formData.position\"\r\n                  placeholder=\"请输入岗位\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"(item, employeeId) in field103Options\"\r\n                    :key=\"employeeId\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                    :disabled=\"item.disabled\"\r\n                  ></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"员工电邮：\" prop=\"email\">\r\n                <el-input\r\n                  v-model=\"formData.email\"\r\n                  placeholder=\"请输入员工电邮\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"four\">\r\n            <el-col :span=\"20\">\r\n              <el-form-item label=\"工作日偏好：\" prop=\"value3\">\r\n                <el-select\r\n                  v-model=\"value3\"\r\n                  multiple\r\n                  collapse-tags\r\n                  collapse-tags-tooltip\r\n                  placeholder=\"请选择工作日偏好\"\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in options\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  />\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"five\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"时间偏好一：\" prop=\"startTime\">\r\n                <el-time-select\r\n                  v-model=\"startTime\"\r\n                  :max-time=\"endTime\"\r\n                  class=\"mr-4\"\r\n                  placeholder=\"开始时间\"\r\n                  start=\"08:00\"\r\n                  step=\"00:30\"\r\n                  end=\"23:00\"\r\n                />\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item prop=\"endTime\">\r\n                <el-time-select\r\n                  v-model=\"endTime\"\r\n                  :min-time=\"startTime\"\r\n                  :max-time=\"startTime1\"\r\n                  placeholder=\"结束时间\"\r\n                  start=\"08:00\"\r\n                  step=\"00:30\"\r\n                  end=\"23:00\"\r\n                />\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"five\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"时间偏好二：\" prop=\"startTime1\">\r\n                <el-time-select\r\n                  v-model=\"startTime1\"\r\n                  :min-time=\"endTime\"\r\n                  :max-time=\"endTime1\"\r\n                  class=\"mr-4\"\r\n                  placeholder=\"开始时间\"\r\n                  start=\"08:00\"\r\n                  step=\"00:30\"\r\n                  end=\"23:00\"\r\n                />\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item prop=\"endTime1\">\r\n                <el-time-select\r\n                  v-model=\"endTime1\"\r\n                  :min-time=\"startTime1\"\r\n                  placeholder=\"结束时间\"\r\n                  start=\"08:00\"\r\n                  step=\"00:30\"\r\n                  end=\"23:00\"\r\n                />\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row class=\"six\">\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"周工作时长：\" prop=\"field108\">\r\n                <el-input\r\n                  v-model=\"formData.field108\"\r\n                  placeholder=\"请输入周工作时长偏好\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"日工作时长：\" prop=\"field109\">\r\n                <el-input\r\n                  v-model=\"formData.field109\"\r\n                  placeholder=\"请输入日工作时长偏好\"\r\n                  clearable\r\n                  :style=\"{ width: '100%' }\"\r\n                >\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </el-form>\r\n      </el-row>\r\n      <div class=\"btns\">\r\n        <el-button @click=\"resetForm\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitForm\">保存</el-button>\r\n      </div>\r\n    </el-form>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport {\r\n  insertEmployee,\r\n  insertPreferenceHaveOne,\r\n  insertPreferenceHaveTwo,\r\n  insertPreferenceHaveThree,\r\n  getFindIfExistEmployee,\r\n  getAllStore,\r\n} from \"@/api\";\r\nexport default {\r\n  components: {},\r\n  props: [],\r\n  data() {\r\n    return {\r\n      a: \"\",\r\n      fullTime: \"\",\r\n      startTime: \"\",\r\n      endTime: \"\",\r\n      startTime1: \"\",\r\n      endTime1: \"\",\r\n      value3: ref([]),\r\n      formData: {\r\n        employeeName: \"\",\r\n        employeeId: \"\",\r\n        store: \"\",\r\n        phone: \"\",\r\n        position: \"\",\r\n        email: \"\",\r\n        field108: \"\",\r\n        field109: \"\",\r\n      },\r\n      rules: {\r\n        employeeName: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工姓名：\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        employeeId: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工编号\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        store: [\r\n          {\r\n            required: true,\r\n            message: \"请选择岗位\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        phone: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工电话\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        position: [\r\n          {\r\n            required: true,\r\n            message: \"请选择所属门店\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        email: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工电邮\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      options: [\r\n        {\r\n          value: \"1\",\r\n          label: \"星期一\",\r\n        },\r\n        {\r\n          value: \"2\",\r\n          label: \"星期二\",\r\n        },\r\n        {\r\n          value: \"3\",\r\n          label: \"星期三\",\r\n        },\r\n        {\r\n          value: \"4\",\r\n          label: \"星期四\",\r\n        },\r\n        {\r\n          value: \"5\",\r\n          label: \"星期五\",\r\n        },\r\n        {\r\n          value: \"6\",\r\n          label: \"星期六\",\r\n        },\r\n        {\r\n          value: \"7\",\r\n          label: \"星期日\",\r\n        },\r\n      ],\r\n      field103Options: [\r\n        {\r\n          label: \"门店经理\",\r\n          value: \"门店经理\",\r\n        },\r\n        {\r\n          label: \"副经理\",\r\n          value: \"副经理\",\r\n        },\r\n        {\r\n          label: \"小组长\",\r\n          value: \"小组长\",\r\n        },\r\n        {\r\n          label: \"店员\",\r\n          value: \"店员\",\r\n        },\r\n      ],\r\n      field106Options: [],\r\n    };\r\n  },\r\n  computed: {},\r\n  watch: {},\r\n  created() {},\r\n  mounted() {\r\n    getAllStore().then((datas) => {\r\n      this.field106Options = datas.data;\r\n      console.log(this.field106Options);\r\n    });\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      getFindIfExistEmployee(this.formData.employeeId).then((datas) => {\r\n        if (datas.data.length != 0) {\r\n          ElMessage({\r\n            type: \"warning\",\r\n            message: \"员工编号已存在\",\r\n          });\r\n        } else {\r\n          if (\r\n            this.formData.employeeId === \"\" ||\r\n            this.formData.employeeName === \"\" ||\r\n            this.formData.store.storeId === \"\" ||\r\n            this.formData.email === \"\" ||\r\n            this.formData.position === \"\" ||\r\n            this.formData.phone === \"\"\r\n          ) {\r\n            ElMessage({\r\n              type: \"warning\",\r\n              message: \"请完整填写员工信息\",\r\n            });\r\n            return;\r\n          }\r\n          insertEmployee(\r\n            this.formData.employeeId,\r\n            this.formData.employeeName,\r\n            this.formData.store.storeId,\r\n            this.formData.email,\r\n            this.formData.position,\r\n            this.formData.phone\r\n          ).then(() => {\r\n            if (this.value3.length != 0) {\r\n              insertPreferenceHaveOne(\r\n                this.formData.employeeId,\r\n                this.value3.join(\",\")\r\n              );\r\n            }\r\n            if (\r\n              this.startTime != \"\" &&\r\n              this.endTime != \"\" &&\r\n              this.startTime1 != \"\" &&\r\n              this.endTime1 != \"\"\r\n            ) {\r\n              this.fullTime =\r\n                this.startTime +\r\n                \"-\" +\r\n                this.endTime +\r\n                \",\" +\r\n                this.startTime1 +\r\n                \"-\" +\r\n                this.endTime1;\r\n              insertPreferenceHaveTwo(this.formData.employeeId, this.fullTime);\r\n            } else if (this.startTime != \"\" && this.endTime != \"\") {\r\n              this.fullTime = this.startTime + \"-\" + this.endTime;\r\n              insertPreferenceHaveTwo(this.formData.employeeId, this.fullTime);\r\n            } else if (this.startTime1 != \"\" && this.endTime1 != \"\") {\r\n              this.fullTime = this.startTime1 + \"-\" + this.endTime1;\r\n              insertPreferenceHaveTwo(this.formData.employeeId, this.fullTime);\r\n            }\r\n            if (this.formData.field108 != \"\" && this.formData.field109 != \"\") {\r\n              this.a = JSON.stringify({\r\n                day: parseInt(this.formData.field109),\r\n                week: parseInt(this.formData.field108),\r\n              });\r\n              insertPreferenceHaveThree(this.formData.employeeId, this.a);\r\n            } else if (\r\n              this.formData.field108 != \"\" &&\r\n              this.formData.field109 == \"\"\r\n            ) {\r\n              this.a = JSON.stringify({\r\n                week: parseInt(this.formData.field108),\r\n              });\r\n              insertPreferenceHaveThree(this.formData.employeeId, this.a);\r\n            } else if (\r\n              this.formData.field108 == \"\" &&\r\n              this.formData.field109 != \"\"\r\n            ) {\r\n              this.a = JSON.stringify({\r\n                day: parseInt(this.formData.field109),\r\n              });\r\n              insertPreferenceHaveThree(this.formData.employeeId, this.a);\r\n            }\r\n          });\r\n          ElMessage({\r\n            type: \"success\",\r\n            message: \"新建员工成功\",\r\n          });\r\n          this.$router.push({\r\n            name: \"employee\",\r\n          });\r\n        }\r\n      });\r\n    },\r\n    resetForm() {\r\n      this.$router.push({\r\n        name: \"employee\",\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nh4 {\r\n  position: relative;\r\n  padding-left: 10px;\r\n}\r\nh4::before {\r\n  position: absolute;\r\n  left: -5px;\r\n  top: 2px;\r\n  content: \"\";\r\n  width: 4px;\r\n  height: 18px;\r\n  background-color: skyblue;\r\n}\r\n.state {\r\n  margin-left: 25px;\r\n}\r\n.btns {\r\n  margin-top: 20px;\r\n  margin-left: 800px;\r\n}\r\n.el-button {\r\n  margin-right: 10px;\r\n}\r\n.demo-range .el-date-editor {\r\n  margin: 8px;\r\n}\r\n\r\n.demo-range .el-range-separator {\r\n  box-sizing: content-box;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}