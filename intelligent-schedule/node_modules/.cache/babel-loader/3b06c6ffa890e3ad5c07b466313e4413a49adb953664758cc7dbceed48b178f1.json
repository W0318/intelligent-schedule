{"ast":null,"code":"import { ref } from \"vue\";\nimport { ElMessageBox } from \"element-plus\";\nimport OpenRules from \"./components/OpenShopRules.vue\";\nimport CloseRules from \"./components/CloseShopRules.vue\";\nimport CustomerRules from \"./components/CustomerRules.vue\";\nimport ClassesRules from \"./components/ClassesRules.vue\";\nimport { getStoreName, getAllStore } from \"@/api\";\nimport OpenShopRules from \"./components/OpenShopRules.vue\";\nexport default {\n  inject: [\"reload\"],\n  data() {\n    return {\n      label111: -1,\n      lengthh: 0,\n      index: 0,\n      selectLabel: \"\",\n      // 左侧导航数据\n      data: \"\",\n      storeData: [],\n      defaultProps: {\n        children: \"children\",\n        label: \"label\"\n      },\n      activeName: \"first\"\n    };\n  },\n  components: {\n    OpenRules,\n    CloseRules,\n    CustomerRules,\n    ClassesRules\n  },\n  methods: {\n    // 切换tree上的节点点击事件\n    handleNodeClick(data) {\n      this.$nextTick(() => {\n        // 获取所有门店信息\n        getAllStore().then(datas => {\n          this.lengthh = datas.data.length;\n          console.log(\"lengthh:\" + this.lengthh);\n          for (let i = this.lengthh - 1; i >= 0; i--) {\n            console.log(\"id:\" + datas.data[i].storeId);\n            // console.log(data.label);\n            this.selectLabel = datas.data[i].storeName;\n            let label = data.label;\n            console.log(\"label:\" + label);\n            console.log(\"selectlabel:\" + this.selectLabel);\n            if (label == this.selectLabel) {\n              console.log(\"当前公司：\" + label);\n              this.label111 = datas.data[i].storeId;\n              this.reload();\n            }\n          }\n          if (this.label111 == -1) {\n            this.reload();\n          }\n          console.log(this.label111);\n          sessionStorage.setItem(\"label111\", this.label111);\n          console.log(\"存的数据\" + sessionStorage.getItem(\"label111\"));\n        });\n      });\n    },\n    // handleNodeClick(data) {\n    //   this.$nextTick(() => {\n    //     // this.$refs.tree.setCurrentKey(data.nodeId);\n    //     // 获取所有门店信息\n    //     getAllStore().then((datas) => {\n    //       // this.tableData = datas.data.length;\n    //       console.log(\"length:\" + datas.data.length);\n    //     });\n    //     console.log(data.label);\n    //     let label = data.label;\n    //     if (label == \"浙江总公司\") {\n    //       this.label111 = 1;\n    //       // this.$router.go(0);\n    //     } else if (label == \"上海分公司\") {\n    //       this.label111 = 2;\n    //       this.$router.go(0);\n    //     } else if (label == \"江苏分公司\") {\n    //       this.label111 = 3;\n    //       this.$router.go(0);\n    //     } else {\n    //       this.label111 = -1;\n    //       this.$router.go(0);\n    //     }\n    //     sessionStorage.setItem(\"label111\", this.label111);\n    //     console.log(\"存的数据\" + sessionStorage.getItem(\"label111\"));\n    //     // getEmployeeByStoreId(data.label).then((datas) => {\n    //     //   this.tableData = datas.data;\n    //     //   // console.log(datas.data);\n    //     // });\n    //   });\n    // },\n\n    //点击删除button删除规则\n    handleDelete() {\n      ElMessageBox.confirm(\"该规则将永久被删除，确定吗?\", \"Warning\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      });\n    },\n    //点击启用button启用规则\n    handleEnable() {\n      ElMessageBox.confirm(\"该规则将被启用，确定吗?\", \"Warning\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      });\n    },\n    //点击停用button停用规则\n    handleDeactivate() {\n      ElMessageBox.confirm(\"该规则将被停用，确定吗?\", \"Warning\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        // let state = '已停用';\n        ElMessage({\n          type: \"success\",\n          message: \"停用成功\"\n        });\n      }).catch(() => {\n        ElMessage({\n          type: \"info\",\n          message: \"取消停用\"\n        });\n      });\n    }\n  },\n  mounted() {\n    getStoreName().then(datas => {\n      this.storeData = [{\n        label: \"全国零售门店\",\n        children: [...datas.data]\n      }];\n      console.log(this.storeData);\n    });\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","ElMessageBox","OpenRules","CloseRules","CustomerRules","ClassesRules","getStoreName","getAllStore","OpenShopRules","inject","data","label111","lengthh","index","selectLabel","storeData","defaultProps","children","label","activeName","components","methods","handleNodeClick","$nextTick","then","datas","length","console","log","i","storeId","storeName","reload","sessionStorage","setItem","getItem","handleDelete","confirm","confirmButtonText","cancelButtonText","type","handleEnable","handleDeactivate","ElMessage","message","catch","mounted"],"sourceRoot":"","sources":["E:\\work\\vue\\schedule\\intelligent-schedule\\src\\views\\ShiftSchedule\\PersonalizationRules.vue"],"sourcesContent":["<template>\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <el-aside width=\"180px\">\r\n        <el-card class=\"left-nav\">\r\n          <el-tree\r\n            :data=\"storeData\"\r\n            :props=\"defaultProps\"\r\n            default-expand-all\r\n            highlight-current\r\n            node-key=\"nodeId\"\r\n            @node-click=\"handleNodeClick\"\r\n          ></el-tree>\r\n        </el-card>\r\n      </el-aside>\r\n      <el-container>\r\n        <el-header>\r\n          <el-card class=\"right-header\">\r\n            <!-- tab选择 -->\r\n            <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n              <el-tab-pane label=\"开店规则\" name=\"first\">\r\n                <open-rules />\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"关店规则\" name=\"second\">\r\n                <close-rules />\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"客流规则\" name=\"third\">\r\n                <customer-rules />\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"班次规则\" name=\"fourth\">\r\n                <classes-rules />\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </el-card>\r\n        </el-header>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { ElMessageBox } from \"element-plus\";\r\nimport OpenRules from \"./components/OpenShopRules.vue\";\r\nimport CloseRules from \"./components/CloseShopRules.vue\";\r\nimport CustomerRules from \"./components/CustomerRules.vue\";\r\nimport ClassesRules from \"./components/ClassesRules.vue\";\r\nimport { getStoreName, getAllStore } from \"@/api\";\r\nimport OpenShopRules from \"./components/OpenShopRules.vue\";\r\n\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      label111: -1,\r\n      lengthh: 0,\r\n      index: 0,\r\n      selectLabel: \"\",\r\n\r\n      // 左侧导航数据\r\n      data: \"\",\r\n      storeData: [],\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\",\r\n      },\r\n\r\n      activeName: \"first\",\r\n    };\r\n  },\r\n  components: {\r\n    OpenRules,\r\n    CloseRules,\r\n    CustomerRules,\r\n    ClassesRules,\r\n  },\r\n  methods: {\r\n    // 切换tree上的节点点击事件\r\n    handleNodeClick(data) {\r\n      this.$nextTick(() => {\r\n        // 获取所有门店信息\r\n        getAllStore().then((datas) => {\r\n          this.lengthh = datas.data.length;\r\n          console.log(\"lengthh:\" + this.lengthh);\r\n          for (let i = this.lengthh - 1; i >= 0; i--) {\r\n            console.log(\"id:\" + datas.data[i].storeId);\r\n            // console.log(data.label);\r\n            this.selectLabel = datas.data[i].storeName;\r\n            let label = data.label;\r\n            console.log(\"label:\" + label);\r\n            console.log(\"selectlabel:\" + this.selectLabel);\r\n            if (label == this.selectLabel) {\r\n              console.log(\"当前公司：\" + label);\r\n              this.label111 = datas.data[i].storeId;\r\n              this.reload();\r\n            }\r\n          }\r\n          if (this.label111 == -1) {\r\n            this.reload();\r\n          }\r\n          console.log(this.label111);\r\n          sessionStorage.setItem(\"label111\", this.label111);\r\n          console.log(\"存的数据\" + sessionStorage.getItem(\"label111\"));\r\n        });\r\n      });\r\n    },\r\n\r\n    // handleNodeClick(data) {\r\n    //   this.$nextTick(() => {\r\n    //     // this.$refs.tree.setCurrentKey(data.nodeId);\r\n    //     // 获取所有门店信息\r\n    //     getAllStore().then((datas) => {\r\n    //       // this.tableData = datas.data.length;\r\n    //       console.log(\"length:\" + datas.data.length);\r\n    //     });\r\n    //     console.log(data.label);\r\n    //     let label = data.label;\r\n    //     if (label == \"浙江总公司\") {\r\n    //       this.label111 = 1;\r\n    //       // this.$router.go(0);\r\n    //     } else if (label == \"上海分公司\") {\r\n    //       this.label111 = 2;\r\n    //       this.$router.go(0);\r\n    //     } else if (label == \"江苏分公司\") {\r\n    //       this.label111 = 3;\r\n    //       this.$router.go(0);\r\n    //     } else {\r\n    //       this.label111 = -1;\r\n    //       this.$router.go(0);\r\n    //     }\r\n    //     sessionStorage.setItem(\"label111\", this.label111);\r\n    //     console.log(\"存的数据\" + sessionStorage.getItem(\"label111\"));\r\n    //     // getEmployeeByStoreId(data.label).then((datas) => {\r\n    //     //   this.tableData = datas.data;\r\n    //     //   // console.log(datas.data);\r\n    //     // });\r\n    //   });\r\n    // },\r\n\r\n    //点击删除button删除规则\r\n    handleDelete() {\r\n      ElMessageBox.confirm(\"该规则将永久被删除，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      });\r\n    },\r\n    //点击启用button启用规则\r\n    handleEnable() {\r\n      ElMessageBox.confirm(\"该规则将被启用，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      });\r\n    },\r\n    //点击停用button停用规则\r\n    handleDeactivate() {\r\n      ElMessageBox.confirm(\"该规则将被停用，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          // let state = '已停用';\r\n          ElMessage({\r\n            type: \"success\",\r\n            message: \"停用成功\",\r\n          });\r\n        })\r\n        .catch(() => {\r\n          ElMessage({\r\n            type: \"info\",\r\n            message: \"取消停用\",\r\n          });\r\n        });\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    getStoreName().then((datas) => {\r\n      this.storeData = [\r\n        {\r\n          label: \"全国零售门店\",\r\n          children: [...datas.data],\r\n        },\r\n      ];\r\n      console.log(this.storeData);\r\n    });\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.main-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.el-aside {\r\n  overflow: hidden;\r\n}\r\n.el-main {\r\n  padding: 0;\r\n  margin-left: 20px;\r\n  margin-top: 20px;\r\n  width: 1050px;\r\n}\r\n.el-header {\r\n  padding: 0;\r\n  width: 1050px;\r\n}\r\n.left-nav {\r\n  width: 100%;\r\n  height: 600px;\r\n}\r\n.right-header {\r\n  margin-left: 20px;\r\n  width: 100%;\r\n  height: 600px;\r\n  padding: 0;\r\n}\r\n.el-tree{\r\n  font-size: 17px;\r\n}\r\n.btns {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.el-table {\r\n  margin-top: 20px;\r\n  height: 425px;\r\n}\r\n.el-link {\r\n  margin-left: 10px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}