{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-f68b88ba\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"common-layout\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_tree = _resolveComponent(\"el-tree\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_aside = _resolveComponent(\"el-aside\");\n  const _component_open_rules = _resolveComponent(\"open-rules\");\n  const _component_el_tab_pane = _resolveComponent(\"el-tab-pane\");\n  const _component_close_rules = _resolveComponent(\"close-rules\");\n  const _component_customer_rules = _resolveComponent(\"customer-rules\");\n  const _component_classes_rules = _resolveComponent(\"classes-rules\");\n  const _component_el_tabs = _resolveComponent(\"el-tabs\");\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_el_container = _resolveComponent(\"el-container\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_container, null, {\n    default: _withCtx(() => [_createVNode(_component_el_aside, {\n      width: \"180px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_card, {\n        class: \"left-nav\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_tree, {\n          data: $data.storeData,\n          props: $data.defaultProps,\n          \"default-expand-all\": \"\",\n          \"highlight-current\": \"\",\n          \"node-key\": \"nodeId\",\n          onNodeClick: $options.handleNodeClick\n        }, null, 8 /* PROPS */, [\"data\", \"props\", \"onNodeClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_container, null, {\n      default: _withCtx(() => [_createVNode(_component_el_header, null, {\n        default: _withCtx(() => [_createVNode(_component_el_card, {\n          class: \"right-header\"\n        }, {\n          default: _withCtx(() => [_createCommentVNode(\" tab选择 \"), _createVNode(_component_el_tabs, {\n            modelValue: $data.activeName,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.activeName = $event),\n            onTabClick: _ctx.handleClick\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_tab_pane, {\n              label: \"开店规则\",\n              name: \"first\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_open_rules)]),\n              _: 1 /* STABLE */\n            }), _createVNode(_component_el_tab_pane, {\n              label: \"关店规则\",\n              name: \"second\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_close_rules)]),\n              _: 1 /* STABLE */\n            }), _createVNode(_component_el_tab_pane, {\n              label: \"客流规则\",\n              name: \"third\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_customer_rules)]),\n              _: 1 /* STABLE */\n            }), _createVNode(_component_el_tab_pane, {\n              label: \"班次规则\",\n              name: \"fourth\"\n            }, {\n              default: _withCtx(() => [_createVNode(_component_classes_rules)]),\n              _: 1 /* STABLE */\n            })]),\n\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"modelValue\", \"onTabClick\"])]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"mappings":";;;EACOA,KAAK,EAAC;AAAe;;;;;;;;;;;;;uBAA1BC,oBAoCM,OApCNC,UAoCM,GAnCJC,aAkCeC;sBAjCb,MAWW,CAXXD,aAWWE;MAXDC,KAAK,EAAC;IAAO;wBACrB,MASU,CATVH,aASUI;QATDP,KAAK,EAAC;MAAU;0BACvB,MAOW,CAPXG,aAOWK;UANRC,IAAI,EAAEC,eAAS;UACfC,KAAK,EAAED,kBAAY;UACpB,oBAAkB,EAAlB,EAAkB;UAClB,mBAAiB,EAAjB,EAAiB;UACjB,UAAQ,EAAC,QAAQ;UAChBE,WAAU,EAAEC;;;;;;QAInBV,aAoBeC;wBAnBb,MAkBY,CAlBZD,aAkBYW;0BAjBV,MAgBU,CAhBVX,aAgBUI;UAhBDP,KAAK,EAAC;QAAc;4BAC3B,MAAc,CAAde,8BAAc,EACdZ,aAaUa;wBAbQN,gBAAU;uEAAVA,gBAAU;YAAGO,UAAS,EAAEC;;8BACxC,MAEc,CAFdf,aAEcgB;cAFDC,KAAK,EAAC,MAAM;cAACC,IAAI,EAAC;;gCAC7B,MAAc,CAAdlB,aAAcmB;;gBAEhBnB,aAEcgB;cAFDC,KAAK,EAAC,MAAM;cAACC,IAAI,EAAC;;gCAC7B,MAAe,CAAflB,aAAeoB;;gBAEjBpB,aAEcgB;cAFDC,KAAK,EAAC,MAAM;cAACC,IAAI,EAAC;;gCAC7B,MAAkB,CAAlBlB,aAAkBqB;;gBAEpBrB,aAEcgB;cAFDC,KAAK,EAAC,MAAM;cAACC,IAAI,EAAC;;gCAC7B,MAAiB,CAAjBlB,aAAiBsB","names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_container","_component_el_aside","width","_component_el_card","_component_el_tree","data","$data","props","onNodeClick","$options","_component_el_header","_createCommentVNode","_component_el_tabs","onTabClick","_ctx","_component_el_tab_pane","label","name","_component_open_rules","_component_close_rules","_component_customer_rules","_component_classes_rules"],"sourceRoot":"","sources":["E:\\work\\vue\\schedule\\intelligent-schedule\\src\\views\\ShiftSchedule\\PersonalizationRules.vue"],"sourcesContent":["<template>\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <el-aside width=\"180px\">\r\n        <el-card class=\"left-nav\">\r\n          <el-tree\r\n            :data=\"storeData\"\r\n            :props=\"defaultProps\"\r\n            default-expand-all\r\n            highlight-current\r\n            node-key=\"nodeId\"\r\n            @node-click=\"handleNodeClick\"\r\n          ></el-tree>\r\n        </el-card>\r\n      </el-aside>\r\n      <el-container>\r\n        <el-header>\r\n          <el-card class=\"right-header\">\r\n            <!-- tab选择 -->\r\n            <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n              <el-tab-pane label=\"开店规则\" name=\"first\">\r\n                <open-rules />\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"关店规则\" name=\"second\">\r\n                <close-rules />\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"客流规则\" name=\"third\">\r\n                <customer-rules />\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"班次规则\" name=\"fourth\">\r\n                <classes-rules />\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </el-card>\r\n        </el-header>\r\n      </el-container>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { ElMessageBox } from \"element-plus\";\r\nimport OpenRules from \"./components/OpenShopRules.vue\";\r\nimport CloseRules from \"./components/CloseShopRules.vue\";\r\nimport CustomerRules from \"./components/CustomerRules.vue\";\r\nimport ClassesRules from \"./components/ClassesRules.vue\";\r\nimport { getStoreName, getAllStore } from \"@/api\";\r\nimport OpenShopRules from \"./components/OpenShopRules.vue\";\r\n\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      label111: -1,\r\n      lengthh: 0,\r\n      index: 0,\r\n      selectLabel: \"\",\r\n\r\n      // 左侧导航数据\r\n      data: \"\",\r\n      storeData: [],\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\",\r\n      },\r\n\r\n      activeName: \"first\",\r\n    };\r\n  },\r\n  components: {\r\n    OpenRules,\r\n    CloseRules,\r\n    CustomerRules,\r\n    ClassesRules,\r\n  },\r\n  methods: {\r\n    // 切换tree上的节点点击事件\r\n    handleNodeClick(data) {\r\n      this.$nextTick(() => {\r\n        // 获取所有门店信息\r\n        getAllStore().then((datas) => {\r\n          this.lengthh = datas.data.length;\r\n          console.log(\"lengthh:\" + this.lengthh);\r\n          for (let i = this.lengthh - 1; i >= 0; i--) {\r\n            console.log(\"id:\" + datas.data[i].storeId);\r\n            // console.log(data.label);\r\n            this.selectLabel = datas.data[i].storeName;\r\n            let label = data.label;\r\n            console.log(\"label:\" + label);\r\n            console.log(\"selectlabel:\" + this.selectLabel);\r\n            if (label == this.selectLabel) {\r\n              console.log(\"当前公司：\" + label);\r\n              this.label111 = datas.data[i].storeId;\r\n              this.reload();\r\n            }\r\n          }\r\n          if (this.label111 == -1) {\r\n            this.reload();\r\n          }\r\n          console.log(this.label111);\r\n          sessionStorage.setItem(\"label111\", this.label111);\r\n          console.log(\"存的数据\" + sessionStorage.getItem(\"label111\"));\r\n        });\r\n      });\r\n    },\r\n\r\n    // handleNodeClick(data) {\r\n    //   this.$nextTick(() => {\r\n    //     // this.$refs.tree.setCurrentKey(data.nodeId);\r\n    //     // 获取所有门店信息\r\n    //     getAllStore().then((datas) => {\r\n    //       // this.tableData = datas.data.length;\r\n    //       console.log(\"length:\" + datas.data.length);\r\n    //     });\r\n    //     console.log(data.label);\r\n    //     let label = data.label;\r\n    //     if (label == \"浙江总公司\") {\r\n    //       this.label111 = 1;\r\n    //       // this.$router.go(0);\r\n    //     } else if (label == \"上海分公司\") {\r\n    //       this.label111 = 2;\r\n    //       this.$router.go(0);\r\n    //     } else if (label == \"江苏分公司\") {\r\n    //       this.label111 = 3;\r\n    //       this.$router.go(0);\r\n    //     } else {\r\n    //       this.label111 = -1;\r\n    //       this.$router.go(0);\r\n    //     }\r\n    //     sessionStorage.setItem(\"label111\", this.label111);\r\n    //     console.log(\"存的数据\" + sessionStorage.getItem(\"label111\"));\r\n    //     // getEmployeeByStoreId(data.label).then((datas) => {\r\n    //     //   this.tableData = datas.data;\r\n    //     //   // console.log(datas.data);\r\n    //     // });\r\n    //   });\r\n    // },\r\n\r\n    //点击删除button删除规则\r\n    handleDelete() {\r\n      ElMessageBox.confirm(\"该规则将永久被删除，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      });\r\n    },\r\n    //点击启用button启用规则\r\n    handleEnable() {\r\n      ElMessageBox.confirm(\"该规则将被启用，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      });\r\n    },\r\n    //点击停用button停用规则\r\n    handleDeactivate() {\r\n      ElMessageBox.confirm(\"该规则将被停用，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          // let state = '已停用';\r\n          ElMessage({\r\n            type: \"success\",\r\n            message: \"停用成功\",\r\n          });\r\n        })\r\n        .catch(() => {\r\n          ElMessage({\r\n            type: \"info\",\r\n            message: \"取消停用\",\r\n          });\r\n        });\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    getStoreName().then((datas) => {\r\n      this.storeData = [\r\n        {\r\n          label: \"全国零售门店\",\r\n          children: [...datas.data],\r\n        },\r\n      ];\r\n      console.log(this.storeData);\r\n    });\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.main-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.el-aside {\r\n  overflow: hidden;\r\n}\r\n.el-main {\r\n  padding: 0;\r\n  margin-left: 20px;\r\n  margin-top: 20px;\r\n  width: 1050px;\r\n}\r\n.el-header {\r\n  padding: 0;\r\n  width: 1050px;\r\n}\r\n.left-nav {\r\n  width: 100%;\r\n  height: 600px;\r\n}\r\n.right-header {\r\n  margin-left: 20px;\r\n  width: 100%;\r\n  height: 600px;\r\n  padding: 0;\r\n}\r\n.el-tree{\r\n  font-size: 17px;\r\n}\r\n.btns {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.el-table {\r\n  margin-top: 20px;\r\n  height: 425px;\r\n}\r\n.el-link {\r\n  margin-left: 10px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}