{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nimport { ElMessageBox, ElMessage } from \"element-plus\";\nimport { getStoreName, getEmployee, updateEmployeeStateOne, updateEmployeeStateZero, getEmployeeByEmployeeName, getEmployeeByPosition, getEmployeeByEmployeeNameAndPosition, deleteEmployee, deletePreferenceByEmployeeId, getEmployeeStoreName, updateEmployee, getEmployeeByStoreId, getPreferenceHaveThree, insertPreferenceHaveThree, updatePreferenceHaveThree, deletePreferenceHaveThree, getPreferenceHaveTwo, insertPreferenceHaveTwo, updatePreferenceHaveTwo, deletePreferenceHaveTwo, getPreferenceHaveOne, insertPreferenceHaveOne, updatePreferenceHaveOne, deletePreferenceHaveOne, getAllStore } from \"@/api\";\nexport default {\n  inject: [\"reload\"],\n  data() {\n    return {\n      a: \"\",\n      likeDay: [],\n      likeTime: [],\n      dayAndWeek: \"\",\n      fullTime: \"\",\n      startTime: \"\",\n      endTime: \"\",\n      startTime1: \"\",\n      endTime1: \"\",\n      value3: ref([]),\n      inputEmployeeName: \"\",\n      value1: \"\",\n      // 岗位下拉框\n      options1: [{\n        value: \"全部\",\n        label: \"全部\"\n      }, {\n        value: \"门店经理\",\n        label: \"门店经理\"\n      }, {\n        value: \"副经理\",\n        label: \"副经理\"\n      }, {\n        value: \"小组长\",\n        label: \"小组长\"\n      }, {\n        value: \"店员\",\n        label: \"店员\"\n      }],\n      // 左侧导航数据\n      storeData: [],\n      defaultProps: {\n        children: \"children\",\n        label: \"label\"\n      },\n      //列表数据\n      tableData: [],\n      tableDatas: {\n        employeeId: \"\",\n        employeeName: \"\",\n        // storeId: \"\",\n        position: \"\",\n        email: \"\",\n        phone: \"\",\n        state: \"\"\n      },\n      //编辑弹窗\n      formData: {\n        field101: \"\",\n        //员工姓名\n        field102: \"\",\n        //员工编号\n        field103: \"\",\n        //岗位\n        field105: \"\",\n        //员工电话\n        field106: {},\n        //所属门店\n        field107: \"\",\n        //员工电邮\n        field108: \"\",\n        //周工作时长\n        field109: \"\" //日工作时长\n      },\n\n      rules: {\n        field101: [{\n          required: true,\n          message: \"请输入员工姓名：\",\n          trigger: \"blur\"\n        }],\n        field102: [{\n          required: true,\n          message: \"请输入员工编号\",\n          trigger: \"blur\"\n        }],\n        field103: [{\n          required: true,\n          message: \"请输入岗位\",\n          trigger: \"change\"\n        }],\n        field105: [{\n          required: true,\n          message: \"请输入员工电话\",\n          trigger: \"blur\"\n        }],\n        field106: [{\n          required: true,\n          message: \"请选择所属门店\",\n          trigger: \"change\"\n        }],\n        field107: [{\n          required: true,\n          message: \"请输入员工电邮\",\n          trigger: \"blur\"\n        }]\n      },\n      field103Options: [{\n        label: \"门店经理\",\n        value: \"门店经理\"\n      }, {\n        label: \"副经理\",\n        value: \"副经理\"\n      }, {\n        label: \"小组长\",\n        value: \"小组长\"\n      }, {\n        label: \"店员\",\n        value: \"店员\"\n      }],\n      field106Options: [],\n      options: [{\n        value: \"1\",\n        label: \"星期一\"\n      }, {\n        value: \"2\",\n        label: \"星期二\"\n      }, {\n        value: \"3\",\n        label: \"星期三\"\n      }, {\n        value: \"4\",\n        label: \"星期四\"\n      }, {\n        value: \"5\",\n        label: \"星期五\"\n      }, {\n        value: \"6\",\n        label: \"星期六\"\n      }, {\n        value: \"7\",\n        label: \"星期日\"\n      }],\n      dialogUpdateVisible: false\n    };\n  },\n  methods: {\n    //设置树的选中状态\n    handleNodeClick(data) {\n      this.$nextTick(() => {\n        // this.$refs.tree.setCurrentKey(data.nodeId);\n        // console.log(\"我的\" + data.label);\n        if (data.label === \"全国零售门店\") {\n          getEmployee().then(datas => {\n            this.tableData = datas.data;\n            // console.log(datas.data);\n          });\n        } else {\n          getEmployeeByStoreId(data.label).then(datas => {\n            this.tableData = datas.data;\n            // console.log(datas.data);\n          });\n        }\n      });\n    },\n\n    //跳转到添加员工页\n    addEmployee() {\n      this.$router.push({\n        name: \"addEmployee\"\n      });\n    },\n    //点击编辑button编辑员工\n    handleEdit(row) {\n      this.dialogUpdateVisible = true;\n      getAllStore().then(datas => {\n        this.field106Options = datas.data;\n        getEmployeeStoreName(row.employeeId).then(datas => {\n          this.field106Options.forEach(element => {\n            if (element.storeId === datas.data.storeId) {\n              this.formData.field106 = element;\n            }\n          });\n        });\n      });\n      this.formData.field102 = row.employeeId;\n      this.formData.field101 = row.employeeName;\n      this.formData.field105 = row.phone;\n      this.formData.field103 = row.position;\n      this.formData.field107 = row.email;\n      getPreferenceHaveOne(row.employeeId).then(datas => {\n        if (datas.data.length != 0) {\n          this.likeDay = datas.data[0].preferValue.split(\",\");\n          this.value3 = this.likeDay;\n        } else {\n          this.value3 = this.$options.data().value3;\n        }\n      });\n      getPreferenceHaveTwo(row.employeeId).then(datas => {\n        if (datas.data.length != 0) {\n          this.likeTime = datas.data[0].preferValue.split(\",\");\n        } else {\n          this.startTime = this.$options.data().startTime;\n          this.startTime1 = this.$options.data().startTime1;\n          this.endTime = this.$options.data().endTime;\n          this.endTime1 = this.$options.data().endTime1;\n        }\n        if (this.likeTime.length == 1) {\n          this.startTime = this.likeTime[0].slice(0, 5);\n          this.endTime = this.likeTime[0].slice(6, 11);\n        } else if (this.likeTime.length == 2) {\n          this.startTime = this.likeTime[0].slice(0, 5);\n          this.endTime = this.likeTime[0].slice(6, 11);\n          this.startTime1 = this.likeTime[1].slice(0, 5);\n          this.endTime1 = this.likeTime[1].slice(6, 11);\n        }\n      });\n      getPreferenceHaveThree(row.employeeId).then(datas => {\n        if (datas.data.length != 0) {\n          this.formData.field108 = eval(\"(\" + datas.data[0].preferValue + \")\").week;\n          this.formData.field109 = eval(\"(\" + datas.data[0].preferValue + \")\").day;\n        } else {\n          this.formData.field108 = this.$options.data().formData.field108;\n          this.formData.field109 = this.$options.data().formData.field109;\n        }\n      });\n    },\n    //点击确认button确认编辑\n    async handelUpdate() {\n      //更新员工信息\n      updateEmployee(this.formData.field102, this.formData.field101, this.formData.field106.storeId, this.formData.field107, this.formData.field103, this.formData.field105);\n      //更新员工工作日偏好\n      getPreferenceHaveOne(this.formData.field102).then(datas => {\n        // console.log(1);\n        if (this.value3.length != 0 && datas.data.length == 0) {\n          insertPreferenceHaveOne(this.formData.field102, this.value3.join(\",\"));\n        } else if (this.value3.length != 0 && datas.data.length != 0) {\n          updatePreferenceHaveOne(this.formData.field102, this.value3.join(\",\"));\n        } else if (this.value3.length == 0 && datas.data.length != 0) {\n          deletePreferenceHaveOne(this.formData.field102);\n        }\n      });\n      //更新员工工作时间偏好\n      getPreferenceHaveTwo(this.formData.field102).then(datas => {\n        console.log(2);\n        if (this.startTime != \"\" && this.endTime != \"\" && this.startTime1 != \"\" && this.endTime1 != \"\" && datas.data.length == 0) {\n          this.fullTime = this.startTime + \"-\" + this.endTime + \",\" + this.startTime1 + \"-\" + this.endTime1;\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime != \"\" && this.endTime != \"\" && datas.data.length == 0) {\n          this.fullTime = this.startTime + \"-\" + this.endTime;\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime1 != \"\" && this.endTime1 != \"\" && datas.data.length == 0) {\n          this.fullTime = this.startTime1 + \"-\" + this.endTime1;\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime != \"\" && this.endTime != \"\" && this.startTime1 != \"\" && this.endTime1 != \"\" && datas.data.length != 0) {\n          this.fullTime = this.startTime + \"-\" + this.endTime + \",\" + this.startTime1 + \"-\" + this.endTime1;\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime != \"\" && this.endTime != \"\" && datas.data.length != 0) {\n          this.fullTime = this.startTime + \"-\" + this.endTime;\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (this.startTime1 != \"\" && this.endTime1 != \"\" && datas.data.length != 0) {\n          this.fullTime = this.startTime1 + \"-\" + this.endTime1;\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\n        } else if (datas.data.length != 0 && this.startTime == \"\" && this.endTime == \"\" && this.startTime1 == \"\" && this.endTime1 == \"\") {\n          deletePreferenceHaveTwo(this.formData.field102);\n        }\n      });\n      //更新员工工作时长偏好\n      getPreferenceHaveThree(this.formData.field102).then(datas => {\n        console.log(3);\n        if (this.formData.field108 != \"\" && this.formData.field109 != \"\" && datas.data.length == 0) {\n          this.a = JSON.stringify({\n            day: parseInt(this.formData.field109),\n            week: parseInt(this.formData.field108)\n          });\n          insertPreferenceHaveThree(this.formData.field102, this.a);\n        } else if (this.formData.field108 != \"\" && datas.data.length == 0) {\n          this.a = JSON.stringify({\n            week: parseInt(this.formData.field108)\n          });\n          insertPreferenceHaveThree(this.formData.field102, this.a);\n        } else if (this.formData.field109 != \"\" && datas.data.length == 0) {\n          this.a = JSON.stringify({\n            day: parseInt(this.formData.field109)\n          });\n          insertPreferenceHaveThree(this.formData.field102, this.a);\n        } else if (this.formData.field108 != \"\" && this.formData.field109 != \"\" && datas.data.length != 0) {\n          this.a = JSON.stringify({\n            day: parseInt(this.formData.field109),\n            week: parseInt(this.formData.field108)\n          });\n          updatePreferenceHaveThree(this.formData.field102, this.a);\n        } else if (datas.data.length != 0 && this.formData.field108 != \"\" && this.formData.field109 == \"\") {\n          this.a = JSON.stringify({\n            week: parseInt(this.formData.field108)\n          });\n          updatePreferenceHaveThree(this.formData.field102, this.a);\n        } else if (datas.data.length != 0 && this.formData.field109 != \"\" && this.formData.field108 == \"\") {\n          this.a = JSON.stringify({\n            day: parseInt(this.formData.field109)\n          });\n          updatePreferenceHaveThree(this.formData.field102, this.a);\n        } else if (this.formData.field108 == \"\" && this.formData.field109 == \"\" && datas.data.length != 0) {\n          deletePreferenceHaveThree(this.formData.field102);\n        }\n      });\n      this.dialogUpdateVisible = false;\n      await this.reload();\n      ElMessage({\n        type: \"success\",\n        message: \"编辑员工成功\"\n      });\n    },\n    //点击取消button取消编辑\n    cancleUpdate() {\n      this.dialogUpdateVisible = false;\n      this.value3 = ref([]);\n      this.startTime = \"\";\n      this.startTime1 = \"\";\n      this.endTime = \"\";\n      this.endTime1 = \"\";\n      this.formData.field108 = \"\";\n      this.formData.field109 = \"\";\n      this.likeTime = [];\n      // console.log(this.formData.field106.storeId);\n      // console.log(this.value3);\n      // console.log(this.startTime);\n      // console.log(this.startTime1);\n      // console.log(this.endTime);\n      // console.log(this.endTime1);\n      // console.log(this.formData.field108);\n      // console.log(this.formData.field109);\n    },\n\n    // 查询门店\n    getEmployees() {\n      if (this.value1 == \"全部\") {\n        if (this.inputEmployeeName == \"\") {\n          getEmployee().then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        } else if (this.inputEmployeeName != \"\") {\n          getEmployeeByEmployeeName(this.inputEmployeeName).then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        }\n      } else {\n        if (this.inputEmployeeName == \"\" && this.value1 == \"\") {\n          getEmployee().then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        } else if (this.value1 == \"\" && this.inputEmployeeName != \"\") {\n          getEmployeeByEmployeeName(this.inputEmployeeName).then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        } else if (this.inputEmployeeName == \"\" && this.value1 != \"\") {\n          getEmployeeByPosition(this.value1).then(datas => {\n            this.tableData = datas.data;\n            console.log(datas.data);\n          });\n        } else {\n          getEmployeeByEmployeeNameAndPosition(this.inputEmployeeName, this.value1).then(datas => {\n            this.tableData = datas.data;\n            console.log(this.value);\n            console.log(datas.data);\n          });\n        }\n      }\n    },\n    //点击删除button删除员工\n    handleDelete(row) {\n      console.log(row.employeeId);\n      ElMessageBox.confirm(\"该员工将永久被删除，确定吗?\", \"Warning\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(async () => {\n        deletePreferenceByEmployeeId(row.employeeId);\n        deleteEmployee(row.employeeId);\n        await this.reload();\n        ElMessage({\n          type: \"success\",\n          message: \"删除员工成功\"\n        });\n      });\n    },\n    //点击启用button启用员工\n    handleEnable(row) {\n      console.log(row.employeeId);\n      ElMessageBox.confirm(\"该员工将被启用，确定吗?\", \"Warning\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(async () => {\n        updateEmployeeStateZero(row.employeeId);\n        await this.reload();\n        ElMessage({\n          type: \"success\",\n          message: \"启用员工成功\"\n        });\n      });\n    },\n    //点击停用button停用员工\n    handleDeactivate(row) {\n      console.log(row.employeeId);\n      ElMessageBox.confirm(\"该员工将被停用，确定吗?\", \"Warning\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(async () => {\n        updateEmployeeStateOne(row.employeeId);\n        await this.reload();\n        ElMessage({\n          type: \"success\",\n          message: \"停用员工成功\"\n        });\n      });\n    },\n    // 重置门店\n    resetTextAndSelect() {\n      this.value1 = \"\";\n      this.inputEmployeeName = \"\";\n    }\n  },\n  mounted() {\n    // 获取所有门店信息\n    getEmployee().then(datas => {\n      this.tableData = datas.data;\n      // console.log(datas.data);\n    });\n\n    getStoreName().then(datas => {\n      this.storeData = [{\n        label: \"全国零售门店\",\n        children: [...datas.data]\n      }];\n      // console.log(...datas.data);\n    });\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","ElMessageBox","ElMessage","getStoreName","getEmployee","updateEmployeeStateOne","updateEmployeeStateZero","getEmployeeByEmployeeName","getEmployeeByPosition","getEmployeeByEmployeeNameAndPosition","deleteEmployee","deletePreferenceByEmployeeId","getEmployeeStoreName","updateEmployee","getEmployeeByStoreId","getPreferenceHaveThree","insertPreferenceHaveThree","updatePreferenceHaveThree","deletePreferenceHaveThree","getPreferenceHaveTwo","insertPreferenceHaveTwo","updatePreferenceHaveTwo","deletePreferenceHaveTwo","getPreferenceHaveOne","insertPreferenceHaveOne","updatePreferenceHaveOne","deletePreferenceHaveOne","getAllStore","inject","data","a","likeDay","likeTime","dayAndWeek","fullTime","startTime","endTime","startTime1","endTime1","value3","inputEmployeeName","value1","options1","value","label","storeData","defaultProps","children","tableData","tableDatas","employeeId","employeeName","position","email","phone","state","formData","field101","field102","field103","field105","field106","field107","field108","field109","rules","required","message","trigger","field103Options","field106Options","options","dialogUpdateVisible","methods","handleNodeClick","$nextTick","then","datas","addEmployee","$router","push","name","handleEdit","row","forEach","element","storeId","length","preferValue","split","$options","slice","eval","week","day","handelUpdate","join","console","log","JSON","stringify","parseInt","reload","type","cancleUpdate","getEmployees","handleDelete","confirm","confirmButtonText","cancelButtonText","handleEnable","handleDeactivate","resetTextAndSelect","mounted"],"sourceRoot":"","sources":["E:\\work\\vue\\schedule\\intelligent-schedule\\src\\views\\StoreManagement\\Employee.vue"],"sourcesContent":["<template>\r\n  <div class=\"common-layout\">\r\n    <el-container>\r\n      <el-aside width=\"180px\">\r\n        <el-card class=\"left-nav\">\r\n          <el-tree\r\n            :data=\"storeData\"\r\n            :props=\"defaultProps\"\r\n            default-expand-all\r\n            highlight-current\r\n            node-key=\"nodeId\"\r\n            @node-click=\"handleNodeClick\"\r\n          ></el-tree>\r\n        </el-card>\r\n      </el-aside>\r\n      <el-container>\r\n        <el-header>\r\n          <el-card class=\"right-header\">\r\n            <el-form>\r\n              <el-row :gutter=\"30\">\r\n                <el-col :span=\"6\">\r\n                  <el-form-item label=\"姓名：\">\r\n                    <el-input\r\n                      v-model=\"inputEmployeeName\"\r\n                      placeholder=\"请输入姓名\"\r\n                    ></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"岗位：\">\r\n                    <el-cascader\r\n                      v-model=\"value1\"\r\n                      :options=\"options1\"\r\n                      :props=\"{ expandTrigger: 'hover' }\"\r\n                      @change=\"handleChange1\"\r\n                    ></el-cascader>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"10\">\r\n                  <el-form-item class=\"form-btn\">\r\n                    <el-button @click=\"getEmployees\" type=\"primary\"\r\n                      >查询</el-button\r\n                    >\r\n                    <el-button @click=\"resetTextAndSelect\">重置</el-button>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n            </el-form>\r\n          </el-card>\r\n        </el-header>\r\n        <el-main>\r\n          <el-card class=\"main-card\">\r\n            <!-- 按钮区域 -->\r\n            <div class=\"btns\">\r\n              <div class=\"left-btn\">\r\n                <el-button plain type=\"primary\" @click=\"addEmployee\"\r\n                  >新建员工</el-button\r\n                >\r\n              </div>\r\n            </div>\r\n            <!-- 列表区域 -->\r\n            <el-table :data=\"tableData\" style=\"width: 100%\" border stripe>\r\n              <el-table-column\r\n                label=\"编号\"\r\n                prop=\"employeeId\"\r\n                width=\"60px\"\r\n                align=\"center\"\r\n              />\r\n              <el-table-column\r\n                prop=\"employeeName\"\r\n                label=\"姓名\"\r\n                width=\"100\"\r\n                align=\"center\"\r\n              />\r\n              <el-table-column prop=\"position\" label=\"岗位\" align=\"center\" />\r\n              <el-table-column prop=\"email\" label=\"邮箱\" align=\"center\" />\r\n              <el-table-column prop=\"phone\" label=\"联系电话\" align=\"center\" />\r\n              <el-table-column\r\n                prop=\"state\"\r\n                label=\"状态\"\r\n                width=\"100\"\r\n                align=\"center\"\r\n              >\r\n                <template v-slot=\"scope\">\r\n                  <el-tag type=\"success\" v-if=\"scope.row.state === 1\"\r\n                    >已启用</el-tag\r\n                  >\r\n                  <el-tag type=\"danger\" v-else>已停用</el-tag>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"操作\" width=\"180px\" align=\"center\">\r\n                <template v-slot=\"scope\">\r\n                  <el-link\r\n                    type=\"primary\"\r\n                    :icon=\"Edit\"\r\n                    @click=\"handleEdit(scope.row)\"\r\n                    title=\"编辑员工内容\"\r\n                    >编辑</el-link\r\n                  >\r\n                  <el-link\r\n                    type=\"primary\"\r\n                    :icon=\"Delete\"\r\n                    @click=\"handleDelete(scope.row)\"\r\n                    title=\"删除员工内容\"\r\n                    >删除</el-link\r\n                  >\r\n                  <el-link\r\n                    type=\"primary\"\r\n                    :icon=\"Enable\"\r\n                    @click=\"handleEnable(scope.row)\"\r\n                    title=\"启用门店内容\"\r\n                    v-if=\"scope.row.state === 0\"\r\n                    >启用</el-link\r\n                  >\r\n                  <el-link\r\n                    type=\"primary\"\r\n                    :icon=\"Deactivate\"\r\n                    @click=\"handleDeactivate(scope.row)\"\r\n                    title=\"停用门店内容\"\r\n                    v-else\r\n                    >停用</el-link\r\n                  >\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-card>\r\n        </el-main>\r\n      </el-container>\r\n\r\n      <!-- 编辑弹窗 -->\r\n      <el-dialog title=\"编辑\" v-model=\"dialogUpdateVisible\">\r\n        <el-row :gutter=\"15\">\r\n          <el-form\r\n            ref=\"elForm\"\r\n            :model=\"formData\"\r\n            :rules=\"rules\"\r\n            size=\"medium\"\r\n            label-width=\"100px\"\r\n          >\r\n            <el-row class=\"one\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"员工编号：\" prop=\"field102\">\r\n                  <el-input\r\n                    v-model=\"formData.field102\"\r\n                    disabled\r\n                    placeholder=\"请输入员工编号\"\r\n                    clearable\r\n                    :style=\"{ width: '100%' }\"\r\n                  >\r\n                  </el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"员工姓名：\" prop=\"field101\">\r\n                  <el-input\r\n                    v-model=\"formData.field101\"\r\n                    placeholder=\"请输入员工姓名：\"\r\n                    clearable\r\n                    :style=\"{ width: '100%' }\"\r\n                  >\r\n                  </el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row class=\"two\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"所属门店：\" prop=\"field106\">\r\n                  <el-select\r\n                    v-model=\"formData.field106\"\r\n                    value-key=\"storeId\"\r\n                    placeholder=\"请选择所属门店\"\r\n                    clearable\r\n                    :style=\"{ width: '100%' }\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"item in field106Options\"\r\n                      :key=\"item.storeId\"\r\n                      :label=\"item.storeName\"\r\n                      :value=\"item\"\r\n                      :disabled=\"item.disabled\"\r\n                    ></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"员工电话：\" prop=\"field105\">\r\n                  <el-input\r\n                    v-model=\"formData.field105\"\r\n                    placeholder=\"请输入员工电话\"\r\n                    clearable\r\n                    :style=\"{ width: '100%' }\"\r\n                  >\r\n                  </el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row class=\"three\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"岗位：\" prop=\"field103\">\r\n                  <el-select\r\n                    v-model=\"formData.field103\"\r\n                    placeholder=\"请输入岗位\"\r\n                    clearable\r\n                    :style=\"{ width: '100%' }\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"(item, employeeId) in field103Options\"\r\n                      :key=\"employeeId\"\r\n                      :label=\"item.label\"\r\n                      :value=\"item.value\"\r\n                      :disabled=\"item.disabled\"\r\n                    ></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"员工电邮：\" prop=\"field107\">\r\n                  <el-input\r\n                    v-model=\"formData.field107\"\r\n                    placeholder=\"请输入员工电邮\"\r\n                    clearable\r\n                    :style=\"{ width: '100%' }\"\r\n                  >\r\n                  </el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row class=\"four\">\r\n              <el-col :span=\"20\">\r\n                <el-form-item label=\"工作日偏好：\" prop=\"value3\">\r\n                  <el-select\r\n                    v-model=\"value3\"\r\n                    clearable\r\n                    multiple\r\n                    collapse-tags\r\n                    collapse-tags-tooltip\r\n                    placeholder=\"请选择工作日偏好\"\r\n                    :style=\"{ width: '100%' }\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"item in options\"\r\n                      :key=\"item.value\"\r\n                      :label=\"item.label\"\r\n                      :value=\"item.value\"\r\n                    />\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row class=\"five\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"时间偏好一：\" prop=\"startTime\">\r\n                  <el-time-select\r\n                    v-model=\"startTime\"\r\n                    :max-time=\"endTime\"\r\n                    class=\"mr-4\"\r\n                    placeholder=\"开始时间\"\r\n                    start=\"08:00\"\r\n                    step=\"00:30\"\r\n                    end=\"23:00\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item prop=\"endTime\">\r\n                  <el-time-select\r\n                    v-model=\"endTime\"\r\n                    :min-time=\"startTime\"\r\n                    :max-time=\"startTime1\"\r\n                    placeholder=\"结束时间\"\r\n                    start=\"08:00\"\r\n                    step=\"00:30\"\r\n                    end=\"23:00\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row class=\"five\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"时间偏好二：\" prop=\"startTime1\">\r\n                  <el-time-select\r\n                    v-model=\"startTime1\"\r\n                    :min-time=\"endTime\"\r\n                    :max-time=\"endTime1\"\r\n                    class=\"mr-4\"\r\n                    placeholder=\"开始时间\"\r\n                    start=\"08:00\"\r\n                    step=\"00:30\"\r\n                    end=\"23:00\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item prop=\"endTime1\">\r\n                  <el-time-select\r\n                    v-model=\"endTime1\"\r\n                    :min-time=\"startTime1\"\r\n                    placeholder=\"结束时间\"\r\n                    start=\"08:00\"\r\n                    step=\"00:30\"\r\n                    end=\"23:00\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row class=\"six\">\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"周工作时长：\" prop=\"field108\">\r\n                  <el-input\r\n                    v-model=\"formData.field108\"\r\n                    placeholder=\"请输入周工作时长偏好\"\r\n                    clearable\r\n                    :style=\"{ width: '100%' }\"\r\n                  >\r\n                  </el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"日工作时长：\" prop=\"field109\">\r\n                  <el-input\r\n                    v-model=\"formData.field109\"\r\n                    placeholder=\"请输入日工作时长偏好\"\r\n                    clearable\r\n                    :style=\"{ width: '100%' }\"\r\n                  >\r\n                  </el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </el-form>\r\n        </el-row>\r\n        <template v-slot:footer>\r\n          <el-button @click=\"cancleUpdate\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handelUpdate\">确定</el-button>\r\n        </template>\r\n      </el-dialog>\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { ElMessageBox, ElMessage } from \"element-plus\";\r\nimport {\r\n  getStoreName,\r\n  getEmployee,\r\n  updateEmployeeStateOne,\r\n  updateEmployeeStateZero,\r\n  getEmployeeByEmployeeName,\r\n  getEmployeeByPosition,\r\n  getEmployeeByEmployeeNameAndPosition,\r\n  deleteEmployee,\r\n  deletePreferenceByEmployeeId,\r\n  getEmployeeStoreName,\r\n  updateEmployee,\r\n  getEmployeeByStoreId,\r\n  getPreferenceHaveThree,\r\n  insertPreferenceHaveThree,\r\n  updatePreferenceHaveThree,\r\n  deletePreferenceHaveThree,\r\n  getPreferenceHaveTwo,\r\n  insertPreferenceHaveTwo,\r\n  updatePreferenceHaveTwo,\r\n  deletePreferenceHaveTwo,\r\n  getPreferenceHaveOne,\r\n  insertPreferenceHaveOne,\r\n  updatePreferenceHaveOne,\r\n  deletePreferenceHaveOne,\r\n  getAllStore,\r\n} from \"@/api\";\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      a: \"\",\r\n      likeDay: [],\r\n      likeTime: [],\r\n      dayAndWeek: \"\",\r\n      fullTime: \"\",\r\n      startTime: \"\",\r\n      endTime: \"\",\r\n      startTime1: \"\",\r\n      endTime1: \"\",\r\n      value3: ref([]),\r\n      inputEmployeeName: \"\",\r\n      value1: \"\",\r\n      // 岗位下拉框\r\n      options1: [\r\n        {\r\n          value: \"全部\",\r\n          label: \"全部\",\r\n        },\r\n        {\r\n          value: \"门店经理\",\r\n          label: \"门店经理\",\r\n        },\r\n        {\r\n          value: \"副经理\",\r\n          label: \"副经理\",\r\n        },\r\n        {\r\n          value: \"小组长\",\r\n          label: \"小组长\",\r\n        },\r\n        {\r\n          value: \"店员\",\r\n          label: \"店员\",\r\n        },\r\n      ],\r\n      // 左侧导航数据\r\n      storeData: [],\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"label\",\r\n      },\r\n      //列表数据\r\n      tableData: [],\r\n      tableDatas: {\r\n        employeeId: \"\",\r\n        employeeName: \"\",\r\n        // storeId: \"\",\r\n        position: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        state: \"\",\r\n      },\r\n      //编辑弹窗\r\n      formData: {\r\n        field101: \"\", //员工姓名\r\n        field102: \"\", //员工编号\r\n        field103: \"\", //岗位\r\n        field105: \"\", //员工电话\r\n        field106: {}, //所属门店\r\n        field107: \"\", //员工电邮\r\n        field108: \"\", //周工作时长\r\n        field109: \"\", //日工作时长\r\n      },\r\n      rules: {\r\n        field101: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工姓名：\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field102: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工编号\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field103: [\r\n          {\r\n            required: true,\r\n            message: \"请输入岗位\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        field105: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工电话\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        field106: [\r\n          {\r\n            required: true,\r\n            message: \"请选择所属门店\",\r\n            trigger: \"change\",\r\n          },\r\n        ],\r\n        field107: [\r\n          {\r\n            required: true,\r\n            message: \"请输入员工电邮\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      field103Options: [\r\n        {\r\n          label: \"门店经理\",\r\n          value: \"门店经理\",\r\n        },\r\n        {\r\n          label: \"副经理\",\r\n          value: \"副经理\",\r\n        },\r\n        {\r\n          label: \"小组长\",\r\n          value: \"小组长\",\r\n        },\r\n        {\r\n          label: \"店员\",\r\n          value: \"店员\",\r\n        },\r\n      ],\r\n      field106Options: [],\r\n      options: [\r\n        {\r\n          value: \"1\",\r\n          label: \"星期一\",\r\n        },\r\n        {\r\n          value: \"2\",\r\n          label: \"星期二\",\r\n        },\r\n        {\r\n          value: \"3\",\r\n          label: \"星期三\",\r\n        },\r\n        {\r\n          value: \"4\",\r\n          label: \"星期四\",\r\n        },\r\n        {\r\n          value: \"5\",\r\n          label: \"星期五\",\r\n        },\r\n        {\r\n          value: \"6\",\r\n          label: \"星期六\",\r\n        },\r\n        {\r\n          value: \"7\",\r\n          label: \"星期日\",\r\n        },\r\n      ],\r\n      dialogUpdateVisible: false,\r\n    };\r\n  },\r\n  methods: {\r\n    //设置树的选中状态\r\n    handleNodeClick(data) {\r\n      this.$nextTick(() => {\r\n        // this.$refs.tree.setCurrentKey(data.nodeId);\r\n        // console.log(\"我的\" + data.label);\r\n        if (data.label === \"全国零售门店\") {\r\n          getEmployee().then((datas) => {\r\n            this.tableData = datas.data;\r\n            // console.log(datas.data);\r\n          });\r\n        } else {\r\n          getEmployeeByStoreId(data.label).then((datas) => {\r\n            this.tableData = datas.data;\r\n            // console.log(datas.data);\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    //跳转到添加员工页\r\n    addEmployee() {\r\n      this.$router.push({\r\n        name: \"addEmployee\",\r\n      });\r\n    },\r\n    //点击编辑button编辑员工\r\n    handleEdit(row) {\r\n      this.dialogUpdateVisible = true;\r\n      getAllStore().then((datas) => {\r\n        this.field106Options = datas.data;\r\n        getEmployeeStoreName(row.employeeId).then((datas) => {\r\n          this.field106Options.forEach((element) => {\r\n            if (element.storeId === datas.data.storeId) {\r\n              this.formData.field106 = element;\r\n            }\r\n          });\r\n        });\r\n      });\r\n      this.formData.field102 = row.employeeId;\r\n      this.formData.field101 = row.employeeName;\r\n      this.formData.field105 = row.phone;\r\n      this.formData.field103 = row.position;\r\n      this.formData.field107 = row.email;\r\n      getPreferenceHaveOne(row.employeeId).then((datas) => {\r\n        if (datas.data.length != 0) {\r\n          this.likeDay = datas.data[0].preferValue.split(\",\");\r\n          this.value3 = this.likeDay;\r\n        } else {\r\n          this.value3 = this.$options.data().value3;\r\n        }\r\n      });\r\n      getPreferenceHaveTwo(row.employeeId).then((datas) => {\r\n        if (datas.data.length != 0) {\r\n          this.likeTime = datas.data[0].preferValue.split(\",\");\r\n        } else {\r\n          this.startTime = this.$options.data().startTime;\r\n          this.startTime1 = this.$options.data().startTime1;\r\n          this.endTime = this.$options.data().endTime;\r\n          this.endTime1 = this.$options.data().endTime1;\r\n        }\r\n        if (this.likeTime.length == 1) {\r\n          this.startTime = this.likeTime[0].slice(0, 5);\r\n          this.endTime = this.likeTime[0].slice(6, 11);\r\n        } else if (this.likeTime.length == 2) {\r\n          this.startTime = this.likeTime[0].slice(0, 5);\r\n          this.endTime = this.likeTime[0].slice(6, 11);\r\n          this.startTime1 = this.likeTime[1].slice(0, 5);\r\n          this.endTime1 = this.likeTime[1].slice(6, 11);\r\n        }\r\n      });\r\n      getPreferenceHaveThree(row.employeeId).then((datas) => {\r\n        if (datas.data.length != 0) {\r\n          this.formData.field108 = eval(\r\n            \"(\" + datas.data[0].preferValue + \")\"\r\n          ).week;\r\n          this.formData.field109 = eval(\r\n            \"(\" + datas.data[0].preferValue + \")\"\r\n          ).day;\r\n        } else {\r\n          this.formData.field108 = this.$options.data().formData.field108;\r\n          this.formData.field109 = this.$options.data().formData.field109;\r\n        }\r\n      });\r\n    },\r\n    //点击确认button确认编辑\r\n    async handelUpdate() {\r\n      //更新员工信息\r\n      updateEmployee(\r\n        this.formData.field102,\r\n        this.formData.field101,\r\n        this.formData.field106.storeId,\r\n        this.formData.field107,\r\n        this.formData.field103,\r\n        this.formData.field105\r\n      );\r\n      //更新员工工作日偏好\r\n      getPreferenceHaveOne(this.formData.field102).then((datas) => {\r\n        // console.log(1);\r\n        if (this.value3.length != 0 && datas.data.length == 0) {\r\n          insertPreferenceHaveOne(\r\n            this.formData.field102,\r\n            this.value3.join(\",\")\r\n          );\r\n        } else if (this.value3.length != 0 && datas.data.length != 0) {\r\n          updatePreferenceHaveOne(\r\n            this.formData.field102,\r\n            this.value3.join(\",\")\r\n          );\r\n        } else if (this.value3.length == 0 && datas.data.length != 0) {\r\n          deletePreferenceHaveOne(this.formData.field102);\r\n        }\r\n      });\r\n      //更新员工工作时间偏好\r\n      getPreferenceHaveTwo(this.formData.field102).then((datas) => {\r\n        console.log(2);\r\n        if (\r\n          this.startTime != \"\" &&\r\n          this.endTime != \"\" &&\r\n          this.startTime1 != \"\" &&\r\n          this.endTime1 != \"\" &&\r\n          datas.data.length == 0\r\n        ) {\r\n          this.fullTime =\r\n            this.startTime +\r\n            \"-\" +\r\n            this.endTime +\r\n            \",\" +\r\n            this.startTime1 +\r\n            \"-\" +\r\n            this.endTime1;\r\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime != \"\" &&\r\n          this.endTime != \"\" &&\r\n          datas.data.length == 0\r\n        ) {\r\n          this.fullTime = this.startTime + \"-\" + this.endTime;\r\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime1 != \"\" &&\r\n          this.endTime1 != \"\" &&\r\n          datas.data.length == 0\r\n        ) {\r\n          this.fullTime = this.startTime1 + \"-\" + this.endTime1;\r\n          insertPreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime != \"\" &&\r\n          this.endTime != \"\" &&\r\n          this.startTime1 != \"\" &&\r\n          this.endTime1 != \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          this.fullTime =\r\n            this.startTime +\r\n            \"-\" +\r\n            this.endTime +\r\n            \",\" +\r\n            this.startTime1 +\r\n            \"-\" +\r\n            this.endTime1;\r\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime != \"\" &&\r\n          this.endTime != \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          this.fullTime = this.startTime + \"-\" + this.endTime;\r\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          this.startTime1 != \"\" &&\r\n          this.endTime1 != \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          this.fullTime = this.startTime1 + \"-\" + this.endTime1;\r\n          updatePreferenceHaveTwo(this.formData.field102, this.fullTime);\r\n        } else if (\r\n          datas.data.length != 0 &&\r\n          this.startTime == \"\" &&\r\n          this.endTime == \"\" &&\r\n          this.startTime1 == \"\" &&\r\n          this.endTime1 == \"\"\r\n        ) {\r\n          deletePreferenceHaveTwo(this.formData.field102);\r\n        }\r\n      });\r\n      //更新员工工作时长偏好\r\n      getPreferenceHaveThree(this.formData.field102).then((datas) => {\r\n        console.log(3);\r\n        if (\r\n          this.formData.field108 != \"\" &&\r\n          this.formData.field109 != \"\" &&\r\n          datas.data.length == 0\r\n        ) {\r\n          this.a = JSON.stringify({\r\n            day: parseInt(this.formData.field109),\r\n            week: parseInt(this.formData.field108),\r\n          });\r\n          insertPreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (this.formData.field108 != \"\" && datas.data.length == 0) {\r\n          this.a = JSON.stringify({\r\n            week: parseInt(this.formData.field108),\r\n          });\r\n          insertPreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (this.formData.field109 != \"\" && datas.data.length == 0) {\r\n          this.a = JSON.stringify({\r\n            day: parseInt(this.formData.field109),\r\n          });\r\n          insertPreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (\r\n          this.formData.field108 != \"\" &&\r\n          this.formData.field109 != \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          this.a = JSON.stringify({\r\n            day: parseInt(this.formData.field109),\r\n            week: parseInt(this.formData.field108),\r\n          });\r\n          updatePreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (\r\n          datas.data.length != 0 &&\r\n          this.formData.field108 != \"\" &&\r\n          this.formData.field109 == \"\"\r\n        ) {\r\n          this.a = JSON.stringify({\r\n            week: parseInt(this.formData.field108),\r\n          });\r\n          updatePreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (\r\n          datas.data.length != 0 &&\r\n          this.formData.field109 != \"\" &&\r\n          this.formData.field108 == \"\"\r\n        ) {\r\n          this.a = JSON.stringify({\r\n            day: parseInt(this.formData.field109),\r\n          });\r\n          updatePreferenceHaveThree(this.formData.field102, this.a);\r\n        } else if (\r\n          this.formData.field108 == \"\" &&\r\n          this.formData.field109 == \"\" &&\r\n          datas.data.length != 0\r\n        ) {\r\n          deletePreferenceHaveThree(this.formData.field102);\r\n        }\r\n      });\r\n      this.dialogUpdateVisible = false;\r\n      await this.reload();\r\n      ElMessage({\r\n        type: \"success\",\r\n        message: \"编辑员工成功\",\r\n      });\r\n    },\r\n    //点击取消button取消编辑\r\n    cancleUpdate() {\r\n      this.dialogUpdateVisible = false;\r\n      this.value3 = ref([]);\r\n      this.startTime = \"\";\r\n      this.startTime1 = \"\";\r\n      this.endTime = \"\";\r\n      this.endTime1 = \"\";\r\n      this.formData.field108 = \"\";\r\n      this.formData.field109 = \"\";\r\n      this.likeTime = [];\r\n      // console.log(this.formData.field106.storeId);\r\n      // console.log(this.value3);\r\n      // console.log(this.startTime);\r\n      // console.log(this.startTime1);\r\n      // console.log(this.endTime);\r\n      // console.log(this.endTime1);\r\n      // console.log(this.formData.field108);\r\n      // console.log(this.formData.field109);\r\n    },\r\n    // 查询门店\r\n    getEmployees() {\r\n      if (this.value1 == \"全部\") {\r\n        if (this.inputEmployeeName == \"\") {\r\n          getEmployee().then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        } else if (this.inputEmployeeName != \"\") {\r\n          getEmployeeByEmployeeName(this.inputEmployeeName).then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        }\r\n      } else {\r\n        if (this.inputEmployeeName == \"\" && this.value1 == \"\") {\r\n          getEmployee().then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        } else if (this.value1 == \"\" && this.inputEmployeeName != \"\") {\r\n          getEmployeeByEmployeeName(this.inputEmployeeName).then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        } else if (this.inputEmployeeName == \"\" && this.value1 != \"\") {\r\n          getEmployeeByPosition(this.value1).then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(datas.data);\r\n          });\r\n        } else {\r\n          getEmployeeByEmployeeNameAndPosition(\r\n            this.inputEmployeeName,\r\n            this.value1\r\n          ).then((datas) => {\r\n            this.tableData = datas.data;\r\n            console.log(this.value);\r\n            console.log(datas.data);\r\n          });\r\n        }\r\n      }\r\n    },\r\n    //点击删除button删除员工\r\n    handleDelete(row) {\r\n      console.log(row.employeeId);\r\n      ElMessageBox.confirm(\"该员工将永久被删除，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        deletePreferenceByEmployeeId(row.employeeId);\r\n        deleteEmployee(row.employeeId);\r\n        await this.reload();\r\n        ElMessage({\r\n          type: \"success\",\r\n          message: \"删除员工成功\",\r\n        });\r\n      });\r\n    },\r\n    //点击启用button启用员工\r\n    handleEnable(row) {\r\n      console.log(row.employeeId);\r\n      ElMessageBox.confirm(\"该员工将被启用，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        updateEmployeeStateZero(row.employeeId);\r\n        await this.reload();\r\n        ElMessage({\r\n          type: \"success\",\r\n          message: \"启用员工成功\",\r\n        });\r\n      });\r\n    },\r\n    //点击停用button停用员工\r\n    handleDeactivate(row) {\r\n      console.log(row.employeeId);\r\n      ElMessageBox.confirm(\"该员工将被停用，确定吗?\", \"Warning\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(async () => {\r\n        updateEmployeeStateOne(row.employeeId);\r\n        await this.reload();\r\n        ElMessage({\r\n          type: \"success\",\r\n          message: \"停用员工成功\",\r\n        });\r\n      });\r\n    },\r\n    // 重置门店\r\n    resetTextAndSelect() {\r\n      this.value1 = \"\";\r\n      this.inputEmployeeName = \"\";\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    // 获取所有门店信息\r\n    getEmployee().then((datas) => {\r\n      this.tableData = datas.data;\r\n      // console.log(datas.data);\r\n    });\r\n    getStoreName().then((datas) => {\r\n      this.storeData = [\r\n        {\r\n          label: \"全国零售门店\",\r\n          children: [...datas.data],\r\n        },\r\n      ];\r\n      // console.log(...datas.data);\r\n    });\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.main-box {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.el-aside {\r\n  overflow: hidden;\r\n}\r\n.el-main {\r\n  padding: 0;\r\n  margin-left: 20px;\r\n  margin-top: 20px;\r\n  width: 1050px;\r\n}\r\n.el-header {\r\n  padding: 0;\r\n  width: 1050px;\r\n}\r\n.left-nav {\r\n  width: 100%;\r\n  height: 600px;\r\n}\r\n.right-header {\r\n  margin-left: 20px;\r\n  width: 100%;\r\n  height: 70px;\r\n  padding: 0;\r\n}\r\n\r\n.btns {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.el-table {\r\n  margin-top: 20px;\r\n  height: 425px;\r\n}\r\n.el-link {\r\n  margin-left: 10px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}