{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-e3667622\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"time\"\n};\nconst _hoisted_3 = {\n  class: \"view-options\"\n};\nconst _hoisted_4 = {\n  class: \"view\"\n};\nconst _hoisted_5 = {\n  class: \"view-button\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"buttonView\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"可排班人数：\", -1 /* HOISTED */));\nconst _hoisted_8 = [\"textContent\"];\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"建议排班人数：\", -1 /* HOISTED */));\nconst _hoisted_10 = {\n  class: \"schedule\"\n};\nconst _hoisted_11 = {\n  class: \"dialog-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_select, {\n    modelValue: $setup.storeValue,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.storeValue = $event),\n    filterable: \"\",\n    class: \"store\",\n    size: \"large\",\n    onChange: $setup.changeStore\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.stores, store => {\n      return _openBlock(), _createBlock(_component_el_option, {\n        key: store.storeId,\n        label: store.storeName,\n        value: store.storeId\n      }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"span\", null, _toDisplayString($setup.current.format('YYYY年M月')), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    class: _normalizeClass($setup.week_day === 'week' ? 'view-choose' : 'view-notchoose'),\n    onClick: _cache[1] || (_cache[1] = $event => $setup.chooseWorD('week'))\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"按周查看 \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"class\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    class: _normalizeClass($setup.week_day === 'day' ? 'view-choose' : 'view-notchoose'),\n    onClick: _cache[2] || (_cache[2] = $event => $setup.chooseWorD('day'))\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"按日查看 \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"class\"])]), _createVNode($setup[\"SlideSelection\"], {\n    ref: \"slideRef\",\n    week_day: $setup.week_day,\n    onEmitCurrent: _cache[3] || (_cache[3] = current1 => $setup.current = current1),\n    onEmitTable: _cache[4] || (_cache[4] = table1 => $setup.table = table1),\n    onUpdateTableData: $setup.updateTableData,\n    onUpdateDayDate: $setup.updateDayDate,\n    onInitVariable: $setup.initVariable,\n    onDragInit: $setup.dragInit\n  }, null, 8 /* PROPS */, [\"week_day\"])]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_select, {\n    modelValue: $setup.viewValue,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.viewValue = $event),\n    filterable: \"\",\n    class: \"store\",\n    size: \"large\"\n  }, {\n    default: _withCtx(() => [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.viewMethods, viewMethod => {\n      return _createVNode(_component_el_option, {\n        key: viewMethod.label,\n        label: viewMethod.value,\n        value: viewMethod.value\n      }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n    }), 64 /* STABLE_FRAGMENT */))]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _ctx.root === 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_el_button, {\n    type: \"danger\",\n    icon: $setup.Delete,\n    onClick: $setup.handleDelete,\n    title: \"删除单元格内容\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"删除\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"icon\"]), _createVNode(_component_el_button, {\n    class: _normalizeClass($setup.edit === '完成' ? 'button-choose' : null),\n    type: \"primary\",\n    icon: $setup.Edit,\n    onClick: $setup.handleEdit\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.edit), 1 /* TEXT */)]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"class\", \"icon\"]), $setup.week_day === 'week' ? (_openBlock(), _createBlock(_component_el_button, {\n    key: 0,\n    onClick: $setup.confermessage,\n    type: \"success\",\n    icon: $setup.Postcard\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"一键生成排班\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"icon\"])) : _createCommentVNode(\"v-if\", true), $setup.week_day === 'week' ? (_openBlock(), _createBlock(_component_el_button, {\n    key: 1,\n    type: \"success\",\n    icon: $setup.Finished,\n    onClick: $setup.updateSchedule\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"保存排班 \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"icon\"])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)]), _createVNode(_component_el_dialog, {\n    modelValue: $setup.getmessage,\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.getmessage = $event)\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      ref: \"returnForm\",\n      \"label-width\": \"100px\",\n      class: \"demo-ruleForm\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        style: {\n          \"float\": \"right\"\n        }\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"p\", null, [_hoisted_7, _createElementVNode(\"span\", {\n          textContent: _toDisplayString($setup.persons),\n          style: {\n            \"margin-right\": \"20px\"\n          }\n        }, null, 8 /* PROPS */, _hoisted_8)])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        style: {\n          \"float\": \"right\",\n          \"width\": \"350px\"\n        }\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"p\", null, [_hoisted_9, _createVNode(_component_el_input, {\n          modelValue: $setup.needpersons,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.needpersons = $event),\n          placeholder: \"18\",\n          style: {\n            \"margin-top\": \"10px\",\n            \"width\": \"100px\"\n          }\n        }, null, 8 /* PROPS */, [\"modelValue\"])])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: _cache[7] || (_cache[7] = $event => $setup.submitForm($setup.needpersons)),\n          style: {\n            \"float\": \"right\"\n          }\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"确定\")]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 512 /* NEED_PATCH */)]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_10, [$setup.week_day === 'week' ? (_openBlock(), _createBlock($setup[\"WeekDrag\"], {\n    key: 0,\n    ref: \"weekDragRef\",\n    loading: $setup.loading,\n    table: $setup.table,\n    tableData: $setup.tableData,\n    viewValue: $setup.viewValue,\n    week_day: $setup.week_day,\n    onEmitTableData: _cache[9] || (_cache[9] = tableData1 => $setup.tableData = tableData1),\n    onHandleClickTd: _cache[10] || (_cache[10] = (a, b) => $setup.handleClickTd(a, b)),\n    onMessage: _cache[11] || (_cache[11] = msg => $setup.message(msg)),\n    onShowAddView: _cache[12] || (_cache[12] = (a, b, c) => $setup.showAddView(a, b, c))\n  }, null, 8 /* PROPS */, [\"loading\", \"table\", \"tableData\", \"viewValue\", \"week_day\"])) : _createCommentVNode(\"v-if\", true), $setup.week_day === 'day' ? (_openBlock(), _createBlock($setup[\"DayDrag\"], {\n    key: 1,\n    ref: \"dayDragRef\",\n    current: $setup.current,\n    dayData: $setup.dayData,\n    loading: $setup.loading,\n    viewValue: $setup.viewValue,\n    week_day: $setup.week_day,\n    onEmitDayData: _cache[13] || (_cache[13] = dayData1 => $setup.dayData = dayData1),\n    onHandleClickTd: _cache[14] || (_cache[14] = (a, b) => $setup.handleClickTd(a, b)),\n    onMessage: _cache[15] || (_cache[15] = msg => $setup.message(msg)),\n    onShowAddView: _cache[16] || (_cache[16] = (a, b, c) => $setup.showAddView(a, b, c))\n  }, null, 8 /* PROPS */, [\"current\", \"dayData\", \"loading\", \"viewValue\", \"week_day\"])) : _createCommentVNode(\"v-if\", true)]), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showDialog,\n    \"onUpdate:modelValue\": _cache[19] || (_cache[19] = $event => $setup.showDialog = $event),\n    title: \"添加员工\",\n    width: \"30%\",\n    center: \"\",\n    draggable: \"\"\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_11, [_createVNode(_component_el_button, {\n      onClick: _cache[18] || (_cache[18] = $event => $setup.showDialog = false)\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"取消\")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.addEmplyee\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" 确定 \")]),\n      _: 1 /* STABLE */\n    })])]),\n\n    default: _withCtx(() => [_createVNode(_component_el_form, null, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"员工\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $setup.employeeValue,\n          \"onUpdate:modelValue\": _cache[17] || (_cache[17] = $event => $setup.employeeValue = $event),\n          \"value-key\": \"employeeId\",\n          filterable: \"\"\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.employeesAvail, employee => {\n            return _openBlock(), _createBlock(_component_el_option, {\n              key: employee.employeeId,\n              label: employee.employeeName + '(' + employee.position + ')',\n              value: employee\n            }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_el_select","$setup","filterable","size","onChange","_Fragment","store","_createBlock","_component_el_option","key","storeId","label","storeName","value","_hoisted_2","format","_hoisted_3","_hoisted_4","_component_el_button","type","onClick","ref","week_day","onEmitCurrent","current1","onEmitTable","table1","onUpdateTableData","onUpdateDayDate","onInitVariable","onDragInit","_hoisted_5","viewMethod","_ctx","_hoisted_6","icon","title","_component_el_dialog","_component_el_form","_component_el_form_item","style","_hoisted_7","_toDisplayString","_hoisted_9","_component_el_input","placeholder","_hoisted_10","loading","table","tableData","viewValue","onEmitTableData","tableData1","onHandleClickTd","a","b","onMessage","msg","onShowAddView","c","current","dayData","onEmitDayData","dayData1","width","center","draggable","footer","_hoisted_11","employee","employeeId","employeeName","position"],"sourceRoot":"","sources":["E:\\work\\vue\\schedule\\intelligent-schedule\\src\\views\\ShiftSchedule.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <el-select v-model=\"storeValue\" filterable class=\"store\" size=\"large\" @change=\"changeStore\">\r\n      <el-option v-for=\"store in stores\" :key=\"store.storeId\" :label=\"store.storeName\" :value=\"store.storeId\"/>\r\n    </el-select>\r\n\r\n    <div class=\"time\">\r\n      <span>{{ current.format('YYYY年M月') }}</span>\r\n    </div>\r\n\r\n    <div class=\"view-options\">\r\n      <div class=\"view\">\r\n        <el-button type=\"primary\" :class=\"week_day === 'week' ? 'view-choose' : 'view-notchoose'\"\r\n                   @click=\"chooseWorD('week')\">按周查看\r\n        </el-button>\r\n        <el-button type=\"primary\" :class=\"week_day === 'day' ? 'view-choose' : 'view-notchoose'\"\r\n                   @click=\"chooseWorD('day')\">按日查看\r\n        </el-button>\r\n      </div>\r\n\r\n      <SlideSelection ref=\"slideRef\" :week_day=\"week_day\" @emitCurrent=\"(current1) => current = current1\"\r\n                      @emitTable=\"(table1) => table = table1\" @updateTableData=\"updateTableData\"\r\n                      @updateDayDate=\"updateDayDate\"\r\n                      @initVariable=\"initVariable\" @dragInit=\"dragInit\"/>\r\n    </div>\r\n\r\n    <div class=\"view-button\">\r\n      <el-select v-model=\"viewValue\" filterable class=\"store\" size=\"large\">\r\n        <el-option v-for=\"viewMethod in viewMethods\" :key=\"viewMethod.label\" :label=\"viewMethod.value\"\r\n                   :value=\"viewMethod.value\"/>\r\n      </el-select>\r\n\r\n      <div v-if=\"root === 1\" class=\"buttonView\">\r\n        <el-button type=\"danger\" :icon=\"Delete\" @click=\"handleDelete\" title=\"删除单元格内容\">删除</el-button>\r\n        <el-button :class=\"edit === '完成' ? 'button-choose' : null\" type=\"primary\" :icon=\"Edit\" @click=\"handleEdit\">{{\r\n            edit\r\n          }}\r\n        </el-button>\r\n        <el-button @click=\"confermessage\" v-if=\"week_day === 'week'\" type=\"success\" :icon=\"Postcard\">一键生成排班</el-button>\r\n\r\n\r\n        <el-button v-if=\"week_day === 'week'\" type=\"success\" :icon=\"Finished\" @click=\"updateSchedule\">保存排班\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <el-dialog v-model=\"getmessage\">\r\n      <el-form ref=\"returnForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n        <el-form-item style=\"float:right\">\r\n          <p><label>可排班人数：</label>\r\n            <span v-text=\"persons\" style=\"margin-right: 20px\"></span>\r\n          </p>\r\n        </el-form-item>\r\n        <el-form-item style=\"float:right;width: 350px\">\r\n          <p><label>建议排班人数：</label>\r\n            <el-input v-model=\"needpersons\" placeholder=\"18\" style=\"margin-top: 10px;width: 100px\"></el-input>\r\n          </p>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm(needpersons)\" style=\"float:right\">确定</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <div class=\"schedule\">\r\n      <weekDrag v-if=\"week_day === 'week'\" ref=\"weekDragRef\" :loading=\"loading\" :table=\"table\" :tableData=\"tableData\"\r\n                :viewValue=\"viewValue\" :week_day=\"week_day\" @emitTableData=\"(tableData1) => tableData = tableData1\"\r\n                @handleClickTd=\"(a, b) => handleClickTd(a, b)\" @message=\"(msg) => message(msg)\"\r\n                @showAddView=\"(a, b, c) => showAddView(a, b, c)\"/>\r\n\r\n      <dayDrag v-if=\"week_day === 'day'\" ref=\"dayDragRef\" :current=\"current\" :dayData=\"dayData\" :loading=\"loading\"\r\n               :viewValue=\"viewValue\" :week_day=\"week_day\" @emitDayData=\"(dayData1) => dayData = dayData1\"\r\n               @handleClickTd=\"(a, b) => handleClickTd(a, b)\" @message=\"(msg) => message(msg)\"\r\n               @showAddView=\"(a, b, c) => showAddView(a, b, c)\"/>\r\n    </div>\r\n\r\n    <el-dialog v-model=\"showDialog\" title=\"添加员工\" width=\"30%\" center draggable>\r\n      <el-form>\r\n        <el-form-item label=\"员工\">\r\n          <el-select v-model=\"employeeValue\" value-key=\"employeeId\" filterable>\r\n            <el-option v-for=\"employee in employeesAvail\" :key=\"employee.employeeId\"\r\n                       :label=\"employee.employeeName + '(' + employee.position + ')'\" :value=\"employee\"/>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"showDialog = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"addEmplyee\">\r\n            确定\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from 'vue';\r\nimport moment from \"moment\";\r\nimport {Delete, Edit, Finished, Postcard} from '@element-plus/icons-vue';\r\nimport {ElMessage, ElMessageBox} from 'element-plus';\r\nimport SlideSelection from '../components/SlideSelection.vue'\r\nimport WeekDrag from '../components/WeekDrag'\r\nimport DayDrag from '../components/DayDrag'\r\nimport {\r\n  autoSchedul,\r\n  deleteDaySchedule,\r\n  deleteScheduling,\r\n  getADaywork,\r\n  getAllEmployee,\r\n  getAllStore,\r\n  getAWeekwork,\r\n  getStorePersons,\r\n  getStuffDayWork,\r\n  getStuffWeekWork,\r\n  replaceDaySchedule,\r\n  updateWeekData\r\n} from '@/api';\r\n\r\n/**\r\n * 初始化获取数据库数据：stores、data、employees\r\n */\r\n// 门店切换\r\nconst stores = ref([]);\r\nconst storeValue = ref();\r\n\r\n//所有员工数据\r\nconst employees = ref([]);\r\nconst employeesAvail = ref([]);\r\n\r\n//表格单元格数据\r\nvar data = [];\r\nconst tableData = ref([]);\r\nconst dayData = ref([]);\r\nconst weekIndex = [0, 1, 1, 1, 1, 1, 0];\r\n\r\nlet persons = ref();\r\nconst needpersons = ref(18);\r\n\r\nconst getmessage = ref(false);\r\n\r\nconst submitForm = (needperson) => {\r\n  let monday = current.value.startOf('isoWeek').format('YYYY-MM-DD');\r\n  console.log(storeValue.value + \"   \" + needperson + \"   \" + monday)\r\n  autoSchedul(storeValue.value, needperson, monday).then((datas) => {\r\n    console.log(\"1332eeisdyhsjdhsadhio\")\r\n    console.log(\"ggjh\" + datas.data)\r\n  });\r\n}\r\n\r\nconst confermessage = () => {\r\n  console.log(\"店铺id\" + storeValue.value)\r\n  // console.log(\"我的测试点\"+getStorePersons(storeId.value))\r\n  getStorePersons(storeValue.value).then(({data}) => {\r\n    console.log(\"测试数据    \" + data)\r\n    persons.value = data;\r\n  })\r\n  getmessage.value = true;\r\n  console.log(\"猜猜我是谁\" + getmessage.value)\r\n}\r\n\r\n//登录用户ID和权限\r\nconst employee = sessionStorage.getItem(\"employee\")\r\nconsole.log(\"employee\" + employee)\r\n// const employeeId = JSON.parse(employee).employeeId;\r\n// const root = JSON.parse(employee).root;\r\n\r\n//初始化获取数据库\r\ngetAllStore().then((datas) => {\r\n  stores.value = datas.data;\r\n  storeValue.value = stores.value[0].storeId;\r\n\r\n  getAllEmployee(stores.value[0].storeId).then((datas) => {\r\n    employees.value = datas.data;\r\n    employeesAvail.value = [...employees.value];\r\n  });\r\n\r\n  console.log(root)\r\n  loading.value = true;\r\n  if (root === 1) {\r\n    getAWeekwork(moment().startOf('isoWeek').format('YYYY-MM-DD'), moment().endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value)\r\n        .then((datas) => {\r\n          data = datas.data;\r\n          var index = 0;\r\n          let tmp = data[0].map(function (col, i) {\r\n            return data.map(function (row) {\r\n              if (index === i) {\r\n                let dataRow = [];\r\n                dataRow.push(row[i][2]);\r\n                tableData.value.push(dataRow);\r\n                index++;\r\n              }\r\n              return row[i].slice(0, 2);\r\n            })\r\n          });\r\n          tableData.value = tableData.value.map((val, index) => {\r\n            let t = [...val];\r\n            t.push([...tmp[index]]);\r\n            return t;\r\n          })\r\n          console.log(tableData.value)\r\n          loading.value = false;\r\n        });\r\n\r\n    loading.value = true;\r\n    getADaywork(moment().format('YYYY-MM-DD'), weekIndex[moment().day()], storeValue.value)\r\n        .then((datas) => {\r\n          dayData.value = datas.data;\r\n          loading.value = false;\r\n        });\r\n  } else {\r\n    getStuffWeekWork(moment().startOf('isoWeek').format('YYYY-MM-DD'), moment().endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value, employeeId)\r\n        .then((datas) => {\r\n          data = datas.data;\r\n          var index = 0;\r\n          let tmp = data[0].map(function (col, i) {\r\n            return data.map(function (row) {\r\n              if (index === i) {\r\n                let dataRow = [];\r\n                dataRow.push(row[i][2]);\r\n                tableData.value.push(dataRow);\r\n                index++;\r\n              }\r\n              return row[i].slice(0, 2);\r\n            })\r\n          });\r\n          tableData.value = tableData.value.map((val, index) => {\r\n            let t = [...val];\r\n            t.push([...tmp[index]]);\r\n            return t;\r\n          })\r\n          console.log(tableData.value)\r\n          loading.value = false;\r\n        });\r\n\r\n    loading.value = true;\r\n    getStuffDayWork(moment().format('YYYY-MM-DD'), weekIndex[moment().day()], storeValue.value, employeeId)\r\n        .then((datas) => {\r\n          dayData.value = datas.data;\r\n          loading.value = false;\r\n        });\r\n  }\r\n});\r\n\r\n\r\n/**\r\n * 初始化本地变量\r\n */\r\n/* 固定变量 */\r\n//全部查看|按岗位分组|按员工分组\r\nconst viewMethods = [\r\n  {\r\n    label: 1,\r\n    value: '全部查看'\r\n  },\r\n  {\r\n    label: 2,\r\n    value: '按岗位分组'\r\n  },\r\n  {\r\n    label: 3,\r\n    value: '按员工分组'\r\n  }\r\n]\r\n\r\nconst slideRef = ref();\r\nconst weekDragRef = ref();\r\nconst dayDragRef = ref();\r\n\r\n/* 需修改变量 */\r\n//按周查看|按日查看 的切换\r\nconst week_day = ref('week');\r\n\r\n//全部查看|按岗位分组|按员工分组 的切换\r\nconst viewValue = ref(viewMethods[0].value);\r\n\r\nconst current = ref(moment());\r\nconst labels = ref([\r\n  '周一 ' + current.value.startOf('isoWeek').format('M月D日'),\r\n  '周二 ' + current.value.startOf('isoWeek').add(1, 'days').format('M月D日'),\r\n  '周三 ' + current.value.startOf('isoWeek').add(2, 'days').format('M月D日'),\r\n  '周四 ' + current.value.startOf('isoWeek').add(3, 'days').format('M月D日'),\r\n  '周五 ' + current.value.startOf('isoWeek').add(4, 'days').format('M月D日'),\r\n  '周六 ' + current.value.startOf('isoWeek').add(5, 'days').format('M月D日'),\r\n  '周日 ' + current.value.startOf('isoWeek').add(6, 'days').format('M月D日'),\r\n]);\r\n\r\n//被点击单元格的坐标s\r\nvar arrTd = [];\r\n\r\n//编辑button的文本切换\r\nconst edit = ref('编辑');\r\n\r\n//表格标签\r\nconst table = ref({\r\n  time: '时间',\r\n  week1: labels.value[0],\r\n  week2: labels.value[1],\r\n  week3: labels.value[2],\r\n  week4: labels.value[3],\r\n  week5: labels.value[4],\r\n  week6: labels.value[5],\r\n  week7: labels.value[6],\r\n});\r\n\r\n//加载数据\r\nconst loading = ref(true)\r\n\r\n//是否可拖拽drag，拖拽起点dragging，拖拽终点ending\r\nconst drag = ref(false);\r\nconst ending = ref(null);\r\nconst dragging = ref(null);\r\n\r\n//是否显示添加员工对话框\r\nconst showDialog = ref(false);\r\n//对话框里的员工下拉框\r\nconst employeeValue = ref('请选择要添加的员工');\r\n//已处于选中单元格中的员工s\r\nvar addIndex = null;\r\n\r\n\r\n/**\r\n * 函数\r\n */\r\n//修改门店\r\nconst changeStore = () => {\r\n  getStoreData();\r\n\r\n  //周切换\r\n  slideRef.value.initWeeks();\r\n\r\n  //日切换\r\n  slideRef.value.initDays();\r\n\r\n  initVariable();\r\n}\r\n\r\n//修改按周查看|按日查看\r\nconst chooseWorD = (button) => {\r\n  //获取数据库data、dayData\r\n  if (button === 'week' && week_day.value === 'day') {\r\n    week_day.value = 'week';\r\n\r\n    //周切换\r\n    slideRef.value.initWeeks();\r\n  } else if (button === 'day' && week_day.value === 'week') {\r\n    week_day.value = 'day';\r\n\r\n    //日切换\r\n    slideRef.value.initDays();\r\n  }\r\n\r\n  initVariable();\r\n}\r\n\r\n//点击多选单元格\r\nconst handleClickTd = (row, col) => {\r\n  var flag = 0;\r\n  var td = document.getElementById('td' + week_day.value + row + '-' + col);\r\n\r\n  arrTd.map((value, index) => {\r\n    if (value.toString() === [row, col].toString()) {\r\n      arrTd.splice(index, 1);\r\n      td.style.backgroundColor = '';\r\n      flag = 1;\r\n      return;\r\n    }\r\n  })\r\n  if (flag === 0) {\r\n    arrTd.push([row, col]);\r\n    td.style.backgroundColor = '#ffe0e0';\r\n  }\r\n\r\n  console.log(arrTd);\r\n}\r\n//点击删除button删除单元格内容\r\nconst handleDelete = () => {\r\n  if (edit.value === '完成') {\r\n    message('正处于编辑状态，不可删除');\r\n  } else if (arrTd.length === 0) {\r\n    message('请选择要删除内容的单元格');\r\n  } else {\r\n    ElMessageBox.confirm(\r\n        '单元格内容将永久被删除，确定吗?',\r\n        'Warning',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n        }\r\n    )\r\n        .then(() => {\r\n          if (week_day.value === 'week') {\r\n            var newData = [...tableData.value];\r\n            var deleteIds = [];\r\n            arrTd.map(value => {\r\n              console.log(tableData.value[value[0]][1][value[1]])\r\n              if (tableData.value[value[0]][1][value[1]][1] !== null)\r\n                deleteIds.push(tableData.value[value[0]][1][value[1]][1]);\r\n              newData[value[0]][1][value[1]][0] = [];\r\n              newData[value[0]][1][value[1]][1] = null;\r\n              let td = document.getElementById('td' + week_day.value + value[0] + '-' + value[1]);\r\n              // console.log(td)\r\n              td.style.backgroundColor = '';\r\n            })\r\n            tableData.value = [...newData];\r\n            deleteScheduling(deleteIds);\r\n          } else {\r\n            var newDayData = [...dayData.value];\r\n            var updateIndexs = [];\r\n            var updateEmployeeIds = \"\";\r\n            arrTd.map(value => {\r\n              if (JSON.stringify(newDayData[value[0]][0][value[1]]) !== '{}'\r\n                  && newDayData[value[0]][0][value[1]].employeeId !== null)\r\n                updateIndexs.push(value[0]);\r\n              newDayData[value[0]][0][value[1]] = {};\r\n              let td = document.getElementById('td' + week_day.value + value[0] + '-' + value[1]);\r\n              td.style.backgroundColor = '';\r\n            })\r\n            dayData.value = [...newDayData];\r\n\r\n            let items = [];\r\n            updateIndexs = [...new Set(updateIndexs)];\r\n            updateIndexs.map(value => {\r\n              let employeeIds = \"\";\r\n              newDayData[value][0].map(v => {\r\n                if (v.employeeId !== null && JSON.stringify(v) !== '{}' && employeeIds === \"\")\r\n                  employeeIds += v.employeeId;\r\n                else if (v.employeeId !== null && JSON.stringify(v) !== '{}')\r\n                  employeeIds += \",\" + v.employeeId;\r\n              });\r\n              let item = {};\r\n              item.index = value;\r\n              item.period = newDayData[value][1];\r\n              item.employeeIds = employeeIds;\r\n              items.push(item);\r\n            });\r\n            console.log(items)\r\n            deleteDaySchedule(items, current.value.format('YYYY-MM-DD'), storeValue.value);\r\n          }\r\n\r\n          arrTd.splice(0, arrTd.length);\r\n\r\n          ElMessage({\r\n            type: 'success',\r\n            message: '删除成功',\r\n          })\r\n        })\r\n        .catch(() => {\r\n          ElMessage({\r\n            type: 'info',\r\n            message: '取消删除',\r\n          })\r\n        })\r\n  }\r\n}\r\n//点击编辑|完成\r\nconst handleEdit = () => {\r\n  if (edit.value === '编辑') {\r\n    var tds = document.querySelectorAll('td');\r\n    for (var i = 1; i < tds.length; i++) {\r\n      if (tds[i].id !== 'td-time')\r\n        tds[i].style.backgroundColor = '';\r\n    }\r\n  } else {\r\n    if (week_day.value === 'week') {\r\n      updateSchedule();\r\n    } else {\r\n      let items = [];\r\n      dayData.value.map((value, index) => {\r\n        let item = {};\r\n        item.period = value[1];\r\n        let employeeIds = \"\";\r\n        let flag = 0;\r\n        value[0].map(v => {\r\n          if (JSON.stringify(v) !== '{}' && v.employeeId !== null && flag === 0) {\r\n            employeeIds += v.employeeId;\r\n            flag = 1;\r\n          } else if (JSON.stringify(v) !== '{}' && v.employeeId !== null)\r\n            employeeIds += \",\" + v.employeeId;\r\n        });\r\n        item.employeeIds = employeeIds;\r\n        items.push(item);\r\n      });\r\n      console.log(items);\r\n      replaceDaySchedule(items, storeValue.value, current.value.format('YYYY-MM-DD'));\r\n    }\r\n  }\r\n\r\n  if (week_day.value === 'week')\r\n    weekDragRef.value.weekEdit();\r\n  else\r\n    dayDragRef.value.dayEdit();\r\n\r\n  edit.value = (edit.value === '编辑' ? '完成' : '编辑');\r\n}\r\n\r\n//更新数据库排班数据\r\nconst updateSchedule = () => {\r\n  let items = [];\r\n  tableData.value.forEach(row => {\r\n    row[1].forEach((col, i) => {\r\n      let item = {};\r\n\r\n      if (col[1] != null) item.id = col[1];\r\n      else item.id = null;\r\n\r\n      let employeeIds = \"\";\r\n      if (col[0] != null) {\r\n        col[0].forEach((stuff, index) => {\r\n          if (index === 0) employeeIds += stuff.employeeId;\r\n          else employeeIds += \",\" + stuff.employeeId;\r\n        })\r\n      }\r\n      item.employeeIds = employeeIds;\r\n\r\n      if (item.id != null || employeeIds != \"\") {\r\n        console.log(row[0])\r\n        item.period = row[0];\r\n        item.day = current.value.startOf('W').add(i, 'days').format(\"YYYY-MM-DD\");\r\n\r\n        console.log(item);\r\n        items.push(JSON.stringify(item));\r\n      }\r\n    })\r\n  })\r\n\r\n  updateWeekData(items, storeValue.value);\r\n}\r\n\r\nconst dragInit = () => {\r\n  if (week_day.value === 'week')\r\n    weekDragRef.value.initDrag();\r\n  else\r\n    dayDragRef.value.initDrag();\r\n}\r\n\r\n//显示添加员工对话框、添加员工\r\nconst showAddView = (added, index1, index2) => {\r\n  console.log(added, index1, index2)\r\n  employeeValue.value = '请选择要添加的员工';\r\n  addIndex = [index1, index2];\r\n\r\n  var newEAvil = [...employees.value];\r\n  if (week_day.value === 'week') {\r\n    newEAvil = newEAvil.filter(item => {\r\n      var isInclude = false;\r\n\r\n      added.map((value) => {\r\n        if (value.employeeId === item.employeeId) {\r\n          isInclude = true;\r\n          return;\r\n        }\r\n      })\r\n      // console.log(isInclude);\r\n      return !isInclude;\r\n    });\r\n  } else {\r\n    newEAvil = newEAvil.filter(item => {\r\n      var isInclude = false;\r\n\r\n      console.log(dayData.value[index1])\r\n      dayData.value[index1].map(value => {\r\n        console.log(value)\r\n        if (JSON.stringify(value) !== '{}' && value.employeeId !== null) {\r\n          if (value.employeeId === item.employeeId) {\r\n            isInclude = true;\r\n            return;\r\n          }\r\n        }\r\n      });\r\n      // console.log(isInclude);\r\n      return !isInclude;\r\n    });\r\n  }\r\n  employeesAvail.value = [...newEAvil];\r\n  console.log(employeesAvail)\r\n\r\n  showDialog.value = true;\r\n}\r\nconst addEmplyee = () => {\r\n  if (employeeValue.value === '请选择要添加的员工') {\r\n    message(\"请选择要添加的员工\");\r\n  } else {\r\n    if (week_day.value === 'week') {\r\n      let newData = [...tableData.value];\r\n      newData[addIndex[0]][1][addIndex[1]][0].push(employeeValue.value);\r\n      tableData.value = [...newData];\r\n    } else {\r\n      let newData = [...dayData.value];\r\n      newData[addIndex[0]][1][addIndex[1]] = employeeValue.value;\r\n      dayData.value = [...newData];\r\n    }\r\n  }\r\n\r\n  showDialog.value = false;\r\n}\r\n\r\n//工具类\r\nconst message = (str) => {\r\n  return (\r\n      ElMessage({\r\n        showClose: true,\r\n        message: str,\r\n        type: 'warning',\r\n        grouping: true\r\n      })\r\n  );\r\n}\r\nconst initVariable = () => {\r\n  //全部查看|按岗位分组|按员工分组 的切换\r\n  viewValue.value = viewMethods[0].value;\r\n\r\n  //被点击单元格的坐标s\r\n  arrTd = [];\r\n\r\n  //编辑button的文本切换\r\n  edit.value = '编辑';\r\n\r\n  //是否可拖拽drag，拖拽起点dragging，拖拽终点ending\r\n  drag.value = false;\r\n  ending.value = null;\r\n  dragging.value = null;\r\n\r\n  //是否显示添加员工对话框\r\n  showDialog.value = false;\r\n  //对话框里的员工下拉框\r\n  employeeValue.value = '请选择要添加的员工';\r\n  //已处于选中单元格中的员工s\r\n  addIndex = null;\r\n\r\n  var tds = document.querySelectorAll('td');\r\n  for (var i = 1; i < tds.length; i++) {\r\n    if (tds[i].id !== 'td-time')\r\n      tds[i].style.backgroundColor = '';\r\n  }\r\n}\r\nconst updateTableData = () => {\r\n  loading.value = true;\r\n  tableData.value = [];\r\n  if (root === 1) {\r\n    getAWeekwork(current.value.startOf('isoWeek').format('YYYY-MM-DD'), current.value.endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value)\r\n        .then((datas) => {\r\n          data = datas.data;\r\n          var index = 0;\r\n          let tmp = data[0].map(function (col, i) {\r\n            return data.map(function (row) {\r\n              if (index === i) {\r\n                let dataRow = [];\r\n                dataRow.push(row[i][2]);\r\n                tableData.value.push(dataRow);\r\n                index++;\r\n              }\r\n              return row[i].slice(0, 2);\r\n            })\r\n          });\r\n          tableData.value = tableData.value.map((val, index) => {\r\n            let t = [...val];\r\n            t.push([...tmp[index]]);\r\n            return t;\r\n          })\r\n          console.log(tableData.value)\r\n          loading.value = false;\r\n        });\r\n  } else {\r\n    getStuffWeekWork(current.value.startOf('isoWeek').format('YYYY-MM-DD'), current.value.endOf('isoWeek').format('YYYY-MM-DD'), storeValue.value, employeeId)\r\n        .then((datas) => {\r\n          data = datas.data;\r\n          var index = 0;\r\n          let tmp = data[0].map(function (col, i) {\r\n            return data.map(function (row) {\r\n              if (index === i) {\r\n                let dataRow = [];\r\n                dataRow.push(row[i][2]);\r\n                tableData.value.push(dataRow);\r\n                index++;\r\n              }\r\n              return row[i].slice(0, 2);\r\n            })\r\n          });\r\n          tableData.value = tableData.value.map((val, index) => {\r\n            let t = [...val];\r\n            t.push([...tmp[index]]);\r\n            return t;\r\n          })\r\n          console.log(tableData.value)\r\n          loading.value = false;\r\n        });\r\n  }\r\n}\r\nconst updateDayDate = () => {\r\n  loading.value = true;\r\n  if (root === 1) {\r\n    getADaywork(current.value.format('YYYY-MM-DD'), weekIndex[current.value.day()], storeValue.value)\r\n        .then((datas) => {\r\n          dayData.value = datas.data;\r\n          loading.value = false;\r\n        });\r\n  } else {\r\n    console.log(\"this\")\r\n    loading.value = true;\r\n    getStuffDayWork(current.value.format('YYYY-MM-DD'), weekIndex[moment().day()], storeValue.value, employeeId)\r\n        .then((datas) => {\r\n          console.log(datas.data)\r\n          dayData.value = datas.data;\r\n          loading.value = false;\r\n        });\r\n  }\r\n}\r\nconst getStoreData = () => {\r\n  console.log(storeValue.value)\r\n\r\n  getAllEmployee(stores.value[0].storeId).then((datas) => {\r\n    employees.value = datas.data;\r\n    employeesAvail.value = [...employees.value];\r\n  });\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  background-color: #fff;\r\n  border-radius: 15px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 20px;\r\n  overflow: hidden;\r\n\r\n  .store {\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    border-radius: 10px;\r\n    display: flex;\r\n    align-self: center;\r\n  }\r\n\r\n  .time {\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .view-options {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n\r\n    .view {\r\n      background-color: hsl(0, 0%, 89%);\r\n      padding: 5px;\r\n      border-radius: 5px;\r\n\r\n      .el-button {\r\n        border: none;\r\n        padding: 10px 30px;\r\n      }\r\n\r\n      .view-choose {\r\n        background-color: #fff;\r\n        color: #0a85ff;\r\n      }\r\n\r\n      .view-notchoose {\r\n        background-color: #e3e3e3;\r\n        color: #000;\r\n      }\r\n\r\n      .view-notchoose:hover {\r\n        background-color: #fff;\r\n        color: #000;\r\n      }\r\n    }\r\n  }\r\n\r\n  .view-button {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 10px;\r\n\r\n    .button-choose {\r\n      background-color: #409EFF;\r\n      color: #fff;\r\n    }\r\n\r\n    .button-choose:hover {\r\n      background-color: #fff;\r\n      color: #0a85ff;\r\n    }\r\n  }\r\n\r\n  .schedule {\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n\r\n  .el-form {\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}